"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_datalayer_jupyterlite-ipykernel_lib_index_js"],{

/***/ "./node_modules/@datalayer/jupyterlite-ipykernel/lib/_pypi.js":
/*!********************************************************************!*\
  !*** ./node_modules/@datalayer/jupyterlite-ipykernel/lib/_pypi.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PIPLITE_WHEEL\": function() { return /* binding */ PIPLITE_WHEEL; }\n/* harmony export */ });\n// this file is autogenerated from the wheels described in ../package.json\n// export * as allJSONUrl from '!!file-loader?name=pypi/[name].[ext]&context=.!../pypi/all.json';\n// export * as ipykernelWheelUrl from '!!file-loader?name=pypi/[name].[ext]&context=.!../pypi/ipykernel-6.9.2-py3-none-any.whl';\n// export * as pipliteWheelUrl from '!!file-loader?name=pypi/[name].[ext]&context=.!../pypi/piplite-0.1.0b11-py3-none-any.whl';\n// export * as pyoliteWheelUrl from '!!file-loader?name=pypi/[name].[ext]&context=.!../pypi/pyolite-0.1.0b11-py3-none-any.whl';\n// export * as widgetsnbextensionWheelUrl from '!!file-loader?name=pypi/[name].[ext]&context=.!../pypi/widgetsnbextension-3.6.0-py3-none-any.whl';\nconst PIPLITE_WHEEL = 'piplite-0.1.0b11-py3-none-any.whl';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL19weXBpLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL19weXBpLmpzPzk0YzAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGhpcyBmaWxlIGlzIGF1dG9nZW5lcmF0ZWQgZnJvbSB0aGUgd2hlZWxzIGRlc2NyaWJlZCBpbiAuLi9wYWNrYWdlLmpzb25cbi8vIGV4cG9ydCAqIGFzIGFsbEpTT05VcmwgZnJvbSAnISFmaWxlLWxvYWRlcj9uYW1lPXB5cGkvW25hbWVdLltleHRdJmNvbnRleHQ9LiEuLi9weXBpL2FsbC5qc29uJztcbi8vIGV4cG9ydCAqIGFzIGlweWtlcm5lbFdoZWVsVXJsIGZyb20gJyEhZmlsZS1sb2FkZXI/bmFtZT1weXBpL1tuYW1lXS5bZXh0XSZjb250ZXh0PS4hLi4vcHlwaS9pcHlrZXJuZWwtNi45LjItcHkzLW5vbmUtYW55LndobCc7XG4vLyBleHBvcnQgKiBhcyBwaXBsaXRlV2hlZWxVcmwgZnJvbSAnISFmaWxlLWxvYWRlcj9uYW1lPXB5cGkvW25hbWVdLltleHRdJmNvbnRleHQ9LiEuLi9weXBpL3BpcGxpdGUtMC4xLjBiMTEtcHkzLW5vbmUtYW55LndobCc7XG4vLyBleHBvcnQgKiBhcyBweW9saXRlV2hlZWxVcmwgZnJvbSAnISFmaWxlLWxvYWRlcj9uYW1lPXB5cGkvW25hbWVdLltleHRdJmNvbnRleHQ9LiEuLi9weXBpL3B5b2xpdGUtMC4xLjBiMTEtcHkzLW5vbmUtYW55LndobCc7XG4vLyBleHBvcnQgKiBhcyB3aWRnZXRzbmJleHRlbnNpb25XaGVlbFVybCBmcm9tICchIWZpbGUtbG9hZGVyP25hbWU9cHlwaS9bbmFtZV0uW2V4dF0mY29udGV4dD0uIS4uL3B5cGkvd2lkZ2V0c25iZXh0ZW5zaW9uLTMuNi4wLXB5My1ub25lLWFueS53aGwnO1xuZXhwb3J0IGNvbnN0IFBJUExJVEVfV0hFRUwgPSAncGlwbGl0ZS0wLjEuMGIxMS1weTMtbm9uZS1hbnkud2hsJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@datalayer/jupyterlite-ipykernel/lib/_pypi.js\n"));

/***/ }),

/***/ "./node_modules/@datalayer/jupyterlite-ipykernel/lib/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@datalayer/jupyterlite-ipykernel/lib/index.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PIPLITE_WHEEL\": function() { return /* reexport safe */ _pypi__WEBPACK_IMPORTED_MODULE_0__.PIPLITE_WHEEL; },\n/* harmony export */   \"PyoliteKernel\": function() { return /* reexport safe */ _kernel__WEBPACK_IMPORTED_MODULE_1__.PyoliteKernel; },\n/* harmony export */   \"PyoliteRemoteKernel\": function() { return /* reexport safe */ _worker__WEBPACK_IMPORTED_MODULE_2__.PyoliteRemoteKernel; }\n/* harmony export */ });\n/* harmony import */ var _pypi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_pypi */ \"./node_modules/@datalayer/jupyterlite-ipykernel/lib/_pypi.js\");\n/* harmony import */ var _kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kernel */ \"./node_modules/@datalayer/jupyterlite-ipykernel/lib/kernel.js\");\n/* harmony import */ var _worker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./worker */ \"./node_modules/@datalayer/jupyterlite-ipykernel/lib/worker.js\");\n// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDd0I7QUFDUztBQUNSO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL2luZGV4LmpzPzI2Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSBKdXB5dGVyIERldmVsb3BtZW50IFRlYW0uXG4vLyBEaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1vZGlmaWVkIEJTRCBMaWNlbnNlLlxuZXhwb3J0ICogZnJvbSAnLi9fcHlwaSc7XG5leHBvcnQgKiBmcm9tICcuL2NvbWxpbmsud29ya2VyJztcbmV4cG9ydCAqIGZyb20gJy4va2VybmVsJztcbmV4cG9ydCAqIGZyb20gJy4vdG9rZW5zJztcbmV4cG9ydCAqIGZyb20gJy4vd29ya2VyJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@datalayer/jupyterlite-ipykernel/lib/index.js\n"));

/***/ }),

/***/ "./node_modules/@datalayer/jupyterlite-ipykernel/lib/kernel.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@datalayer/jupyterlite-ipykernel/lib/kernel.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PyoliteKernel\": function() { return /* binding */ PyoliteKernel; }\n/* harmony export */ });\n/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lumino/coreutils */ \"./node_modules/@lumino/coreutils/dist/index.js\");\n/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @jupyterlab/coreutils */ \"./node_modules/@jupyterlab/coreutils/lib/index.js\");\n/* harmony import */ var _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _datalayer_jupyterlite_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @datalayer/jupyterlite-kernel */ \"./node_modules/@datalayer/jupyterlite-kernel/lib/kernel.js\");\n/* harmony import */ var comlink__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! comlink */ \"./node_modules/comlink/dist/esm/comlink.mjs\");\n/* harmony import */ var _pypi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_pypi */ \"./node_modules/@datalayer/jupyterlite-ipykernel/lib/_pypi.js\");\n\n\n\n\n\n/**\n * A kernel that executes Python code with Pyodide.\n */\nclass PyoliteKernel extends _datalayer_jupyterlite_kernel__WEBPACK_IMPORTED_MODULE_1__.BaseKernel {\n    /**\n     * Instantiate a new PyodideKernel\n     *\n     * @param options The instantiation options for a new PyodideKernel\n     */\n    constructor(options) {\n        super(options);\n        this._ready = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_0__.PromiseDelegate();\n        this._worker = this.initWorker(options);\n        this._worker.onmessage = (e) => this._processWorkerMessage(e.data);\n        this._remoteKernel = this.initRemote(options);\n        this._ready.resolve();\n    }\n    /**\n     * Load the worker.\n     *\n     * ### Note\n     *\n     * Subclasses must implement this typographically almost _exactly_ for\n     * webpack to find it.\n     */\n    initWorker(options) {\n        return new Worker(__webpack_require__.tu(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(\"node_modules_datalayer_jupyterlite-ipykernel_lib_comlink_worker_js\"), __webpack_require__.b)), {\n            type: undefined,\n        });\n    }\n    initRemote(options) {\n        const remote = (0,comlink__WEBPACK_IMPORTED_MODULE_2__.wrap)(this._worker);\n        const remoteOptions = this.initRemoteOptions(options);\n        remote.initialize(remoteOptions);\n        return remote;\n    }\n    initRemoteOptions(options) {\n        const { pyodideUrl } = options;\n        const indexUrl = pyodideUrl.slice(0, pyodideUrl.lastIndexOf('/') + 1);\n        const baseUrl = _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3__.PageConfig.getBaseUrl();\n        //    const pypi = URLExt.join(baseUrl, 'build/pypi');\n        const pypi = \"https://datalayer-assets.s3.us-west-2.amazonaws.com/pypi\";\n        const pipliteUrls = [...(options.pipliteUrls || []), _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3__.URLExt.join(pypi, 'all.json')];\n        const pipliteWheelUrl = _jupyterlab_coreutils__WEBPACK_IMPORTED_MODULE_3__.URLExt.join(pypi, _pypi__WEBPACK_IMPORTED_MODULE_4__.PIPLITE_WHEEL);\n        const disablePyPIFallback = !!options.disablePyPIFallback;\n        return {\n            baseUrl,\n            pyodideUrl,\n            indexUrl,\n            pipliteWheelUrl,\n            pipliteUrls,\n            disablePyPIFallback,\n            location: this.location,\n            mountDrive: options.mountDrive,\n        };\n    }\n    /**\n     * Dispose the kernel.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._worker.terminate();\n        this._worker = null;\n        super.dispose();\n    }\n    /**\n     * A promise that is fulfilled when the kernel is ready.\n     */\n    get ready() {\n        return this._ready.promise;\n    }\n    /**\n     * Process a message coming from the pyodide web worker.\n     *\n     * @param msg The worker message to process.\n     */\n    _processWorkerMessage(msg) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (!msg.type) {\n            return;\n        }\n        switch (msg.type) {\n            case 'stream': {\n                const bundle = (_a = msg.bundle) !== null && _a !== void 0 ? _a : { name: 'stdout', text: '' };\n                this.stream(bundle, msg.parentHeader);\n                break;\n            }\n            case 'input_request': {\n                const bundle = (_b = msg.content) !== null && _b !== void 0 ? _b : { prompt: '', password: false };\n                this.inputRequest(bundle, msg.parentHeader);\n                break;\n            }\n            case 'display_data': {\n                const bundle = (_c = msg.bundle) !== null && _c !== void 0 ? _c : { data: {}, metadata: {}, transient: {} };\n                this.displayData(bundle, msg.parentHeader);\n                break;\n            }\n            case 'update_display_data': {\n                const bundle = (_d = msg.bundle) !== null && _d !== void 0 ? _d : { data: {}, metadata: {}, transient: {} };\n                this.updateDisplayData(bundle, msg.parentHeader);\n                break;\n            }\n            case 'clear_output': {\n                const bundle = (_e = msg.bundle) !== null && _e !== void 0 ? _e : { wait: false };\n                this.clearOutput(bundle, msg.parentHeader);\n                break;\n            }\n            case 'execute_result': {\n                const bundle = (_f = msg.bundle) !== null && _f !== void 0 ? _f : { execution_count: 0, data: {}, metadata: {} };\n                this.publishExecuteResult(bundle, msg.parentHeader);\n                break;\n            }\n            case 'execute_error': {\n                const bundle = (_g = msg.bundle) !== null && _g !== void 0 ? _g : { ename: '', evalue: '', traceback: [] };\n                this.publishExecuteError(bundle, msg.parentHeader);\n                break;\n            }\n            case 'comm_msg':\n            case 'comm_open':\n            case 'comm_close': {\n                this.handleComm(msg.type, msg.content, msg.metadata, msg.buffers, msg.parentHeader);\n                break;\n            }\n        }\n    }\n    /**\n     * Handle a kernel_info_request message\n     */\n    async kernelInfoRequest() {\n        const content = {\n            implementation: 'pyodide',\n            implementation_version: '0.1.0',\n            language_info: {\n                codemirror_mode: {\n                    name: 'python',\n                    version: 3,\n                },\n                file_extension: '.py',\n                mimetype: 'text/x-python',\n                name: 'python',\n                nbconvert_exporter: 'python',\n                pygments_lexer: 'ipython3',\n                version: '3.8',\n            },\n            protocol_version: '5.3',\n            status: 'ok',\n            banner: 'Pyolite: A WebAssembly-powered Python kernel backed by Pyodide',\n            help_links: [\n                {\n                    text: 'Python (WASM) Kernel',\n                    url: 'https://pyodide.org',\n                },\n            ],\n        };\n        return content;\n    }\n    /**\n     * Handle an `execute_request` message\n     *\n     * @param msg The parent message.\n     */\n    async executeRequest(content) {\n        const result = await this._remoteKernel.execute(content, this.parent);\n        result.execution_count = this.executionCount;\n        return result;\n    }\n    /**\n     * Handle an complete_request message\n     *\n     * @param msg The parent message.\n     */\n    async completeRequest(content) {\n        return await this._remoteKernel.complete(content, this.parent);\n    }\n    /**\n     * Handle an `inspect_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async inspectRequest(content) {\n        return await this._remoteKernel.inspect(content, this.parent);\n    }\n    /**\n     * Handle an `is_complete_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async isCompleteRequest(content) {\n        return await this._remoteKernel.isComplete(content, this.parent);\n    }\n    /**\n     * Handle a `comm_info_request` message.\n     *\n     * @param content - The content of the request.\n     *\n     * @returns A promise that resolves with the response message.\n     */\n    async commInfoRequest(content) {\n        return await this._remoteKernel.commInfo(content, this.parent);\n    }\n    /**\n     * Send an `comm_open` message.\n     *\n     * @param msg - The comm_open message.\n     */\n    async commOpen(msg) {\n        return await this._remoteKernel.commOpen(msg, this.parent);\n    }\n    /**\n     * Send an `comm_msg` message.\n     *\n     * @param msg - The comm_msg message.\n     */\n    async commMsg(msg) {\n        return await this._remoteKernel.commMsg(msg, this.parent);\n    }\n    /**\n     * Send an `comm_close` message.\n     *\n     * @param close - The comm_close message.\n     */\n    async commClose(msg) {\n        return await this._remoteKernel.commClose(msg, this.parent);\n    }\n    /**\n     * Send an `input_reply` message.\n     *\n     * @param content - The content of the reply.\n     */\n    async inputReply(content) {\n        return await this._remoteKernel.inputReply(content, this.parent);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL2tlcm5lbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFvRDtBQUNPO0FBQ0E7QUFDNUI7QUFDUztBQUN4QztBQUNBO0FBQ0E7QUFDTyw0QkFBNEIscUVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQkFBUSw4SkFBc0MsQ0FBQztBQUN6RSxrQkFBa0IsU0FBUTtBQUMxQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVCQUF1Qiw2Q0FBSTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWE7QUFDN0I7QUFDQSx3QkFBd0Isd0VBQXFCO0FBQzdDO0FBQ0E7QUFDQSw2REFBNkQsOERBQVc7QUFDeEUsZ0NBQWdDLDhEQUFXLE9BQU8sZ0RBQWE7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRixRQUFRLGNBQWM7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0YsUUFBUSxjQUFjO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLDRCQUE0QjtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BkYXRhbGF5ZXIvanVweXRlcmxpdGUtaXB5a2VybmVsL2xpYi9rZXJuZWwuanM/ODQ0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9taXNlRGVsZWdhdGUgfSBmcm9tICdAbHVtaW5vL2NvcmV1dGlscyc7XG5pbXBvcnQgeyBVUkxFeHQsIFBhZ2VDb25maWcgfSBmcm9tICdAanVweXRlcmxhYi9jb3JldXRpbHMnO1xuaW1wb3J0IHsgQmFzZUtlcm5lbCB9IGZyb20gJ0BkYXRhbGF5ZXIvanVweXRlcmxpdGUta2VybmVsJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICdjb21saW5rJztcbmltcG9ydCB7IFBJUExJVEVfV0hFRUwgfSBmcm9tICcuL19weXBpJztcbi8qKlxuICogQSBrZXJuZWwgdGhhdCBleGVjdXRlcyBQeXRob24gY29kZSB3aXRoIFB5b2RpZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBQeW9saXRlS2VybmVsIGV4dGVuZHMgQmFzZUtlcm5lbCB7XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGUgYSBuZXcgUHlvZGlkZUtlcm5lbFxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGluc3RhbnRpYXRpb24gb3B0aW9ucyBmb3IgYSBuZXcgUHlvZGlkZUtlcm5lbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gbmV3IFByb21pc2VEZWxlZ2F0ZSgpO1xuICAgICAgICB0aGlzLl93b3JrZXIgPSB0aGlzLmluaXRXb3JrZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX3dvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4gdGhpcy5fcHJvY2Vzc1dvcmtlck1lc3NhZ2UoZS5kYXRhKTtcbiAgICAgICAgdGhpcy5fcmVtb3RlS2VybmVsID0gdGhpcy5pbml0UmVtb3RlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9yZWFkeS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHdvcmtlci5cbiAgICAgKlxuICAgICAqICMjIyBOb3RlXG4gICAgICpcbiAgICAgKiBTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IHRoaXMgdHlwb2dyYXBoaWNhbGx5IGFsbW9zdCBfZXhhY3RseV8gZm9yXG4gICAgICogd2VicGFjayB0byBmaW5kIGl0LlxuICAgICAqL1xuICAgIGluaXRXb3JrZXIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IFdvcmtlcihuZXcgVVJMKCcuL2NvbWxpbmsud29ya2VyLmpzJywgaW1wb3J0Lm1ldGEudXJsKSwge1xuICAgICAgICAgICAgdHlwZTogJ21vZHVsZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbml0UmVtb3RlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVtb3RlID0gd3JhcCh0aGlzLl93b3JrZXIpO1xuICAgICAgICBjb25zdCByZW1vdGVPcHRpb25zID0gdGhpcy5pbml0UmVtb3RlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgcmVtb3RlLmluaXRpYWxpemUocmVtb3RlT3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZW1vdGU7XG4gICAgfVxuICAgIGluaXRSZW1vdGVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBweW9kaWRlVXJsIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBpbmRleFVybCA9IHB5b2RpZGVVcmwuc2xpY2UoMCwgcHlvZGlkZVVybC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBQYWdlQ29uZmlnLmdldEJhc2VVcmwoKTtcbiAgICAgICAgLy8gICAgY29uc3QgcHlwaSA9IFVSTEV4dC5qb2luKGJhc2VVcmwsICdidWlsZC9weXBpJyk7XG4gICAgICAgIGNvbnN0IHB5cGkgPSBcImh0dHBzOi8vZGF0YWxheWVyLWFzc2V0cy5zMy51cy13ZXN0LTIuYW1hem9uYXdzLmNvbS9weXBpXCI7XG4gICAgICAgIGNvbnN0IHBpcGxpdGVVcmxzID0gWy4uLihvcHRpb25zLnBpcGxpdGVVcmxzIHx8IFtdKSwgVVJMRXh0LmpvaW4ocHlwaSwgJ2FsbC5qc29uJyldO1xuICAgICAgICBjb25zdCBwaXBsaXRlV2hlZWxVcmwgPSBVUkxFeHQuam9pbihweXBpLCBQSVBMSVRFX1dIRUVMKTtcbiAgICAgICAgY29uc3QgZGlzYWJsZVB5UElGYWxsYmFjayA9ICEhb3B0aW9ucy5kaXNhYmxlUHlQSUZhbGxiYWNrO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFzZVVybCxcbiAgICAgICAgICAgIHB5b2RpZGVVcmwsXG4gICAgICAgICAgICBpbmRleFVybCxcbiAgICAgICAgICAgIHBpcGxpdGVXaGVlbFVybCxcbiAgICAgICAgICAgIHBpcGxpdGVVcmxzLFxuICAgICAgICAgICAgZGlzYWJsZVB5UElGYWxsYmFjayxcbiAgICAgICAgICAgIGxvY2F0aW9uOiB0aGlzLmxvY2F0aW9uLFxuICAgICAgICAgICAgbW91bnREcml2ZTogb3B0aW9ucy5tb3VudERyaXZlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHRoZSBrZXJuZWwuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gbnVsbDtcbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiB0aGUga2VybmVsIGlzIHJlYWR5LlxuICAgICAqL1xuICAgIGdldCByZWFkeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5LnByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYSBtZXNzYWdlIGNvbWluZyBmcm9tIHRoZSBweW9kaWRlIHdlYiB3b3JrZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSB3b3JrZXIgbWVzc2FnZSB0byBwcm9jZXNzLlxuICAgICAqL1xuICAgIF9wcm9jZXNzV29ya2VyTWVzc2FnZShtc2cpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgICBpZiAoIW1zZy50eXBlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnc3RyZWFtJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bmRsZSA9IChfYSA9IG1zZy5idW5kbGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHsgbmFtZTogJ3N0ZG91dCcsIHRleHQ6ICcnIH07XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW0oYnVuZGxlLCBtc2cucGFyZW50SGVhZGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2lucHV0X3JlcXVlc3QnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVuZGxlID0gKF9iID0gbXNnLmNvbnRlbnQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHsgcHJvbXB0OiAnJywgcGFzc3dvcmQ6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFJlcXVlc3QoYnVuZGxlLCBtc2cucGFyZW50SGVhZGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2Rpc3BsYXlfZGF0YSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidW5kbGUgPSAoX2MgPSBtc2cuYnVuZGxlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB7IGRhdGE6IHt9LCBtZXRhZGF0YToge30sIHRyYW5zaWVudDoge30gfTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlEYXRhKGJ1bmRsZSwgbXNnLnBhcmVudEhlYWRlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICd1cGRhdGVfZGlzcGxheV9kYXRhJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bmRsZSA9IChfZCA9IG1zZy5idW5kbGUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHsgZGF0YToge30sIG1ldGFkYXRhOiB7fSwgdHJhbnNpZW50OiB7fSB9O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGlzcGxheURhdGEoYnVuZGxlLCBtc2cucGFyZW50SGVhZGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NsZWFyX291dHB1dCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidW5kbGUgPSAoX2UgPSBtc2cuYnVuZGxlKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB7IHdhaXQ6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck91dHB1dChidW5kbGUsIG1zZy5wYXJlbnRIZWFkZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnZXhlY3V0ZV9yZXN1bHQnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVuZGxlID0gKF9mID0gbXNnLmJ1bmRsZSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogeyBleGVjdXRpb25fY291bnQ6IDAsIGRhdGE6IHt9LCBtZXRhZGF0YToge30gfTtcbiAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hFeGVjdXRlUmVzdWx0KGJ1bmRsZSwgbXNnLnBhcmVudEhlYWRlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdleGVjdXRlX2Vycm9yJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1bmRsZSA9IChfZyA9IG1zZy5idW5kbGUpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IHsgZW5hbWU6ICcnLCBldmFsdWU6ICcnLCB0cmFjZWJhY2s6IFtdIH07XG4gICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoRXhlY3V0ZUVycm9yKGJ1bmRsZSwgbXNnLnBhcmVudEhlYWRlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdjb21tX21zZyc6XG4gICAgICAgICAgICBjYXNlICdjb21tX29wZW4nOlxuICAgICAgICAgICAgY2FzZSAnY29tbV9jbG9zZSc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbW0obXNnLnR5cGUsIG1zZy5jb250ZW50LCBtc2cubWV0YWRhdGEsIG1zZy5idWZmZXJzLCBtc2cucGFyZW50SGVhZGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYSBrZXJuZWxfaW5mb19yZXF1ZXN0IG1lc3NhZ2VcbiAgICAgKi9cbiAgICBhc3luYyBrZXJuZWxJbmZvUmVxdWVzdCgpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHtcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiAncHlvZGlkZScsXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbl92ZXJzaW9uOiAnMC4xLjAnLFxuICAgICAgICAgICAgbGFuZ3VhZ2VfaW5mbzoge1xuICAgICAgICAgICAgICAgIGNvZGVtaXJyb3JfbW9kZToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncHl0aG9uJyxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbGVfZXh0ZW5zaW9uOiAnLnB5JyxcbiAgICAgICAgICAgICAgICBtaW1ldHlwZTogJ3RleHQveC1weXRob24nLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdweXRob24nLFxuICAgICAgICAgICAgICAgIG5iY29udmVydF9leHBvcnRlcjogJ3B5dGhvbicsXG4gICAgICAgICAgICAgICAgcHlnbWVudHNfbGV4ZXI6ICdpcHl0aG9uMycsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzMuOCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdG9jb2xfdmVyc2lvbjogJzUuMycsXG4gICAgICAgICAgICBzdGF0dXM6ICdvaycsXG4gICAgICAgICAgICBiYW5uZXI6ICdQeW9saXRlOiBBIFdlYkFzc2VtYmx5LXBvd2VyZWQgUHl0aG9uIGtlcm5lbCBiYWNrZWQgYnkgUHlvZGlkZScsXG4gICAgICAgICAgICBoZWxwX2xpbmtzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnUHl0aG9uIChXQVNNKSBLZXJuZWwnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3B5b2RpZGUub3JnJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbiBgZXhlY3V0ZV9yZXF1ZXN0YCBtZXNzYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBwYXJlbnQgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBleGVjdXRlUmVxdWVzdChjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX3JlbW90ZUtlcm5lbC5leGVjdXRlKGNvbnRlbnQsIHRoaXMucGFyZW50KTtcbiAgICAgICAgcmVzdWx0LmV4ZWN1dGlvbl9jb3VudCA9IHRoaXMuZXhlY3V0aW9uQ291bnQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbiBjb21wbGV0ZV9yZXF1ZXN0IG1lc3NhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtc2cgVGhlIHBhcmVudCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbXBsZXRlUmVxdWVzdChjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZW1vdGVLZXJuZWwuY29tcGxldGUoY29udGVudCwgdGhpcy5wYXJlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYW4gYGluc3BlY3RfcmVxdWVzdGAgbWVzc2FnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgb2YgdGhlIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXNwb25zZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGluc3BlY3RSZXF1ZXN0KGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlbW90ZUtlcm5lbC5pbnNwZWN0KGNvbnRlbnQsIHRoaXMucGFyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGFuIGBpc19jb21wbGV0ZV9yZXF1ZXN0YCBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29udGVudCBvZiB0aGUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgaXNDb21wbGV0ZVJlcXVlc3QoY29udGVudCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVtb3RlS2VybmVsLmlzQ29tcGxldGUoY29udGVudCwgdGhpcy5wYXJlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYSBgY29tbV9pbmZvX3JlcXVlc3RgIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29udGVudCAtIFRoZSBjb250ZW50IG9mIHRoZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzcG9uc2UgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjb21tSW5mb1JlcXVlc3QoY29udGVudCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVtb3RlS2VybmVsLmNvbW1JbmZvKGNvbnRlbnQsIHRoaXMucGFyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBgY29tbV9vcGVuYCBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1zZyAtIFRoZSBjb21tX29wZW4gbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjb21tT3Blbihtc2cpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlbW90ZUtlcm5lbC5jb21tT3Blbihtc2csIHRoaXMucGFyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBgY29tbV9tc2dgIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIC0gVGhlIGNvbW1fbXNnIG1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgY29tbU1zZyhtc2cpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlbW90ZUtlcm5lbC5jb21tTXNnKG1zZywgdGhpcy5wYXJlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGBjb21tX2Nsb3NlYCBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNsb3NlIC0gVGhlIGNvbW1fY2xvc2UgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjb21tQ2xvc2UobXNnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9yZW1vdGVLZXJuZWwuY29tbUNsb3NlKG1zZywgdGhpcy5wYXJlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGBpbnB1dF9yZXBseWAgbWVzc2FnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgb2YgdGhlIHJlcGx5LlxuICAgICAqL1xuICAgIGFzeW5jIGlucHV0UmVwbHkoY29udGVudCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVtb3RlS2VybmVsLmlucHV0UmVwbHkoY29udGVudCwgdGhpcy5wYXJlbnQpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@datalayer/jupyterlite-ipykernel/lib/kernel.js\n"));

/***/ }),

/***/ "./node_modules/@datalayer/jupyterlite-ipykernel/lib/worker.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@datalayer/jupyterlite-ipykernel/lib/worker.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PyoliteRemoteKernel\": function() { return /* binding */ PyoliteRemoteKernel; }\n/* harmony export */ });\n// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nclass PyoliteRemoteKernel {\n    constructor() {\n        /**\n         * Initialization options.\n         */\n        this._options = null;\n        this._initializer = null;\n        /** TODO: real typing */\n        this._localPath = '';\n        this._driveName = '';\n        this._initialized = new Promise((resolve, reject) => {\n            this._initializer = { resolve, reject };\n        });\n    }\n    /**\n     * Accept the URLs from the host\n     **/\n    async initialize(options) {\n        var _a;\n        this._options = options;\n        if (options.location.includes(':')) {\n            const parts = options.location.split(':');\n            this._driveName = parts[0];\n            this._localPath = parts[1];\n        }\n        else {\n            this._driveName = '';\n            this._localPath = options.location;\n        }\n        await this.initRuntime(options);\n        await this.initPackageManager(options);\n        await this.initKernel(options);\n        await this.initGlobals(options);\n        (_a = this._initializer) === null || _a === void 0 ? void 0 : _a.resolve();\n    }\n    async initRuntime(options) {\n        const { pyodideUrl, indexUrl } = options;\n        if (pyodideUrl.endsWith('.mjs')) {\n            const pyodideModule = await import(/* webpackIgnore: true */ pyodideUrl);\n            this._pyodide = await pyodideModule.loadPyodide({ indexURL: indexUrl });\n        }\n        else {\n            importScripts(pyodideUrl);\n            this._pyodide = await self.loadPyodide({ indexURL: indexUrl });\n        }\n    }\n    async initPackageManager(options) {\n        if (!this._options) {\n            throw new Error('Uninitialized');\n        }\n        const { pipliteWheelUrl, disablePyPIFallback, pipliteUrls } = this._options;\n        // this is the only use of `loadPackage`, allow `piplite` to handle the rest\n        await this._pyodide.loadPackage(['micropip']);\n        // get piplite early enough to impact pyolite dependencies\n        await this._pyodide.runPythonAsync(`\n      import micropip\n      await micropip.install('${pipliteWheelUrl}', keep_going=True)\n      import piplite.piplite\n      piplite.piplite._PIPLITE_DISABLE_PYPI = ${disablePyPIFallback ? 'True' : 'False'}\n      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(pipliteUrls)}\n    `);\n    }\n    async initKernel(options) {\n        // from this point forward, only use piplite\n        await this._pyodide.runPythonAsync(`\n      await piplite.install(['matplotlib', 'ipykernel'], keep_going=True);\n      await piplite.install(['pyolite'], keep_going=True);\n      await piplite.install(['ipython'], keep_going=True);\n      import pyolite\n    `);\n        // cd to the kernel location\n        if (options.mountDrive && this._localPath) {\n            await this._pyodide.runPythonAsync(`\n        import os;\n        os.chdir(\"${this._localPath}\");\n      `);\n        }\n    }\n    async initGlobals(options) {\n        const { globals } = this._pyodide;\n        this._kernel = globals.get('pyolite').kernel_instance.copy();\n        this._stdout_stream = globals.get('pyolite').stdout_stream.copy();\n        this._stderr_stream = globals.get('pyolite').stderr_stream.copy();\n        this._interpreter = this._kernel.interpreter.copy();\n        this._interpreter.send_comm = this.sendComm.bind(this);\n    }\n    /**\n     * Recursively convert a Map to a JavaScript object\n     * @param obj A Map, Array, or other  object to convert\n     */\n    mapToObject(obj) {\n        const out = obj instanceof Array ? [] : {};\n        obj.forEach((value, key) => {\n            out[key] =\n                value instanceof Map || value instanceof Array\n                    ? this.mapToObject(value)\n                    : value;\n        });\n        return out;\n    }\n    /**\n     * Format the response from the Pyodide evaluation.\n     *\n     * @param res The result object from the Pyodide evaluation\n     */\n    formatResult(res) {\n        if (!this._pyodide.isPyProxy(res)) {\n            return res;\n        }\n        // TODO: this is a bit brittle\n        const m = res.toJs();\n        const results = this.mapToObject(m);\n        return results;\n    }\n    /**\n     * Makes sure pyodide is ready before continuing, and cache the parent message.\n     */\n    async setup(parent) {\n        await this._initialized;\n        this._kernel._parent_header = this._pyodide.toPy(parent);\n    }\n    /**\n     * Execute code with the interpreter.\n     *\n     * @param content The incoming message with the code to execute.\n     */\n    async execute(content, parent) {\n        await this.setup(parent);\n        const publishExecutionResult = (prompt_count, data, metadata) => {\n            const bundle = {\n                execution_count: prompt_count,\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'execute_result',\n            });\n        };\n        const publishExecutionError = (ename, evalue, traceback) => {\n            const bundle = {\n                ename: ename,\n                evalue: evalue,\n                traceback: traceback,\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'execute_error',\n            });\n        };\n        const clearOutputCallback = (wait) => {\n            const bundle = {\n                wait: this.formatResult(wait),\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'clear_output',\n            });\n        };\n        const displayDataCallback = (data, metadata, transient) => {\n            const bundle = {\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n                transient: this.formatResult(transient),\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'display_data',\n            });\n        };\n        const updateDisplayDataCallback = (data, metadata, transient) => {\n            const bundle = {\n                data: this.formatResult(data),\n                metadata: this.formatResult(metadata),\n                transient: this.formatResult(transient),\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'update_display_data',\n            });\n        };\n        const publishStreamCallback = (name, text) => {\n            const bundle = {\n                name: this.formatResult(name),\n                text: this.formatResult(text),\n            };\n            postMessage({\n                parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n                bundle,\n                type: 'stream',\n            });\n        };\n        this._stdout_stream.publish_stream_callback = publishStreamCallback;\n        this._stderr_stream.publish_stream_callback = publishStreamCallback;\n        this._interpreter.display_pub.clear_output_callback = clearOutputCallback;\n        this._interpreter.display_pub.display_data_callback = displayDataCallback;\n        this._interpreter.display_pub.update_display_data_callback =\n            updateDisplayDataCallback;\n        this._interpreter.displayhook.publish_execution_result = publishExecutionResult;\n        this._interpreter.input = this.input.bind(this);\n        this._interpreter.getpass = this.getpass.bind(this);\n        const res = await this._kernel.run(content.code);\n        const results = this.formatResult(res);\n        if (results['status'] === 'error') {\n            publishExecutionError(results['ename'], results['evalue'], results['traceback']);\n        }\n        return results;\n    }\n    /**\n     * Complete the code submitted by a user.\n     *\n     * @param content The incoming message with the code to complete.\n     */\n    async complete(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.complete(content.code, content.cursor_pos);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Inspect the code submitted by a user.\n     *\n     * @param content The incoming message with the code to inspect.\n     */\n    async inspect(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.inspect(content.code, content.cursor_pos, content.detail_level);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Check code for completeness submitted by a user.\n     *\n     * @param content The incoming message with the code to check.\n     */\n    async isComplete(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.is_complete(content.code);\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commInfoRequest.\n     *\n     * @param content The incoming message with the comm target name.\n     */\n    async commInfo(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_info(content.target_name);\n        const results = this.formatResult(res);\n        return {\n            comms: results,\n            status: 'ok',\n        };\n    }\n    /**\n     * Respond to the commOpen.\n     *\n     * @param content The incoming message with the comm open.\n     */\n    async commOpen(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_open(this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commMsg.\n     *\n     * @param content The incoming message with the comm msg.\n     */\n    async commMsg(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_msg(this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Respond to the commClose.\n     *\n     * @param content The incoming message with the comm close.\n     */\n    async commClose(content, parent) {\n        await this.setup(parent);\n        const res = this._kernel.comm_manager.comm_close(this._pyodide.toPy(content));\n        const results = this.formatResult(res);\n        return results;\n    }\n    /**\n     * Resolve the input request by getting back the reply from the main thread\n     *\n     * @param content The incoming message with the reply\n     */\n    async inputReply(content, parent) {\n        await this.setup(parent);\n        this._resolveInputReply(content);\n    }\n    /**\n     * Send a input request to the front-end.\n     *\n     * @param prompt the text to show at the prompt\n     * @param password Is the request for a password?\n     */\n    async sendInputRequest(prompt, password) {\n        const content = {\n            prompt,\n            password,\n        };\n        postMessage({\n            type: 'input_request',\n            parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n            content,\n        });\n    }\n    async getpass(prompt) {\n        prompt = typeof prompt === 'undefined' ? '' : prompt;\n        await this.sendInputRequest(prompt, true);\n        const replyPromise = new Promise((resolve) => {\n            this._resolveInputReply = resolve;\n        });\n        const result = await replyPromise;\n        return result['value'];\n    }\n    async input(prompt) {\n        prompt = typeof prompt === 'undefined' ? '' : prompt;\n        await this.sendInputRequest(prompt, false);\n        const replyPromise = new Promise((resolve) => {\n            this._resolveInputReply = resolve;\n        });\n        const result = await replyPromise;\n        return result['value'];\n    }\n    /**\n     * Send a comm message to the front-end.\n     *\n     * @param type The type of the comm message.\n     * @param content The content.\n     * @param metadata The metadata.\n     * @param ident The ident.\n     * @param buffers The binary buffers.\n     */\n    async sendComm(type, content, metadata, ident, buffers) {\n        postMessage({\n            type: type,\n            content: this.formatResult(content),\n            metadata: this.formatResult(metadata),\n            ident: this.formatResult(ident),\n            buffers: this.formatResult(buffers),\n            parentHeader: this.formatResult(this._kernel._parent_header)['header'],\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1pcHlrZXJuZWwvbGliL3dvcmtlci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDO0FBQ0E7QUFDQSw4REFBOEQsb0JBQW9CO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxvQkFBb0I7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFvRDtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBLGdEQUFnRDtBQUNoRCx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BkYXRhbGF5ZXIvanVweXRlcmxpdGUtaXB5a2VybmVsL2xpYi93b3JrZXIuanM/YWE1YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIEp1cHl0ZXIgRGV2ZWxvcG1lbnQgVGVhbS5cbi8vIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTW9kaWZpZWQgQlNEIExpY2Vuc2UuXG5leHBvcnQgY2xhc3MgUHlvbGl0ZVJlbW90ZUtlcm5lbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXphdGlvbiBvcHRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVyID0gbnVsbDtcbiAgICAgICAgLyoqIFRPRE86IHJlYWwgdHlwaW5nICovXG4gICAgICAgIHRoaXMuX2xvY2FsUGF0aCA9ICcnO1xuICAgICAgICB0aGlzLl9kcml2ZU5hbWUgPSAnJztcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplciA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY2NlcHQgdGhlIFVSTHMgZnJvbSB0aGUgaG9zdFxuICAgICAqKi9cbiAgICBhc3luYyBpbml0aWFsaXplKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKG9wdGlvbnMubG9jYXRpb24uaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBvcHRpb25zLmxvY2F0aW9uLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICB0aGlzLl9kcml2ZU5hbWUgPSBwYXJ0c1swXTtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsUGF0aCA9IHBhcnRzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZHJpdmVOYW1lID0gJyc7XG4gICAgICAgICAgICB0aGlzLl9sb2NhbFBhdGggPSBvcHRpb25zLmxvY2F0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFJ1bnRpbWUob3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFBhY2thZ2VNYW5hZ2VyKG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRLZXJuZWwob3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdEdsb2JhbHMob3B0aW9ucyk7XG4gICAgICAgIChfYSA9IHRoaXMuX2luaXRpYWxpemVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBpbml0UnVudGltZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcHlvZGlkZVVybCwgaW5kZXhVcmwgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChweW9kaWRlVXJsLmVuZHNXaXRoKCcubWpzJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHB5b2RpZGVNb2R1bGUgPSBhd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZTogdHJ1ZSAqLyBweW9kaWRlVXJsKTtcbiAgICAgICAgICAgIHRoaXMuX3B5b2RpZGUgPSBhd2FpdCBweW9kaWRlTW9kdWxlLmxvYWRQeW9kaWRlKHsgaW5kZXhVUkw6IGluZGV4VXJsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW1wb3J0U2NyaXB0cyhweW9kaWRlVXJsKTtcbiAgICAgICAgICAgIHRoaXMuX3B5b2RpZGUgPSBhd2FpdCBzZWxmLmxvYWRQeW9kaWRlKHsgaW5kZXhVUkw6IGluZGV4VXJsIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGluaXRQYWNrYWdlTWFuYWdlcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5fb3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmluaXRpYWxpemVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBwaXBsaXRlV2hlZWxVcmwsIGRpc2FibGVQeVBJRmFsbGJhY2ssIHBpcGxpdGVVcmxzIH0gPSB0aGlzLl9vcHRpb25zO1xuICAgICAgICAvLyB0aGlzIGlzIHRoZSBvbmx5IHVzZSBvZiBgbG9hZFBhY2thZ2VgLCBhbGxvdyBgcGlwbGl0ZWAgdG8gaGFuZGxlIHRoZSByZXN0XG4gICAgICAgIGF3YWl0IHRoaXMuX3B5b2RpZGUubG9hZFBhY2thZ2UoWydtaWNyb3BpcCddKTtcbiAgICAgICAgLy8gZ2V0IHBpcGxpdGUgZWFybHkgZW5vdWdoIHRvIGltcGFjdCBweW9saXRlIGRlcGVuZGVuY2llc1xuICAgICAgICBhd2FpdCB0aGlzLl9weW9kaWRlLnJ1blB5dGhvbkFzeW5jKGBcbiAgICAgIGltcG9ydCBtaWNyb3BpcFxuICAgICAgYXdhaXQgbWljcm9waXAuaW5zdGFsbCgnJHtwaXBsaXRlV2hlZWxVcmx9Jywga2VlcF9nb2luZz1UcnVlKVxuICAgICAgaW1wb3J0IHBpcGxpdGUucGlwbGl0ZVxuICAgICAgcGlwbGl0ZS5waXBsaXRlLl9QSVBMSVRFX0RJU0FCTEVfUFlQSSA9ICR7ZGlzYWJsZVB5UElGYWxsYmFjayA/ICdUcnVlJyA6ICdGYWxzZSd9XG4gICAgICBwaXBsaXRlLnBpcGxpdGUuX1BJUExJVEVfVVJMUyA9ICR7SlNPTi5zdHJpbmdpZnkocGlwbGl0ZVVybHMpfVxuICAgIGApO1xuICAgIH1cbiAgICBhc3luYyBpbml0S2VybmVsKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gZnJvbSB0aGlzIHBvaW50IGZvcndhcmQsIG9ubHkgdXNlIHBpcGxpdGVcbiAgICAgICAgYXdhaXQgdGhpcy5fcHlvZGlkZS5ydW5QeXRob25Bc3luYyhgXG4gICAgICBhd2FpdCBwaXBsaXRlLmluc3RhbGwoWydtYXRwbG90bGliJywgJ2lweWtlcm5lbCddLCBrZWVwX2dvaW5nPVRydWUpO1xuICAgICAgYXdhaXQgcGlwbGl0ZS5pbnN0YWxsKFsncHlvbGl0ZSddLCBrZWVwX2dvaW5nPVRydWUpO1xuICAgICAgYXdhaXQgcGlwbGl0ZS5pbnN0YWxsKFsnaXB5dGhvbiddLCBrZWVwX2dvaW5nPVRydWUpO1xuICAgICAgaW1wb3J0IHB5b2xpdGVcbiAgICBgKTtcbiAgICAgICAgLy8gY2QgdG8gdGhlIGtlcm5lbCBsb2NhdGlvblxuICAgICAgICBpZiAob3B0aW9ucy5tb3VudERyaXZlICYmIHRoaXMuX2xvY2FsUGF0aCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHlvZGlkZS5ydW5QeXRob25Bc3luYyhgXG4gICAgICAgIGltcG9ydCBvcztcbiAgICAgICAgb3MuY2hkaXIoXCIke3RoaXMuX2xvY2FsUGF0aH1cIik7XG4gICAgICBgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbml0R2xvYmFscyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgZ2xvYmFscyB9ID0gdGhpcy5fcHlvZGlkZTtcbiAgICAgICAgdGhpcy5fa2VybmVsID0gZ2xvYmFscy5nZXQoJ3B5b2xpdGUnKS5rZXJuZWxfaW5zdGFuY2UuY29weSgpO1xuICAgICAgICB0aGlzLl9zdGRvdXRfc3RyZWFtID0gZ2xvYmFscy5nZXQoJ3B5b2xpdGUnKS5zdGRvdXRfc3RyZWFtLmNvcHkoKTtcbiAgICAgICAgdGhpcy5fc3RkZXJyX3N0cmVhbSA9IGdsb2JhbHMuZ2V0KCdweW9saXRlJykuc3RkZXJyX3N0cmVhbS5jb3B5KCk7XG4gICAgICAgIHRoaXMuX2ludGVycHJldGVyID0gdGhpcy5fa2VybmVsLmludGVycHJldGVyLmNvcHkoKTtcbiAgICAgICAgdGhpcy5faW50ZXJwcmV0ZXIuc2VuZF9jb21tID0gdGhpcy5zZW5kQ29tbS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBjb252ZXJ0IGEgTWFwIHRvIGEgSmF2YVNjcmlwdCBvYmplY3RcbiAgICAgKiBAcGFyYW0gb2JqIEEgTWFwLCBBcnJheSwgb3Igb3RoZXIgIG9iamVjdCB0byBjb252ZXJ0XG4gICAgICovXG4gICAgbWFwVG9PYmplY3Qob2JqKSB7XG4gICAgICAgIGNvbnN0IG91dCA9IG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gW10gOiB7fTtcbiAgICAgICAgb2JqLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICAgIG91dFtrZXldID1cbiAgICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIE1hcCB8fCB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5XG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5tYXBUb09iamVjdCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgUHlvZGlkZSBldmFsdWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcyBUaGUgcmVzdWx0IG9iamVjdCBmcm9tIHRoZSBQeW9kaWRlIGV2YWx1YXRpb25cbiAgICAgKi9cbiAgICBmb3JtYXRSZXN1bHQocmVzKSB7XG4gICAgICAgIGlmICghdGhpcy5fcHlvZGlkZS5pc1B5UHJveHkocmVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIGEgYml0IGJyaXR0bGVcbiAgICAgICAgY29uc3QgbSA9IHJlcy50b0pzKCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLm1hcFRvT2JqZWN0KG0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgc3VyZSBweW9kaWRlIGlzIHJlYWR5IGJlZm9yZSBjb250aW51aW5nLCBhbmQgY2FjaGUgdGhlIHBhcmVudCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIHNldHVwKHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLl9pbml0aWFsaXplZDtcbiAgICAgICAgdGhpcy5fa2VybmVsLl9wYXJlbnRfaGVhZGVyID0gdGhpcy5fcHlvZGlkZS50b1B5KHBhcmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgY29kZSB3aXRoIHRoZSBpbnRlcnByZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBpbmNvbWluZyBtZXNzYWdlIHdpdGggdGhlIGNvZGUgdG8gZXhlY3V0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBleGVjdXRlKGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHB1Ymxpc2hFeGVjdXRpb25SZXN1bHQgPSAocHJvbXB0X2NvdW50LCBkYXRhLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVuZGxlID0ge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9jb3VudDogcHJvbXB0X2NvdW50LFxuICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZm9ybWF0UmVzdWx0KGRhdGEpLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLmZvcm1hdFJlc3VsdChtZXRhZGF0YSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHBhcmVudEhlYWRlcjogdGhpcy5mb3JtYXRSZXN1bHQodGhpcy5fa2VybmVsLl9wYXJlbnRfaGVhZGVyKVsnaGVhZGVyJ10sXG4gICAgICAgICAgICAgICAgYnVuZGxlLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdleGVjdXRlX3Jlc3VsdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHVibGlzaEV4ZWN1dGlvbkVycm9yID0gKGVuYW1lLCBldmFsdWUsIHRyYWNlYmFjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVuZGxlID0ge1xuICAgICAgICAgICAgICAgIGVuYW1lOiBlbmFtZSxcbiAgICAgICAgICAgICAgICBldmFsdWU6IGV2YWx1ZSxcbiAgICAgICAgICAgICAgICB0cmFjZWJhY2s6IHRyYWNlYmFjayxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgcGFyZW50SGVhZGVyOiB0aGlzLmZvcm1hdFJlc3VsdCh0aGlzLl9rZXJuZWwuX3BhcmVudF9oZWFkZXIpWydoZWFkZXInXSxcbiAgICAgICAgICAgICAgICBidW5kbGUsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2V4ZWN1dGVfZXJyb3InLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNsZWFyT3V0cHV0Q2FsbGJhY2sgPSAod2FpdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVuZGxlID0ge1xuICAgICAgICAgICAgICAgIHdhaXQ6IHRoaXMuZm9ybWF0UmVzdWx0KHdhaXQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHRoaXMuZm9ybWF0UmVzdWx0KHRoaXMuX2tlcm5lbC5fcGFyZW50X2hlYWRlcilbJ2hlYWRlciddLFxuICAgICAgICAgICAgICAgIGJ1bmRsZSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2xlYXJfb3V0cHV0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkaXNwbGF5RGF0YUNhbGxiYWNrID0gKGRhdGEsIG1ldGFkYXRhLCB0cmFuc2llbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1bmRsZSA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmZvcm1hdFJlc3VsdChkYXRhKSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5mb3JtYXRSZXN1bHQobWV0YWRhdGEpLFxuICAgICAgICAgICAgICAgIHRyYW5zaWVudDogdGhpcy5mb3JtYXRSZXN1bHQodHJhbnNpZW50KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgcGFyZW50SGVhZGVyOiB0aGlzLmZvcm1hdFJlc3VsdCh0aGlzLl9rZXJuZWwuX3BhcmVudF9oZWFkZXIpWydoZWFkZXInXSxcbiAgICAgICAgICAgICAgICBidW5kbGUsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Rpc3BsYXlfZGF0YScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdXBkYXRlRGlzcGxheURhdGFDYWxsYmFjayA9IChkYXRhLCBtZXRhZGF0YSwgdHJhbnNpZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidW5kbGUgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5mb3JtYXRSZXN1bHQoZGF0YSksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuZm9ybWF0UmVzdWx0KG1ldGFkYXRhKSxcbiAgICAgICAgICAgICAgICB0cmFuc2llbnQ6IHRoaXMuZm9ybWF0UmVzdWx0KHRyYW5zaWVudCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHBhcmVudEhlYWRlcjogdGhpcy5mb3JtYXRSZXN1bHQodGhpcy5fa2VybmVsLl9wYXJlbnRfaGVhZGVyKVsnaGVhZGVyJ10sXG4gICAgICAgICAgICAgICAgYnVuZGxlLFxuICAgICAgICAgICAgICAgIHR5cGU6ICd1cGRhdGVfZGlzcGxheV9kYXRhJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwdWJsaXNoU3RyZWFtQ2FsbGJhY2sgPSAobmFtZSwgdGV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVuZGxlID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZm9ybWF0UmVzdWx0KG5hbWUpLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZm9ybWF0UmVzdWx0KHRleHQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHRoaXMuZm9ybWF0UmVzdWx0KHRoaXMuX2tlcm5lbC5fcGFyZW50X2hlYWRlcilbJ2hlYWRlciddLFxuICAgICAgICAgICAgICAgIGJ1bmRsZSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyZWFtJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGRvdXRfc3RyZWFtLnB1Ymxpc2hfc3RyZWFtX2NhbGxiYWNrID0gcHVibGlzaFN0cmVhbUNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9zdGRlcnJfc3RyZWFtLnB1Ymxpc2hfc3RyZWFtX2NhbGxiYWNrID0gcHVibGlzaFN0cmVhbUNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9pbnRlcnByZXRlci5kaXNwbGF5X3B1Yi5jbGVhcl9vdXRwdXRfY2FsbGJhY2sgPSBjbGVhck91dHB1dENhbGxiYWNrO1xuICAgICAgICB0aGlzLl9pbnRlcnByZXRlci5kaXNwbGF5X3B1Yi5kaXNwbGF5X2RhdGFfY2FsbGJhY2sgPSBkaXNwbGF5RGF0YUNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9pbnRlcnByZXRlci5kaXNwbGF5X3B1Yi51cGRhdGVfZGlzcGxheV9kYXRhX2NhbGxiYWNrID1cbiAgICAgICAgICAgIHVwZGF0ZURpc3BsYXlEYXRhQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMuX2ludGVycHJldGVyLmRpc3BsYXlob29rLnB1Ymxpc2hfZXhlY3V0aW9uX3Jlc3VsdCA9IHB1Ymxpc2hFeGVjdXRpb25SZXN1bHQ7XG4gICAgICAgIHRoaXMuX2ludGVycHJldGVyLmlucHV0ID0gdGhpcy5pbnB1dC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9pbnRlcnByZXRlci5nZXRwYXNzID0gdGhpcy5nZXRwYXNzLmJpbmQodGhpcyk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX2tlcm5lbC5ydW4oY29udGVudC5jb2RlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZm9ybWF0UmVzdWx0KHJlcyk7XG4gICAgICAgIGlmIChyZXN1bHRzWydzdGF0dXMnXSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgcHVibGlzaEV4ZWN1dGlvbkVycm9yKHJlc3VsdHNbJ2VuYW1lJ10sIHJlc3VsdHNbJ2V2YWx1ZSddLCByZXN1bHRzWyd0cmFjZWJhY2snXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBsZXRlIHRoZSBjb2RlIHN1Ym1pdHRlZCBieSBhIHVzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgaW5jb21pbmcgbWVzc2FnZSB3aXRoIHRoZSBjb2RlIHRvIGNvbXBsZXRlLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbXBsZXRlKGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX2tlcm5lbC5jb21wbGV0ZShjb250ZW50LmNvZGUsIGNvbnRlbnQuY3Vyc29yX3Bvcyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLmZvcm1hdFJlc3VsdChyZXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zcGVjdCB0aGUgY29kZSBzdWJtaXR0ZWQgYnkgYSB1c2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGluY29taW5nIG1lc3NhZ2Ugd2l0aCB0aGUgY29kZSB0byBpbnNwZWN0LlxuICAgICAqL1xuICAgIGFzeW5jIGluc3BlY3QoY29udGVudCwgcGFyZW50KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dXAocGFyZW50KTtcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy5fa2VybmVsLmluc3BlY3QoY29udGVudC5jb2RlLCBjb250ZW50LmN1cnNvcl9wb3MsIGNvbnRlbnQuZGV0YWlsX2xldmVsKTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZm9ybWF0UmVzdWx0KHJlcyk7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBjb2RlIGZvciBjb21wbGV0ZW5lc3Mgc3VibWl0dGVkIGJ5IGEgdXNlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBpbmNvbWluZyBtZXNzYWdlIHdpdGggdGhlIGNvZGUgdG8gY2hlY2suXG4gICAgICovXG4gICAgYXN5bmMgaXNDb21wbGV0ZShjb250ZW50LCBwYXJlbnQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXR1cChwYXJlbnQpO1xuICAgICAgICBjb25zdCByZXMgPSB0aGlzLl9rZXJuZWwuaXNfY29tcGxldGUoY29udGVudC5jb2RlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZm9ybWF0UmVzdWx0KHJlcyk7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNwb25kIHRvIHRoZSBjb21tSW5mb1JlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgaW5jb21pbmcgbWVzc2FnZSB3aXRoIHRoZSBjb21tIHRhcmdldCBuYW1lLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1JbmZvKGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX2tlcm5lbC5jb21tX2luZm8oY29udGVudC50YXJnZXRfbmFtZSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLmZvcm1hdFJlc3VsdChyZXMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tbXM6IHJlc3VsdHMsXG4gICAgICAgICAgICBzdGF0dXM6ICdvaycsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3BvbmQgdG8gdGhlIGNvbW1PcGVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGluY29taW5nIG1lc3NhZ2Ugd2l0aCB0aGUgY29tbSBvcGVuLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1PcGVuKGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX2tlcm5lbC5jb21tX21hbmFnZXIuY29tbV9vcGVuKHRoaXMuX3B5b2RpZGUudG9QeShjb250ZW50KSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLmZvcm1hdFJlc3VsdChyZXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzcG9uZCB0byB0aGUgY29tbU1zZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBpbmNvbWluZyBtZXNzYWdlIHdpdGggdGhlIGNvbW0gbXNnLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1Nc2coY29udGVudCwgcGFyZW50KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dXAocGFyZW50KTtcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy5fa2VybmVsLmNvbW1fbWFuYWdlci5jb21tX21zZyh0aGlzLl9weW9kaWRlLnRvUHkoY29udGVudCkpO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5mb3JtYXRSZXN1bHQocmVzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3BvbmQgdG8gdGhlIGNvbW1DbG9zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBpbmNvbWluZyBtZXNzYWdlIHdpdGggdGhlIGNvbW0gY2xvc2UuXG4gICAgICovXG4gICAgYXN5bmMgY29tbUNsb3NlKGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuX2tlcm5lbC5jb21tX21hbmFnZXIuY29tbV9jbG9zZSh0aGlzLl9weW9kaWRlLnRvUHkoY29udGVudCkpO1xuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5mb3JtYXRSZXN1bHQocmVzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc29sdmUgdGhlIGlucHV0IHJlcXVlc3QgYnkgZ2V0dGluZyBiYWNrIHRoZSByZXBseSBmcm9tIHRoZSBtYWluIHRocmVhZFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGluY29taW5nIG1lc3NhZ2Ugd2l0aCB0aGUgcmVwbHlcbiAgICAgKi9cbiAgICBhc3luYyBpbnB1dFJlcGx5KGNvbnRlbnQsIHBhcmVudCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwKHBhcmVudCk7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVJbnB1dFJlcGx5KGNvbnRlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgaW5wdXQgcmVxdWVzdCB0byB0aGUgZnJvbnQtZW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb21wdCB0aGUgdGV4dCB0byBzaG93IGF0IHRoZSBwcm9tcHRcbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgSXMgdGhlIHJlcXVlc3QgZm9yIGEgcGFzc3dvcmQ/XG4gICAgICovXG4gICAgYXN5bmMgc2VuZElucHV0UmVxdWVzdChwcm9tcHQsIHBhc3N3b3JkKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICBwcm9tcHQsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgfTtcbiAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X3JlcXVlc3QnLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiB0aGlzLmZvcm1hdFJlc3VsdCh0aGlzLl9rZXJuZWwuX3BhcmVudF9oZWFkZXIpWydoZWFkZXInXSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRwYXNzKHByb21wdCkge1xuICAgICAgICBwcm9tcHQgPSB0eXBlb2YgcHJvbXB0ID09PSAndW5kZWZpbmVkJyA/ICcnIDogcHJvbXB0O1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRJbnB1dFJlcXVlc3QocHJvbXB0LCB0cnVlKTtcbiAgICAgICAgY29uc3QgcmVwbHlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVJbnB1dFJlcGx5ID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcGx5UHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFsndmFsdWUnXTtcbiAgICB9XG4gICAgYXN5bmMgaW5wdXQocHJvbXB0KSB7XG4gICAgICAgIHByb21wdCA9IHR5cGVvZiBwcm9tcHQgPT09ICd1bmRlZmluZWQnID8gJycgOiBwcm9tcHQ7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZElucHV0UmVxdWVzdChwcm9tcHQsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgcmVwbHlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVJbnB1dFJlcGx5ID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcGx5UHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFsndmFsdWUnXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNvbW0gbWVzc2FnZSB0byB0aGUgZnJvbnQtZW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGNvbW0gbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgY29udGVudC5cbiAgICAgKiBAcGFyYW0gbWV0YWRhdGEgVGhlIG1ldGFkYXRhLlxuICAgICAqIEBwYXJhbSBpZGVudCBUaGUgaWRlbnQuXG4gICAgICogQHBhcmFtIGJ1ZmZlcnMgVGhlIGJpbmFyeSBidWZmZXJzLlxuICAgICAqL1xuICAgIGFzeW5jIHNlbmRDb21tKHR5cGUsIGNvbnRlbnQsIG1ldGFkYXRhLCBpZGVudCwgYnVmZmVycykge1xuICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5mb3JtYXRSZXN1bHQoY29udGVudCksXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5mb3JtYXRSZXN1bHQobWV0YWRhdGEpLFxuICAgICAgICAgICAgaWRlbnQ6IHRoaXMuZm9ybWF0UmVzdWx0KGlkZW50KSxcbiAgICAgICAgICAgIGJ1ZmZlcnM6IHRoaXMuZm9ybWF0UmVzdWx0KGJ1ZmZlcnMpLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiB0aGlzLmZvcm1hdFJlc3VsdCh0aGlzLl9rZXJuZWwuX3BhcmVudF9oZWFkZXIpWydoZWFkZXInXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@datalayer/jupyterlite-ipykernel/lib/worker.js\n"));

/***/ }),

/***/ "./node_modules/@datalayer/jupyterlite-kernel/lib/kernel.js":
/*!******************************************************************!*\
  !*** ./node_modules/@datalayer/jupyterlite-kernel/lib/kernel.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BaseKernel\": function() { return /* binding */ BaseKernel; }\n/* harmony export */ });\n/* harmony import */ var _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/services */ \"./node_modules/@jupyterlab/services/lib/index.js\");\n/* harmony import */ var _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lumino_signaling__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lumino/signaling */ \"./node_modules/@lumino/signaling/dist/index.es6.js\");\n\n\n/**\n * A base kernel class handling basic kernel messaging.\n */\nclass BaseKernel {\n    /**\n     * Construct a new BaseKernel.\n     *\n     * @param options The instantiation options for a BaseKernel.\n     */\n    constructor(options) {\n        this._history = [];\n        this._executionCount = 0;\n        this._isDisposed = false;\n        this._disposed = new _lumino_signaling__WEBPACK_IMPORTED_MODULE_1__.Signal(this);\n        this._parentHeader = undefined;\n        this._parent = undefined;\n        const { id, name, location, sendMessage } = options;\n        this._id = id;\n        this._name = name;\n        this._location = location;\n        this._sendMessage = sendMessage;\n    }\n    /**\n     * A promise that is fulfilled when the kernel is ready.\n     */\n    get ready() {\n        return Promise.resolve();\n    }\n    /**\n     * Return whether the kernel is disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * A signal emitted when the kernel is disposed.\n     */\n    get disposed() {\n        return this._disposed;\n    }\n    /**\n     * Get the kernel id\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Get the name of the kernel\n     */\n    get name() {\n        return this._name;\n    }\n    /**\n     * The location in the virtual filesystem from which the kernel was started.\n     */\n    get location() {\n        return this._location;\n    }\n    /**\n     * The current execution count\n     */\n    get executionCount() {\n        return this._executionCount;\n    }\n    /**\n     * Get the last parent header\n     */\n    get parentHeader() {\n        return this._parentHeader;\n    }\n    /**\n     * Get the last parent message (mimic ipykernel's get_parent)\n     */\n    get parent() {\n        return this._parent;\n    }\n    /**\n     * Dispose the kernel.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        this._disposed.emit(void 0);\n    }\n    /**\n     * Handle an incoming message from the client.\n     *\n     * @param msg The message to handle\n     */\n    async handleMessage(msg) {\n        this._busy(msg);\n        this._parent = msg;\n        const msgType = msg.header.msg_type;\n        switch (msgType) {\n            case 'kernel_info_request':\n                await this._kernelInfo(msg);\n                break;\n            case 'execute_request':\n                await this._execute(msg);\n                break;\n            case 'input_reply':\n                this.inputReply(msg.content);\n                break;\n            case 'inspect_request':\n                await this._inspect(msg);\n                break;\n            case 'is_complete_request':\n                await this._isCompleteRequest(msg);\n                break;\n            case 'complete_request':\n                await this._complete(msg);\n                break;\n            case 'history_request':\n                await this._historyRequest(msg);\n                break;\n            case 'comm_open':\n                await this.commOpen(msg);\n                break;\n            case 'comm_msg':\n                await this.commMsg(msg);\n                break;\n            case 'comm_close':\n                await this.commClose(msg);\n                break;\n            default:\n                break;\n        }\n        this._idle(msg);\n    }\n    /**\n     * Stream an event from the kernel\n     *\n     * @param parentHeader The parent header.\n     * @param content The stream content.\n     */\n    stream(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'stream',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a `display_data` message to the client.\n     *\n     * @param parentHeader The parent header.\n     * @param content The display_data content.\n     */\n    displayData(content, parentHeader = undefined) {\n        var _a, _b;\n        // Make sure metadata is always set\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        content.metadata = (_a = content.metadata) !== null && _a !== void 0 ? _a : {};\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'display_data',\n            // TODO: better handle this\n            session: (_b = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _b !== void 0 ? _b : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a `input_request` message to the client.\n     *\n     * @param parentHeader The parent header.\n     * @param content The input_request content.\n     */\n    inputRequest(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'stdin',\n            msgType: 'input_request',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send an `execute_result` message.\n     *\n     * @param parentHeader The parent header.\n     * @param content The execute result content.\n     */\n    publishExecuteResult(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'execute_result',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send an `error` message to the client.\n     *\n     * @param parentHeader The parent header.\n     * @param content The error content.\n     */\n    publishExecuteError(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'error',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a `update_display_data` message to the client.\n     *\n     * @param parentHeader The parent header.\n     * @param content The update_display_data content.\n     */\n    updateDisplayData(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'update_display_data',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a `clear_output` message to the client.\n     *\n     * @param parentHeader The parent header.\n     * @param content The clear_output content.\n     */\n    clearOutput(content, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: 'clear_output',\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a `comm` message to the client.\n     *\n     * @param .\n     */\n    handleComm(type, content, metadata, buffers, parentHeader = undefined) {\n        var _a;\n        const parentHeaderValue = typeof parentHeader !== 'undefined' ? parentHeader : this._parentHeader;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            channel: 'iopub',\n            msgType: type,\n            // TODO: better handle this\n            session: (_a = parentHeaderValue === null || parentHeaderValue === void 0 ? void 0 : parentHeaderValue.session) !== null && _a !== void 0 ? _a : '',\n            parentHeader: parentHeaderValue,\n            content,\n            metadata,\n            buffers,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send an 'idle' status message.\n     *\n     * @param parent The parent message\n     */\n    _idle(parent) {\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'status',\n            session: parent.header.session,\n            parentHeader: parent.header,\n            channel: 'iopub',\n            content: {\n                execution_state: 'idle',\n            },\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send a 'busy' status message.\n     *\n     * @param parent The parent message.\n     */\n    _busy(parent) {\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'status',\n            session: parent.header.session,\n            parentHeader: parent.header,\n            channel: 'iopub',\n            content: {\n                execution_state: 'busy',\n            },\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle a kernel_info_request message\n     *\n     * @param parent The parent message.\n     */\n    async _kernelInfo(parent) {\n        const content = await this.kernelInfoRequest();\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'kernel_info_reply',\n            channel: 'shell',\n            session: parent.header.session,\n            parentHeader: parent.header,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle a `history_request` message\n     *\n     * @param msg The parent message.\n     */\n    async _historyRequest(msg) {\n        const historyMsg = msg;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'history_reply',\n            channel: 'shell',\n            parentHeader: historyMsg.header,\n            session: msg.header.session,\n            content: {\n                status: 'ok',\n                history: this._history,\n            },\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Send an `execute_input` message.\n     *\n     * @param msg The parent message.\n     */\n    _executeInput(msg) {\n        const parent = msg;\n        const code = parent.content.code;\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'execute_input',\n            parentHeader: parent.header,\n            channel: 'iopub',\n            session: msg.header.session,\n            content: {\n                code,\n                execution_count: this._executionCount,\n            },\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle an execute_request message.\n     *\n     * @param msg The parent message.\n     */\n    async _execute(msg) {\n        const executeMsg = msg;\n        const content = executeMsg.content;\n        if (content.store_history) {\n            this._executionCount++;\n        }\n        // TODO: handle differently\n        this._parentHeader = executeMsg.header;\n        this._executeInput(executeMsg);\n        if (content.store_history) {\n            this._history.push([0, 0, content.code]);\n        }\n        const reply = await this.executeRequest(executeMsg.content);\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'execute_reply',\n            channel: 'shell',\n            parentHeader: executeMsg.header,\n            session: msg.header.session,\n            content: reply,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle an complete_request message\n     *\n     * @param msg The parent message.\n     */\n    async _complete(msg) {\n        const completeMsg = msg;\n        const content = await this.completeRequest(completeMsg.content);\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'complete_reply',\n            parentHeader: completeMsg.header,\n            channel: 'shell',\n            session: msg.header.session,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle an inspect_request message\n     *\n     * @param msg The parent message.\n     */\n    async _inspect(msg) {\n        const inspectMsg = msg;\n        const content = await this.inspectRequest(inspectMsg.content);\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'inspect_reply',\n            parentHeader: inspectMsg.header,\n            channel: 'shell',\n            session: msg.header.session,\n            content,\n        });\n        this._sendMessage(message);\n    }\n    /**\n     * Handle an is_complete_request message\n     *\n     * @param msg The parent message.\n     */\n    async _isCompleteRequest(msg) {\n        const isCompleteMsg = msg;\n        const content = await this.isCompleteRequest(isCompleteMsg.content);\n        const message = _jupyterlab_services__WEBPACK_IMPORTED_MODULE_0__.KernelMessage.createMessage({\n            msgType: 'is_complete_reply',\n            parentHeader: isCompleteMsg.header,\n            channel: 'shell',\n            session: msg.header.session,\n            content,\n        });\n        this._sendMessage(message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1rZXJuZWwvbGliL2tlcm5lbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBQ1Y7QUFDM0M7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscURBQU07QUFDbkM7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2RUFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2RUFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2RUFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkVBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDZFQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGRhdGFsYXllci9qdXB5dGVybGl0ZS1rZXJuZWwvbGliL2tlcm5lbC5qcz9lNTRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtlcm5lbE1lc3NhZ2UgfSBmcm9tICdAanVweXRlcmxhYi9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBTaWduYWwgfSBmcm9tICdAbHVtaW5vL3NpZ25hbGluZyc7XG4vKipcbiAqIEEgYmFzZSBrZXJuZWwgY2xhc3MgaGFuZGxpbmcgYmFzaWMga2VybmVsIG1lc3NhZ2luZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VLZXJuZWwge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBhIG5ldyBCYXNlS2VybmVsLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGluc3RhbnRpYXRpb24gb3B0aW9ucyBmb3IgYSBCYXNlS2VybmVsLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLl9leGVjdXRpb25Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2lzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBuZXcgU2lnbmFsKHRoaXMpO1xuICAgICAgICB0aGlzLl9wYXJlbnRIZWFkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgeyBpZCwgbmFtZSwgbG9jYXRpb24sIHNlbmRNZXNzYWdlIH0gPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UgPSBzZW5kTWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gdGhlIGtlcm5lbCBpcyByZWFkeS5cbiAgICAgKi9cbiAgICBnZXQgcmVhZHkoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGtlcm5lbCBpcyBkaXNwb3NlZC5cbiAgICAgKi9cbiAgICBnZXQgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGlzcG9zZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc2lnbmFsIGVtaXR0ZWQgd2hlbiB0aGUga2VybmVsIGlzIGRpc3Bvc2VkLlxuICAgICAqL1xuICAgIGdldCBkaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3Bvc2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtlcm5lbCBpZFxuICAgICAqL1xuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIGtlcm5lbFxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvY2F0aW9uIGluIHRoZSB2aXJ0dWFsIGZpbGVzeXN0ZW0gZnJvbSB3aGljaCB0aGUga2VybmVsIHdhcyBzdGFydGVkLlxuICAgICAqL1xuICAgIGdldCBsb2NhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2F0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBleGVjdXRpb24gY291bnRcbiAgICAgKi9cbiAgICBnZXQgZXhlY3V0aW9uQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9leGVjdXRpb25Db3VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXN0IHBhcmVudCBoZWFkZXJcbiAgICAgKi9cbiAgICBnZXQgcGFyZW50SGVhZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50SGVhZGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxhc3QgcGFyZW50IG1lc3NhZ2UgKG1pbWljIGlweWtlcm5lbCdzIGdldF9wYXJlbnQpXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSB0aGUga2VybmVsLlxuICAgICAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQuZW1pdCh2b2lkIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYW4gaW5jb21pbmcgbWVzc2FnZSBmcm9tIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBtZXNzYWdlIHRvIGhhbmRsZVxuICAgICAqL1xuICAgIGFzeW5jIGhhbmRsZU1lc3NhZ2UobXNnKSB7XG4gICAgICAgIHRoaXMuX2J1c3kobXNnKTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbXNnO1xuICAgICAgICBjb25zdCBtc2dUeXBlID0gbXNnLmhlYWRlci5tc2dfdHlwZTtcbiAgICAgICAgc3dpdGNoIChtc2dUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdrZXJuZWxfaW5mb19yZXF1ZXN0JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9rZXJuZWxJbmZvKG1zZyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdleGVjdXRlX3JlcXVlc3QnOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2V4ZWN1dGUobXNnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2lucHV0X3JlcGx5JzpcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0UmVwbHkobXNnLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW5zcGVjdF9yZXF1ZXN0JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pbnNwZWN0KG1zZyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpc19jb21wbGV0ZV9yZXF1ZXN0JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9pc0NvbXBsZXRlUmVxdWVzdChtc2cpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY29tcGxldGVfcmVxdWVzdCc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY29tcGxldGUobXNnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2hpc3RvcnlfcmVxdWVzdCc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5faGlzdG9yeVJlcXVlc3QobXNnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1fb3Blbic6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb21tT3Blbihtc2cpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY29tbV9tc2cnOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29tbU1zZyhtc2cpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY29tbV9jbG9zZSc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb21tQ2xvc2UobXNnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faWRsZShtc2cpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gYW4gZXZlbnQgZnJvbSB0aGUga2VybmVsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBzdHJlYW0gY29udGVudC5cbiAgICAgKi9cbiAgICBzdHJlYW0oY29udGVudCwgcGFyZW50SGVhZGVyID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcGFyZW50SGVhZGVyVmFsdWUgPSB0eXBlb2YgcGFyZW50SGVhZGVyICE9PSAndW5kZWZpbmVkJyA/IHBhcmVudEhlYWRlciA6IHRoaXMuX3BhcmVudEhlYWRlcjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgbXNnVHlwZTogJ3N0cmVhbScsXG4gICAgICAgICAgICAvLyBUT0RPOiBiZXR0ZXIgaGFuZGxlIHRoaXNcbiAgICAgICAgICAgIHNlc3Npb246IChfYSA9IHBhcmVudEhlYWRlclZhbHVlID09PSBudWxsIHx8IHBhcmVudEhlYWRlclZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnRIZWFkZXJWYWx1ZS5zZXNzaW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogcGFyZW50SGVhZGVyVmFsdWUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBgZGlzcGxheV9kYXRhYCBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBkaXNwbGF5X2RhdGEgY29udGVudC5cbiAgICAgKi9cbiAgICBkaXNwbGF5RGF0YShjb250ZW50LCBwYXJlbnRIZWFkZXIgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgLy8gTWFrZSBzdXJlIG1ldGFkYXRhIGlzIGFsd2F5cyBzZXRcbiAgICAgICAgY29uc3QgcGFyZW50SGVhZGVyVmFsdWUgPSB0eXBlb2YgcGFyZW50SGVhZGVyICE9PSAndW5kZWZpbmVkJyA/IHBhcmVudEhlYWRlciA6IHRoaXMuX3BhcmVudEhlYWRlcjtcbiAgICAgICAgY29udGVudC5tZXRhZGF0YSA9IChfYSA9IGNvbnRlbnQubWV0YWRhdGEpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gS2VybmVsTWVzc2FnZS5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIGNoYW5uZWw6ICdpb3B1YicsXG4gICAgICAgICAgICBtc2dUeXBlOiAnZGlzcGxheV9kYXRhJyxcbiAgICAgICAgICAgIC8vIFRPRE86IGJldHRlciBoYW5kbGUgdGhpc1xuICAgICAgICAgICAgc2Vzc2lvbjogKF9iID0gcGFyZW50SGVhZGVyVmFsdWUgPT09IG51bGwgfHwgcGFyZW50SGVhZGVyVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEhlYWRlclZhbHVlLnNlc3Npb24pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBwYXJlbnRIZWFkZXJWYWx1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGBpbnB1dF9yZXF1ZXN0YCBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBpbnB1dF9yZXF1ZXN0IGNvbnRlbnQuXG4gICAgICovXG4gICAgaW5wdXRSZXF1ZXN0KGNvbnRlbnQsIHBhcmVudEhlYWRlciA9IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHBhcmVudEhlYWRlclZhbHVlID0gdHlwZW9mIHBhcmVudEhlYWRlciAhPT0gJ3VuZGVmaW5lZCcgPyBwYXJlbnRIZWFkZXIgOiB0aGlzLl9wYXJlbnRIZWFkZXI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgY2hhbm5lbDogJ3N0ZGluJyxcbiAgICAgICAgICAgIG1zZ1R5cGU6ICdpbnB1dF9yZXF1ZXN0JyxcbiAgICAgICAgICAgIC8vIFRPRE86IGJldHRlciBoYW5kbGUgdGhpc1xuICAgICAgICAgICAgc2Vzc2lvbjogKF9hID0gcGFyZW50SGVhZGVyVmFsdWUgPT09IG51bGwgfHwgcGFyZW50SGVhZGVyVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEhlYWRlclZhbHVlLnNlc3Npb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBwYXJlbnRIZWFkZXJWYWx1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBgZXhlY3V0ZV9yZXN1bHRgIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBleGVjdXRlIHJlc3VsdCBjb250ZW50LlxuICAgICAqL1xuICAgIHB1Ymxpc2hFeGVjdXRlUmVzdWx0KGNvbnRlbnQsIHBhcmVudEhlYWRlciA9IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHBhcmVudEhlYWRlclZhbHVlID0gdHlwZW9mIHBhcmVudEhlYWRlciAhPT0gJ3VuZGVmaW5lZCcgPyBwYXJlbnRIZWFkZXIgOiB0aGlzLl9wYXJlbnRIZWFkZXI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgY2hhbm5lbDogJ2lvcHViJyxcbiAgICAgICAgICAgIG1zZ1R5cGU6ICdleGVjdXRlX3Jlc3VsdCcsXG4gICAgICAgICAgICAvLyBUT0RPOiBiZXR0ZXIgaGFuZGxlIHRoaXNcbiAgICAgICAgICAgIHNlc3Npb246IChfYSA9IHBhcmVudEhlYWRlclZhbHVlID09PSBudWxsIHx8IHBhcmVudEhlYWRlclZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnRIZWFkZXJWYWx1ZS5zZXNzaW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogcGFyZW50SGVhZGVyVmFsdWUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYGVycm9yYCBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBlcnJvciBjb250ZW50LlxuICAgICAqL1xuICAgIHB1Ymxpc2hFeGVjdXRlRXJyb3IoY29udGVudCwgcGFyZW50SGVhZGVyID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcGFyZW50SGVhZGVyVmFsdWUgPSB0eXBlb2YgcGFyZW50SGVhZGVyICE9PSAndW5kZWZpbmVkJyA/IHBhcmVudEhlYWRlciA6IHRoaXMuX3BhcmVudEhlYWRlcjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgbXNnVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIC8vIFRPRE86IGJldHRlciBoYW5kbGUgdGhpc1xuICAgICAgICAgICAgc2Vzc2lvbjogKF9hID0gcGFyZW50SGVhZGVyVmFsdWUgPT09IG51bGwgfHwgcGFyZW50SGVhZGVyVmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEhlYWRlclZhbHVlLnNlc3Npb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBwYXJlbnRIZWFkZXJWYWx1ZSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGB1cGRhdGVfZGlzcGxheV9kYXRhYCBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SGVhZGVyIFRoZSBwYXJlbnQgaGVhZGVyLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSB1cGRhdGVfZGlzcGxheV9kYXRhIGNvbnRlbnQuXG4gICAgICovXG4gICAgdXBkYXRlRGlzcGxheURhdGEoY29udGVudCwgcGFyZW50SGVhZGVyID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcGFyZW50SGVhZGVyVmFsdWUgPSB0eXBlb2YgcGFyZW50SGVhZGVyICE9PSAndW5kZWZpbmVkJyA/IHBhcmVudEhlYWRlciA6IHRoaXMuX3BhcmVudEhlYWRlcjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgbXNnVHlwZTogJ3VwZGF0ZV9kaXNwbGF5X2RhdGEnLFxuICAgICAgICAgICAgLy8gVE9ETzogYmV0dGVyIGhhbmRsZSB0aGlzXG4gICAgICAgICAgICBzZXNzaW9uOiAoX2EgPSBwYXJlbnRIZWFkZXJWYWx1ZSA9PT0gbnVsbCB8fCBwYXJlbnRIZWFkZXJWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50SGVhZGVyVmFsdWUuc2Vzc2lvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHBhcmVudEhlYWRlclZhbHVlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgYGNsZWFyX291dHB1dGAgbWVzc2FnZSB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudEhlYWRlciBUaGUgcGFyZW50IGhlYWRlci5cbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgY2xlYXJfb3V0cHV0IGNvbnRlbnQuXG4gICAgICovXG4gICAgY2xlYXJPdXRwdXQoY29udGVudCwgcGFyZW50SGVhZGVyID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgcGFyZW50SGVhZGVyVmFsdWUgPSB0eXBlb2YgcGFyZW50SGVhZGVyICE9PSAndW5kZWZpbmVkJyA/IHBhcmVudEhlYWRlciA6IHRoaXMuX3BhcmVudEhlYWRlcjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgbXNnVHlwZTogJ2NsZWFyX291dHB1dCcsXG4gICAgICAgICAgICAvLyBUT0RPOiBiZXR0ZXIgaGFuZGxlIHRoaXNcbiAgICAgICAgICAgIHNlc3Npb246IChfYSA9IHBhcmVudEhlYWRlclZhbHVlID09PSBudWxsIHx8IHBhcmVudEhlYWRlclZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnRIZWFkZXJWYWx1ZS5zZXNzaW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogcGFyZW50SGVhZGVyVmFsdWUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBgY29tbWAgbWVzc2FnZSB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIC5cbiAgICAgKi9cbiAgICBoYW5kbGVDb21tKHR5cGUsIGNvbnRlbnQsIG1ldGFkYXRhLCBidWZmZXJzLCBwYXJlbnRIZWFkZXIgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBwYXJlbnRIZWFkZXJWYWx1ZSA9IHR5cGVvZiBwYXJlbnRIZWFkZXIgIT09ICd1bmRlZmluZWQnID8gcGFyZW50SGVhZGVyIDogdGhpcy5fcGFyZW50SGVhZGVyO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gS2VybmVsTWVzc2FnZS5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIGNoYW5uZWw6ICdpb3B1YicsXG4gICAgICAgICAgICBtc2dUeXBlOiB0eXBlLFxuICAgICAgICAgICAgLy8gVE9ETzogYmV0dGVyIGhhbmRsZSB0aGlzXG4gICAgICAgICAgICBzZXNzaW9uOiAoX2EgPSBwYXJlbnRIZWFkZXJWYWx1ZSA9PT0gbnVsbCB8fCBwYXJlbnRIZWFkZXJWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50SGVhZGVyVmFsdWUuc2Vzc2lvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHBhcmVudEhlYWRlclZhbHVlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgYnVmZmVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuICdpZGxlJyBzdGF0dXMgbWVzc2FnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBtZXNzYWdlXG4gICAgICovXG4gICAgX2lkbGUocGFyZW50KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgbXNnVHlwZTogJ3N0YXR1cycsXG4gICAgICAgICAgICBzZXNzaW9uOiBwYXJlbnQuaGVhZGVyLnNlc3Npb24sXG4gICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHBhcmVudC5oZWFkZXIsXG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9zdGF0ZTogJ2lkbGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgJ2J1c3knIHN0YXR1cyBtZXNzYWdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IG1lc3NhZ2UuXG4gICAgICovXG4gICAgX2J1c3kocGFyZW50KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgbXNnVHlwZTogJ3N0YXR1cycsXG4gICAgICAgICAgICBzZXNzaW9uOiBwYXJlbnQuaGVhZGVyLnNlc3Npb24sXG4gICAgICAgICAgICBwYXJlbnRIZWFkZXI6IHBhcmVudC5oZWFkZXIsXG4gICAgICAgICAgICBjaGFubmVsOiAnaW9wdWInLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9zdGF0ZTogJ2J1c3knLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYSBrZXJuZWxfaW5mb19yZXF1ZXN0IG1lc3NhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIF9rZXJuZWxJbmZvKHBhcmVudCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5rZXJuZWxJbmZvUmVxdWVzdCgpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gS2VybmVsTWVzc2FnZS5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIG1zZ1R5cGU6ICdrZXJuZWxfaW5mb19yZXBseScsXG4gICAgICAgICAgICBjaGFubmVsOiAnc2hlbGwnLFxuICAgICAgICAgICAgc2Vzc2lvbjogcGFyZW50LmhlYWRlci5zZXNzaW9uLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBwYXJlbnQuaGVhZGVyLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYSBgaGlzdG9yeV9yZXF1ZXN0YCBtZXNzYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBwYXJlbnQgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaGlzdG9yeVJlcXVlc3QobXNnKSB7XG4gICAgICAgIGNvbnN0IGhpc3RvcnlNc2cgPSBtc2c7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgbXNnVHlwZTogJ2hpc3RvcnlfcmVwbHknLFxuICAgICAgICAgICAgY2hhbm5lbDogJ3NoZWxsJyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogaGlzdG9yeU1zZy5oZWFkZXIsXG4gICAgICAgICAgICBzZXNzaW9uOiBtc2cuaGVhZGVyLnNlc3Npb24sXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnb2snLFxuICAgICAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuX2hpc3RvcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYGV4ZWN1dGVfaW5wdXRgIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBwYXJlbnQgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBfZXhlY3V0ZUlucHV0KG1zZykge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBtc2c7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBwYXJlbnQuY29udGVudC5jb2RlO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gS2VybmVsTWVzc2FnZS5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIG1zZ1R5cGU6ICdleGVjdXRlX2lucHV0JyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogcGFyZW50LmhlYWRlcixcbiAgICAgICAgICAgIGNoYW5uZWw6ICdpb3B1YicsXG4gICAgICAgICAgICBzZXNzaW9uOiBtc2cuaGVhZGVyLnNlc3Npb24sXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fY291bnQ6IHRoaXMuX2V4ZWN1dGlvbkNvdW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYW4gZXhlY3V0ZV9yZXF1ZXN0IG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBwYXJlbnQgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBfZXhlY3V0ZShtc2cpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0ZU1zZyA9IG1zZztcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV4ZWN1dGVNc2cuY29udGVudDtcbiAgICAgICAgaWYgKGNvbnRlbnQuc3RvcmVfaGlzdG9yeSkge1xuICAgICAgICAgICAgdGhpcy5fZXhlY3V0aW9uQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBoYW5kbGUgZGlmZmVyZW50bHlcbiAgICAgICAgdGhpcy5fcGFyZW50SGVhZGVyID0gZXhlY3V0ZU1zZy5oZWFkZXI7XG4gICAgICAgIHRoaXMuX2V4ZWN1dGVJbnB1dChleGVjdXRlTXNnKTtcbiAgICAgICAgaWYgKGNvbnRlbnQuc3RvcmVfaGlzdG9yeSkge1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKFswLCAwLCBjb250ZW50LmNvZGVdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXBseSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVJlcXVlc3QoZXhlY3V0ZU1zZy5jb250ZW50KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBtc2dUeXBlOiAnZXhlY3V0ZV9yZXBseScsXG4gICAgICAgICAgICBjaGFubmVsOiAnc2hlbGwnLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBleGVjdXRlTXNnLmhlYWRlcixcbiAgICAgICAgICAgIHNlc3Npb246IG1zZy5oZWFkZXIuc2Vzc2lvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHJlcGx5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbiBjb21wbGV0ZV9yZXF1ZXN0IG1lc3NhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtc2cgVGhlIHBhcmVudCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIF9jb21wbGV0ZShtc2cpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGVNc2cgPSBtc2c7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmNvbXBsZXRlUmVxdWVzdChjb21wbGV0ZU1zZy5jb250ZW50KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEtlcm5lbE1lc3NhZ2UuY3JlYXRlTWVzc2FnZSh7XG4gICAgICAgICAgICBtc2dUeXBlOiAnY29tcGxldGVfcmVwbHknLFxuICAgICAgICAgICAgcGFyZW50SGVhZGVyOiBjb21wbGV0ZU1zZy5oZWFkZXIsXG4gICAgICAgICAgICBjaGFubmVsOiAnc2hlbGwnLFxuICAgICAgICAgICAgc2Vzc2lvbjogbXNnLmhlYWRlci5zZXNzaW9uLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYW4gaW5zcGVjdF9yZXF1ZXN0IG1lc3NhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtc2cgVGhlIHBhcmVudCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIF9pbnNwZWN0KG1zZykge1xuICAgICAgICBjb25zdCBpbnNwZWN0TXNnID0gbXNnO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5pbnNwZWN0UmVxdWVzdChpbnNwZWN0TXNnLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gS2VybmVsTWVzc2FnZS5jcmVhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgIG1zZ1R5cGU6ICdpbnNwZWN0X3JlcGx5JyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogaW5zcGVjdE1zZy5oZWFkZXIsXG4gICAgICAgICAgICBjaGFubmVsOiAnc2hlbGwnLFxuICAgICAgICAgICAgc2Vzc2lvbjogbXNnLmhlYWRlci5zZXNzaW9uLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYW4gaXNfY29tcGxldGVfcmVxdWVzdCBtZXNzYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbXNnIFRoZSBwYXJlbnQgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaXNDb21wbGV0ZVJlcXVlc3QobXNnKSB7XG4gICAgICAgIGNvbnN0IGlzQ29tcGxldGVNc2cgPSBtc2c7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmlzQ29tcGxldGVSZXF1ZXN0KGlzQ29tcGxldGVNc2cuY29udGVudCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBLZXJuZWxNZXNzYWdlLmNyZWF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgbXNnVHlwZTogJ2lzX2NvbXBsZXRlX3JlcGx5JyxcbiAgICAgICAgICAgIHBhcmVudEhlYWRlcjogaXNDb21wbGV0ZU1zZy5oZWFkZXIsXG4gICAgICAgICAgICBjaGFubmVsOiAnc2hlbGwnLFxuICAgICAgICAgICAgc2Vzc2lvbjogbXNnLmhlYWRlci5zZXNzaW9uLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@datalayer/jupyterlite-kernel/lib/kernel.js\n"));

/***/ }),

/***/ "./node_modules/comlink/dist/esm/comlink.mjs":
/*!***************************************************!*\
  !*** ./node_modules/comlink/dist/esm/comlink.mjs ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createEndpoint\": function() { return /* binding */ createEndpoint; },\n/* harmony export */   \"expose\": function() { return /* binding */ expose; },\n/* harmony export */   \"finalizer\": function() { return /* binding */ finalizer; },\n/* harmony export */   \"proxy\": function() { return /* binding */ proxy; },\n/* harmony export */   \"proxyMarker\": function() { return /* binding */ proxyMarker; },\n/* harmony export */   \"releaseProxy\": function() { return /* binding */ releaseProxy; },\n/* harmony export */   \"transfer\": function() { return /* binding */ transfer; },\n/* harmony export */   \"transferHandlers\": function() { return /* binding */ transferHandlers; },\n/* harmony export */   \"windowEndpoint\": function() { return /* binding */ windowEndpoint; },\n/* harmony export */   \"wrap\": function() { return /* binding */ wrap; }\n/* harmony export */ });\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didn’t happen.\n            if (last === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\n\n//# sourceMappingURL=comlink.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY29tbGluay9kaXN0L2VzbS9jb21saW5rLm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxVQUFVO0FBQ3REO0FBQ0E7QUFDQSxnQkFBZ0IsaUJBQWlCLGtCQUFrQixVQUFVO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0EseURBQXlELGdCQUFnQixJQUFJO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYix5REFBeUQsZ0JBQWdCLElBQUk7QUFDN0UsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxQkFBcUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLElBQUk7QUFDM0MsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpSTtBQUNqSSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvY29tbGluay9kaXN0L2VzbS9jb21saW5rLm1qcz8zODE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cbmNvbnN0IHByb3h5TWFya2VyID0gU3ltYm9sKFwiQ29tbGluay5wcm94eVwiKTtcbmNvbnN0IGNyZWF0ZUVuZHBvaW50ID0gU3ltYm9sKFwiQ29tbGluay5lbmRwb2ludFwiKTtcbmNvbnN0IHJlbGVhc2VQcm94eSA9IFN5bWJvbChcIkNvbWxpbmsucmVsZWFzZVByb3h5XCIpO1xuY29uc3QgZmluYWxpemVyID0gU3ltYm9sKFwiQ29tbGluay5maW5hbGl6ZXJcIik7XG5jb25zdCB0aHJvd01hcmtlciA9IFN5bWJvbChcIkNvbWxpbmsudGhyb3duXCIpO1xuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHx8IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbi8qKlxuICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlIHRvIGhhbmRsZSBvYmplY3RzIG1hcmtlZCB0byBwcm94eS5cbiAqL1xuY29uc3QgcHJveHlUcmFuc2ZlckhhbmRsZXIgPSB7XG4gICAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sXG4gICAgc2VyaWFsaXplKG9iaikge1xuICAgICAgICBjb25zdCB7IHBvcnQxLCBwb3J0MiB9ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGV4cG9zZShvYmosIHBvcnQxKTtcbiAgICAgICAgcmV0dXJuIFtwb3J0MiwgW3BvcnQyXV07XG4gICAgfSxcbiAgICBkZXNlcmlhbGl6ZShwb3J0KSB7XG4gICAgICAgIHBvcnQuc3RhcnQoKTtcbiAgICAgICAgcmV0dXJuIHdyYXAocG9ydCk7XG4gICAgfSxcbn07XG4vKipcbiAqIEludGVybmFsIHRyYW5zZmVyIGhhbmRsZXIgdG8gaGFuZGxlIHRocm93biBleGNlcHRpb25zLlxuICovXG5jb25zdCB0aHJvd1RyYW5zZmVySGFuZGxlciA9IHtcbiAgICBjYW5IYW5kbGU6ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpICYmIHRocm93TWFya2VyIGluIHZhbHVlLFxuICAgIHNlcmlhbGl6ZSh7IHZhbHVlIH0pIHtcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWQ7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkID0ge1xuICAgICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdmFsdWUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhY2s6IHZhbHVlLnN0YWNrLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VyaWFsaXplZCA9IHsgaXNFcnJvcjogZmFsc2UsIHZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtzZXJpYWxpemVkLCBbXV07XG4gICAgfSxcbiAgICBkZXNlcmlhbGl6ZShzZXJpYWxpemVkKSB7XG4gICAgICAgIGlmIChzZXJpYWxpemVkLmlzRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKHNlcmlhbGl6ZWQudmFsdWUubWVzc2FnZSksIHNlcmlhbGl6ZWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IHNlcmlhbGl6ZWQudmFsdWU7XG4gICAgfSxcbn07XG4vKipcbiAqIEFsbG93cyBjdXN0b21pemluZyB0aGUgc2VyaWFsaXphdGlvbiBvZiBjZXJ0YWluIHZhbHVlcy5cbiAqL1xuY29uc3QgdHJhbnNmZXJIYW5kbGVycyA9IG5ldyBNYXAoW1xuICAgIFtcInByb3h5XCIsIHByb3h5VHJhbnNmZXJIYW5kbGVyXSxcbiAgICBbXCJ0aHJvd1wiLCB0aHJvd1RyYW5zZmVySGFuZGxlcl0sXG5dKTtcbmZ1bmN0aW9uIGlzQWxsb3dlZE9yaWdpbihhbGxvd2VkT3JpZ2lucywgb3JpZ2luKSB7XG4gICAgZm9yIChjb25zdCBhbGxvd2VkT3JpZ2luIG9mIGFsbG93ZWRPcmlnaW5zKSB7XG4gICAgICAgIGlmIChvcmlnaW4gPT09IGFsbG93ZWRPcmlnaW4gfHwgYWxsb3dlZE9yaWdpbiA9PT0gXCIqXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxvd2VkT3JpZ2luIGluc3RhbmNlb2YgUmVnRXhwICYmIGFsbG93ZWRPcmlnaW4udGVzdChvcmlnaW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBleHBvc2Uob2JqLCBlcCA9IGdsb2JhbFRoaXMsIGFsbG93ZWRPcmlnaW5zID0gW1wiKlwiXSkge1xuICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGNhbGxiYWNrKGV2KSB7XG4gICAgICAgIGlmICghZXYgfHwgIWV2LmRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQWxsb3dlZE9yaWdpbihhbGxvd2VkT3JpZ2lucywgZXYub3JpZ2luKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIG9yaWdpbiAnJHtldi5vcmlnaW59JyBmb3IgY29tbGluayBwcm94eWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaWQsIHR5cGUsIHBhdGggfSA9IE9iamVjdC5hc3NpZ24oeyBwYXRoOiBbXSB9LCBldi5kYXRhKTtcbiAgICAgICAgY29uc3QgYXJndW1lbnRMaXN0ID0gKGV2LmRhdGEuYXJndW1lbnRMaXN0IHx8IFtdKS5tYXAoZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgIGxldCByZXR1cm5WYWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHBhdGguc2xpY2UoMCwgLTEpLnJlZHVjZSgob2JqLCBwcm9wKSA9PiBvYmpbcHJvcF0sIG9iaik7XG4gICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhdGgucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJHRVRcIiAvKiBNZXNzYWdlVHlwZS5HRVQgKi86XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNFVFwiIC8qIE1lc3NhZ2VUeXBlLlNFVCAqLzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50W3BhdGguc2xpY2UoLTEpWzBdXSA9IGZyb21XaXJlVmFsdWUoZXYuZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFQUExZXCIgLyogTWVzc2FnZVR5cGUuQVBQTFkgKi86XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWUuYXBwbHkocGFyZW50LCBhcmd1bWVudExpc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJDT05TVFJVQ1RcIiAvKiBNZXNzYWdlVHlwZS5DT05TVFJVQ1QgKi86XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbmV3IHJhd1ZhbHVlKC4uLmFyZ3VtZW50TGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHByb3h5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRU5EUE9JTlRcIiAvKiBNZXNzYWdlVHlwZS5FTkRQT0lOVCAqLzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3NlKG9iaiwgcG9ydDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cmFuc2Zlcihwb3J0MSwgW3BvcnQxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlJFTEVBU0VcIiAvKiBNZXNzYWdlVHlwZS5SRUxFQVNFICovOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHsgdmFsdWUsIFt0aHJvd01hcmtlcl06IDAgfTtcbiAgICAgICAgfVxuICAgICAgICBQcm9taXNlLnJlc29sdmUocmV0dXJuVmFsdWUpXG4gICAgICAgICAgICAuY2F0Y2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9O1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJldHVyblZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2lyZVZhbHVlKSwgeyBpZCB9KSwgdHJhbnNmZXJhYmxlcyk7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJSRUxFQVNFXCIgLyogTWVzc2FnZVR5cGUuUkVMRUFTRSAqLykge1xuICAgICAgICAgICAgICAgIC8vIGRldGFjaCBhbmQgZGVhY3RpdmUgYWZ0ZXIgc2VuZGluZyByZWxlYXNlIHJlc3BvbnNlIGFib3ZlLlxuICAgICAgICAgICAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBjbG9zZUVuZFBvaW50KGVwKTtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxpemVyIGluIG9iaiAmJiB0eXBlb2Ygb2JqW2ZpbmFsaXplcl0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBvYmpbZmluYWxpemVyXSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIC8vIFNlbmQgU2VyaWFsaXphdGlvbiBFcnJvciBUbyBDYWxsZXJcbiAgICAgICAgICAgIGNvbnN0IFt3aXJlVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gdG9XaXJlVmFsdWUoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgVHlwZUVycm9yKFwiVW5zZXJpYWxpemFibGUgcmV0dXJuIHZhbHVlXCIpLFxuICAgICAgICAgICAgICAgIFt0aHJvd01hcmtlcl06IDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVwLnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgd2lyZVZhbHVlKSwgeyBpZCB9KSwgdHJhbnNmZXJhYmxlcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmIChlcC5zdGFydCkge1xuICAgICAgICBlcC5zdGFydCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuY29uc3RydWN0b3IubmFtZSA9PT0gXCJNZXNzYWdlUG9ydFwiO1xufVxuZnVuY3Rpb24gY2xvc2VFbmRQb2ludChlbmRwb2ludCkge1xuICAgIGlmIChpc01lc3NhZ2VQb3J0KGVuZHBvaW50KSlcbiAgICAgICAgZW5kcG9pbnQuY2xvc2UoKTtcbn1cbmZ1bmN0aW9uIHdyYXAoZXAsIHRhcmdldCkge1xuICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgW10sIHRhcmdldCk7XG59XG5mdW5jdGlvbiB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1JlbGVhc2VkKSB7XG4gICAgaWYgKGlzUmVsZWFzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJveHkgaGFzIGJlZW4gcmVsZWFzZWQgYW5kIGlzIG5vdCB1c2VhYmxlXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlbGVhc2VFbmRwb2ludChlcCkge1xuICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgIHR5cGU6IFwiUkVMRUFTRVwiIC8qIE1lc3NhZ2VUeXBlLlJFTEVBU0UgKi8sXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIGNsb3NlRW5kUG9pbnQoZXApO1xuICAgIH0pO1xufVxuY29uc3QgcHJveHlDb3VudGVyID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb3h5RmluYWxpemVycyA9IFwiRmluYWxpemF0aW9uUmVnaXN0cnlcIiBpbiBnbG9iYWxUaGlzICYmXG4gICAgbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChlcCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IChwcm94eUNvdW50ZXIuZ2V0KGVwKSB8fCAwKSAtIDE7XG4gICAgICAgIHByb3h5Q291bnRlci5zZXQoZXAsIG5ld0NvdW50KTtcbiAgICAgICAgaWYgKG5ld0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZWxlYXNlRW5kcG9pbnQoZXApO1xuICAgICAgICB9XG4gICAgfSk7XG5mdW5jdGlvbiByZWdpc3RlclByb3h5KHByb3h5LCBlcCkge1xuICAgIGNvbnN0IG5ld0NvdW50ID0gKHByb3h5Q291bnRlci5nZXQoZXApIHx8IDApICsgMTtcbiAgICBwcm94eUNvdW50ZXIuc2V0KGVwLCBuZXdDb3VudCk7XG4gICAgaWYgKHByb3h5RmluYWxpemVycykge1xuICAgICAgICBwcm94eUZpbmFsaXplcnMucmVnaXN0ZXIocHJveHksIGVwLCBwcm94eSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdW5yZWdpc3RlclByb3h5KHByb3h5KSB7XG4gICAgaWYgKHByb3h5RmluYWxpemVycykge1xuICAgICAgICBwcm94eUZpbmFsaXplcnMudW5yZWdpc3Rlcihwcm94eSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUHJveHkoZXAsIHBhdGggPSBbXSwgdGFyZ2V0ID0gZnVuY3Rpb24gKCkgeyB9KSB7XG4gICAgbGV0IGlzUHJveHlSZWxlYXNlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwge1xuICAgICAgICBnZXQoX3RhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgICAgICAgIGlmIChwcm9wID09PSByZWxlYXNlUHJveHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyUHJveHkocHJveHkpO1xuICAgICAgICAgICAgICAgICAgICByZWxlYXNlRW5kcG9pbnQoZXApO1xuICAgICAgICAgICAgICAgICAgICBpc1Byb3h5UmVsZWFzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gXCJ0aGVuXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGhlbjogKCkgPT4gcHJveHkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIiAvKiBNZXNzYWdlVHlwZS5HRVQgKi8sXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgubWFwKChwKSA9PiBwLnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbi5iaW5kKHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBbLi4ucGF0aCwgcHJvcF0pO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoX3RhcmdldCwgcHJvcCwgcmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICAgICAgICAvLyBGSVhNRTogRVM2IFByb3h5IEhhbmRsZXIgYHNldGAgbWV0aG9kcyBhcmUgc3VwcG9zZWQgdG8gcmV0dXJuIGFcbiAgICAgICAgICAgIC8vIGJvb2xlYW4uIFRvIHNob3cgZ29vZCB3aWxsLCB3ZSByZXR1cm4gdHJ1ZSBhc3luY2hyb25vdXNseSDCr1xcXyjjg4QpXy/Cr1xuICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJTRVRcIiAvKiBNZXNzYWdlVHlwZS5TRVQgKi8sXG4gICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhdGgsIHByb3BdLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGx5KF90YXJnZXQsIF90aGlzQXJnLCByYXdBcmd1bWVudExpc3QpIHtcbiAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7XG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGxhc3QgPT09IGNyZWF0ZUVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJFTkRQT0lOVFwiIC8qIE1lc3NhZ2VUeXBlLkVORFBPSU5UICovLFxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnJvbVdpcmVWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBqdXN0IHByZXRlbmQgdGhhdCBgYmluZCgpYCBkaWRu4oCZdCBoYXBwZW4uXG4gICAgICAgICAgICBpZiAobGFzdCA9PT0gXCJiaW5kXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJveHkoZXAsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkFQUExZXCIgLyogTWVzc2FnZVR5cGUuQVBQTFkgKi8sXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRMaXN0LFxuICAgICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29uc3RydWN0KF90YXJnZXQsIHJhd0FyZ3VtZW50TGlzdCkge1xuICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTtcbiAgICAgICAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkNPTlNUUlVDVFwiIC8qIE1lc3NhZ2VUeXBlLkNPTlNUUlVDVCAqLyxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLm1hcCgocCkgPT4gcC50b1N0cmluZygpKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsXG4gICAgICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKS50aGVuKGZyb21XaXJlVmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJlZ2lzdGVyUHJveHkocHJveHksIGVwKTtcbiAgICByZXR1cm4gcHJveHk7XG59XG5mdW5jdGlvbiBteUZsYXQoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFycik7XG59XG5mdW5jdGlvbiBwcm9jZXNzQXJndW1lbnRzKGFyZ3VtZW50TGlzdCkge1xuICAgIGNvbnN0IHByb2Nlc3NlZCA9IGFyZ3VtZW50TGlzdC5tYXAodG9XaXJlVmFsdWUpO1xuICAgIHJldHVybiBbcHJvY2Vzc2VkLm1hcCgodikgPT4gdlswXSksIG15RmxhdChwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzFdKSldO1xufVxuY29uc3QgdHJhbnNmZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykge1xuICAgIHRyYW5zZmVyQ2FjaGUuc2V0KG9iaiwgdHJhbnNmZXJzKTtcbiAgICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gcHJveHkob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCB7IFtwcm94eU1hcmtlcl06IHRydWUgfSk7XG59XG5mdW5jdGlvbiB3aW5kb3dFbmRwb2ludCh3LCBjb250ZXh0ID0gZ2xvYmFsVGhpcywgdGFyZ2V0T3JpZ2luID0gXCIqXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwb3N0TWVzc2FnZTogKG1zZywgdHJhbnNmZXJhYmxlcykgPT4gdy5wb3N0TWVzc2FnZShtc2csIHRhcmdldE9yaWdpbiwgdHJhbnNmZXJhYmxlcyksXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lci5iaW5kKGNvbnRleHQpLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBjb250ZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIuYmluZChjb250ZXh0KSxcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9XaXJlVmFsdWUodmFsdWUpIHtcbiAgICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLmNhbkhhbmRsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtzZXJpYWxpemVkVmFsdWUsIHRyYW5zZmVyYWJsZXNdID0gaGFuZGxlci5zZXJpYWxpemUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiSEFORExFUlwiIC8qIFdpcmVWYWx1ZVR5cGUuSEFORExFUiAqLyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlcmlhbGl6ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwiUkFXXCIgLyogV2lyZVZhbHVlVHlwZS5SQVcgKi8sXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNmZXJDYWNoZS5nZXQodmFsdWUpIHx8IFtdLFxuICAgIF07XG59XG5mdW5jdGlvbiBmcm9tV2lyZVZhbHVlKHZhbHVlKSB7XG4gICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJIQU5ETEVSXCIgLyogV2lyZVZhbHVlVHlwZS5IQU5ETEVSICovOlxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVySGFuZGxlcnMuZ2V0KHZhbHVlLm5hbWUpLmRlc2VyaWFsaXplKHZhbHVlLnZhbHVlKTtcbiAgICAgICAgY2FzZSBcIlJBV1wiIC8qIFdpcmVWYWx1ZVR5cGUuUkFXICovOlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIG1zZywgdHJhbnNmZXJzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gZ2VuZXJhdGVVVUlEKCk7XG4gICAgICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uIGwoZXYpIHtcbiAgICAgICAgICAgIGlmICghZXYuZGF0YSB8fCAhZXYuZGF0YS5pZCB8fCBldi5kYXRhLmlkICE9PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGwpO1xuICAgICAgICAgICAgcmVzb2x2ZShldi5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlcC5zdGFydCkge1xuICAgICAgICAgICAgZXAuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlcC5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKHsgaWQgfSwgbXNnKSwgdHJhbnNmZXJzKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5KDQpXG4gICAgICAgIC5maWxsKDApXG4gICAgICAgIC5tYXAoKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSlcbiAgICAgICAgLmpvaW4oXCItXCIpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVFbmRwb2ludCwgZXhwb3NlLCBmaW5hbGl6ZXIsIHByb3h5LCBwcm94eU1hcmtlciwgcmVsZWFzZVByb3h5LCB0cmFuc2ZlciwgdHJhbnNmZXJIYW5kbGVycywgd2luZG93RW5kcG9pbnQsIHdyYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWxpbmsubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/comlink/dist/esm/comlink.mjs\n"));

/***/ })

}]);