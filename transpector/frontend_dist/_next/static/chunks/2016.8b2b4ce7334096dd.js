"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2016],{12016:function(e,t,s){s.r(t),s.d(t,{PIPLITE_WHEEL:function(){return a},PyoliteKernel:function(){return H},PyoliteRemoteKernel:function(){return E}});let a="piplite-0.1.0b11-py3-none-any.whl";var i=s(95082),n=s(79622),r=s(76240),o=s(4016);class l{constructor(e){this._history=[],this._executionCount=0,this._isDisposed=!1,this._disposed=new o.Signal(this),this._parentHeader=void 0,this._parent=void 0;let{id:t,name:s,location:a,sendMessage:i}=e;this._id=t,this._name=s,this._location=a,this._sendMessage=i}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get id(){return this._id}get name(){return this._name}get location(){return this._location}get executionCount(){return this._executionCount}get parentHeader(){return this._parentHeader}get parent(){return this._parent}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0))}async handleMessage(e){this._busy(e),this._parent=e;let t=e.header.msg_type;switch(t){case"kernel_info_request":await this._kernelInfo(e);break;case"execute_request":await this._execute(e);break;case"input_reply":this.inputReply(e.content);break;case"inspect_request":await this._inspect(e);break;case"is_complete_request":await this._isCompleteRequest(e);break;case"complete_request":await this._complete(e);break;case"history_request":await this._historyRequest(e);break;case"comm_open":await this.commOpen(e);break;case"comm_msg":await this.commMsg(e);break;case"comm_close":await this.commClose(e)}this._idle(e)}stream(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"stream",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}displayData(e,t){var s,a;let i=void 0!==t?t:this._parentHeader;e.metadata=null!==(s=e.metadata)&&void 0!==s?s:{};let n=r.KernelMessage.createMessage({channel:"iopub",msgType:"display_data",session:null!==(a=null==i?void 0:i.session)&&void 0!==a?a:"",parentHeader:i,content:e});this._sendMessage(n)}inputRequest(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"stdin",msgType:"input_request",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}publishExecuteResult(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"execute_result",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}publishExecuteError(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"error",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}updateDisplayData(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"update_display_data",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}clearOutput(e,t){var s;let a=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"clear_output",session:null!==(s=null==a?void 0:a.session)&&void 0!==s?s:"",parentHeader:a,content:e});this._sendMessage(i)}handleComm(e,t,s,a,i){var n;let o=void 0!==i?i:this._parentHeader,l=r.KernelMessage.createMessage({channel:"iopub",msgType:e,session:null!==(n=null==o?void 0:o.session)&&void 0!==n?n:"",parentHeader:o,content:t,metadata:s,buffers:a});this._sendMessage(l)}_idle(e){let t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"idle"}});this._sendMessage(t)}_busy(e){let t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"busy"}});this._sendMessage(t)}async _kernelInfo(e){let t=await this.kernelInfoRequest(),s=r.KernelMessage.createMessage({msgType:"kernel_info_reply",channel:"shell",session:e.header.session,parentHeader:e.header,content:t});this._sendMessage(s)}async _historyRequest(e){let t=r.KernelMessage.createMessage({msgType:"history_reply",channel:"shell",parentHeader:e.header,session:e.header.session,content:{status:"ok",history:this._history}});this._sendMessage(t)}_executeInput(e){let t=e.content.code,s=r.KernelMessage.createMessage({msgType:"execute_input",parentHeader:e.header,channel:"iopub",session:e.header.session,content:{code:t,execution_count:this._executionCount}});this._sendMessage(s)}async _execute(e){let t=e.content;t.store_history&&this._executionCount++,this._parentHeader=e.header,this._executeInput(e),t.store_history&&this._history.push([0,0,t.code]);let s=await this.executeRequest(e.content),a=r.KernelMessage.createMessage({msgType:"execute_reply",channel:"shell",parentHeader:e.header,session:e.header.session,content:s});this._sendMessage(a)}async _complete(e){let t=await this.completeRequest(e.content),s=r.KernelMessage.createMessage({msgType:"complete_reply",parentHeader:e.header,channel:"shell",session:e.header.session,content:t});this._sendMessage(s)}async _inspect(e){let t=await this.inspectRequest(e.content),s=r.KernelMessage.createMessage({msgType:"inspect_reply",parentHeader:e.header,channel:"shell",session:e.header.session,content:t});this._sendMessage(s)}async _isCompleteRequest(e){let t=await this.isCompleteRequest(e.content),s=r.KernelMessage.createMessage({msgType:"is_complete_reply",parentHeader:e.header,channel:"shell",session:e.header.session,content:t});this._sendMessage(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),u=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.finalizer"),d=Symbol("Comlink.thrown"),_=e=>"object"==typeof e&&null!==e||"function"==typeof e,m=new Map([["proxy",{canHandle:e=>_(e)&&e[p],serialize(e){let{port1:t,port2:s}=new MessageChannel;return function e(t,s=globalThis,a=["*"]){s.addEventListener("message",function i(n){let r;if(!n||!n.data)return;if(!function(e,t){for(let s of e)if(t===s||"*"===s||s instanceof RegExp&&s.test(t))return!0;return!1}(a,n.origin)){console.warn(`Invalid origin '${n.origin}' for comlink proxy`);return}let{id:o,type:l,path:h}=Object.assign({path:[]},n.data),u=(n.data.argumentList||[]).map(x);try{let s=h.slice(0,-1).reduce((e,t)=>e[t],t),a=h.reduce((e,t)=>e[t],t);switch(l){case"GET":r=a;break;case"SET":s[h.slice(-1)[0]]=x(n.data.value),r=!0;break;case"APPLY":r=a.apply(s,u);break;case"CONSTRUCT":{let e=new a(...u);r=Object.assign(e,{[p]:!0})}break;case"ENDPOINT":{let{port1:s,port2:a}=new MessageChannel;e(t,a),R.set(s,[s]),r=s}break;case"RELEASE":r=void 0;break;default:return}}catch(e){r={value:e,[d]:0}}Promise.resolve(r).catch(e=>({value:e,[d]:0})).then(e=>{let[a,n]=M(e);s.postMessage(Object.assign(Object.assign({},a),{id:o}),n),"RELEASE"===l&&(s.removeEventListener("message",i),y(s),c in t&&"function"==typeof t[c]&&t[c]())}).catch(e=>{let[t,a]=M({value:TypeError("Unserializable return value"),[d]:0});s.postMessage(Object.assign(Object.assign({},t),{id:o}),a)})}),s.start&&s.start()}(e,t),[s,[s]]},deserialize:e=>{var t;return e.start(),v(e,[],t)}}],["throw",{canHandle:e=>_(e)&&d in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function y(e){"MessagePort"===e.constructor.name&&e.close()}function g(e){if(e)throw Error("Proxy has been released and is not useable")}function f(e){return P(e,{type:"RELEASE"}).then(()=>{y(e)})}let b=new WeakMap,k="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(b.get(e)||0)-1;b.set(e,t),0===t&&f(e)});function v(e,t=[],s=function(){}){let a=!1,i=new Proxy(s,{get(s,n){if(g(a),n===u)return()=>{k&&k.unregister(i),f(e),a=!0};if("then"===n){if(0===t.length)return{then:()=>i};let s=P(e,{type:"GET",path:t.map(e=>e.toString())}).then(x);return s.then.bind(s)}return v(e,[...t,n])},set(s,i,n){g(a);let[r,o]=M(n);return P(e,{type:"SET",path:[...t,i].map(e=>e.toString()),value:r},o).then(x)},apply(s,i,n){g(a);let r=t[t.length-1];if(r===h)return P(e,{type:"ENDPOINT"}).then(x);if("bind"===r)return v(e,t.slice(0,-1));let[o,l]=w(n);return P(e,{type:"APPLY",path:t.map(e=>e.toString()),argumentList:o},l).then(x)},construct(s,i){g(a);let[n,r]=w(i);return P(e,{type:"CONSTRUCT",path:t.map(e=>e.toString()),argumentList:n},r).then(x)}});return!function(e,t){let s=(b.get(t)||0)+1;b.set(t,s),k&&k.register(e,t,e)}(i,e),i}function w(e){var t;let s=e.map(M);return[s.map(e=>e[0]),(t=s.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let R=new WeakMap;function M(e){for(let[t,s]of m)if(s.canHandle(e)){let[a,i]=s.serialize(e);return[{type:"HANDLER",name:t,value:a},i]}return[{type:"RAW",value:e},R.get(e)||[]]}function x(e){switch(e.type){case"HANDLER":return m.get(e.name).deserialize(e.value);case"RAW":return e.value}}function P(e,t,s){return new Promise(a=>{let i=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",function t(s){s.data&&s.data.id&&s.data.id===i&&(e.removeEventListener("message",t),a(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),s)})}class H extends l{constructor(e){super(e),this._ready=new i.PromiseDelegate,this._worker=this.initWorker(e),this._worker.onmessage=e=>this._processWorkerMessage(e.data),this._remoteKernel=this.initRemote(e),this._ready.resolve()}initWorker(e){return new Worker(s.tu(new URL(s.p+s.u(754),s.b)),{type:void 0})}initRemote(e){let t=v(this._worker,[],void 0),s=this.initRemoteOptions(e);return t.initialize(s),t}initRemoteOptions(e){let{pyodideUrl:t}=e,s=t.slice(0,t.lastIndexOf("/")+1),i=n.PageConfig.getBaseUrl(),r="https://datalayer-assets.s3.us-west-2.amazonaws.com/pypi",o=[...e.pipliteUrls||[],n.URLExt.join(r,"all.json")],l=n.URLExt.join(r,a),p=!!e.disablePyPIFallback;return{baseUrl:i,pyodideUrl:t,indexUrl:s,pipliteWheelUrl:l,pipliteUrls:o,disablePyPIFallback:p,location:this.location,mountDrive:e.mountDrive}}dispose(){this.isDisposed||(this._worker.terminate(),this._worker=null,super.dispose())}get ready(){return this._ready.promise}_processWorkerMessage(e){var t,s,a,i,n,r,o;if(e.type)switch(e.type){case"stream":{let s=null!==(t=e.bundle)&&void 0!==t?t:{name:"stdout",text:""};this.stream(s,e.parentHeader);break}case"input_request":{let t=null!==(s=e.content)&&void 0!==s?s:{prompt:"",password:!1};this.inputRequest(t,e.parentHeader);break}case"display_data":{let t=null!==(a=e.bundle)&&void 0!==a?a:{data:{},metadata:{},transient:{}};this.displayData(t,e.parentHeader);break}case"update_display_data":{let t=null!==(i=e.bundle)&&void 0!==i?i:{data:{},metadata:{},transient:{}};this.updateDisplayData(t,e.parentHeader);break}case"clear_output":{let t=null!==(n=e.bundle)&&void 0!==n?n:{wait:!1};this.clearOutput(t,e.parentHeader);break}case"execute_result":{let t=null!==(r=e.bundle)&&void 0!==r?r:{execution_count:0,data:{},metadata:{}};this.publishExecuteResult(t,e.parentHeader);break}case"execute_error":{let t=null!==(o=e.bundle)&&void 0!==o?o:{ename:"",evalue:"",traceback:[]};this.publishExecuteError(t,e.parentHeader);break}case"comm_msg":case"comm_open":case"comm_close":this.handleComm(e.type,e.content,e.metadata,e.buffers,e.parentHeader)}}async kernelInfoRequest(){return{implementation:"pyodide",implementation_version:"0.1.0",language_info:{codemirror_mode:{name:"python",version:3},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:"ipython3",version:"3.8"},protocol_version:"5.3",status:"ok",banner:"Pyolite: A WebAssembly-powered Python kernel backed by Pyodide",help_links:[{text:"Python (WASM) Kernel",url:"https://pyodide.org"}]}}async executeRequest(e){let t=await this._remoteKernel.execute(e,this.parent);return t.execution_count=this.executionCount,t}async completeRequest(e){return await this._remoteKernel.complete(e,this.parent)}async inspectRequest(e){return await this._remoteKernel.inspect(e,this.parent)}async isCompleteRequest(e){return await this._remoteKernel.isComplete(e,this.parent)}async commInfoRequest(e){return await this._remoteKernel.commInfo(e,this.parent)}async commOpen(e){return await this._remoteKernel.commOpen(e,this.parent)}async commMsg(e){return await this._remoteKernel.commMsg(e,this.parent)}async commClose(e){return await this._remoteKernel.commClose(e,this.parent)}async inputReply(e){return await this._remoteKernel.inputReply(e,this.parent)}}class E{constructor(){this._options=null,this._initializer=null,this._localPath="",this._driveName="",this._initialized=new Promise((e,t)=>{this._initializer={resolve:e,reject:t}})}async initialize(e){var t;if(this._options=e,e.location.includes(":")){let t=e.location.split(":");this._driveName=t[0],this._localPath=t[1]}else this._driveName="",this._localPath=e.location;await this.initRuntime(e),await this.initPackageManager(e),await this.initKernel(e),await this.initGlobals(e),null===(t=this._initializer)||void 0===t||t.resolve()}async initRuntime(e){let{pyodideUrl:t,indexUrl:s}=e;if(t.endsWith(".mjs")){let e=await import(t);this._pyodide=await e.loadPyodide({indexURL:s})}else importScripts(t),this._pyodide=await self.loadPyodide({indexURL:s})}async initPackageManager(e){if(!this._options)throw Error("Uninitialized");let{pipliteWheelUrl:t,disablePyPIFallback:s,pipliteUrls:a}=this._options;await this._pyodide.loadPackage(["micropip"]),await this._pyodide.runPythonAsync(`
      import micropip
      await micropip.install('${t}', keep_going=True)
      import piplite.piplite
      piplite.piplite._PIPLITE_DISABLE_PYPI = ${s?"True":"False"}
      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(a)}
    `)}async initKernel(e){await this._pyodide.runPythonAsync(`
      await piplite.install(['matplotlib', 'ipykernel'], keep_going=True);
      await piplite.install(['pyolite'], keep_going=True);
      await piplite.install(['ipython'], keep_going=True);
      import pyolite
    `),e.mountDrive&&this._localPath&&await this._pyodide.runPythonAsync(`
        import os;
        os.chdir("${this._localPath}");
      `)}async initGlobals(e){let{globals:t}=this._pyodide;this._kernel=t.get("pyolite").kernel_instance.copy(),this._stdout_stream=t.get("pyolite").stdout_stream.copy(),this._stderr_stream=t.get("pyolite").stderr_stream.copy(),this._interpreter=this._kernel.interpreter.copy(),this._interpreter.send_comm=this.sendComm.bind(this)}mapToObject(e){let t=e instanceof Array?[]:{};return e.forEach((e,s)=>{t[s]=e instanceof Map||e instanceof Array?this.mapToObject(e):e}),t}formatResult(e){if(!this._pyodide.isPyProxy(e))return e;let t=e.toJs(),s=this.mapToObject(t);return s}async setup(e){await this._initialized,this._kernel._parent_header=this._pyodide.toPy(e)}async execute(e,t){await this.setup(t);let s=(e,t,s)=>{let a={execution_count:e,data:this.formatResult(t),metadata:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"execute_result"})},a=e=>{let t={wait:this.formatResult(e)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:t,type:"clear_output"})},i=(e,t,s)=>{let a={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"display_data"})},n=(e,t,s)=>{let a={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(s)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:a,type:"update_display_data"})},r=(e,t)=>{let s={name:this.formatResult(e),text:this.formatResult(t)};postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:s,type:"stream"})};this._stdout_stream.publish_stream_callback=r,this._stderr_stream.publish_stream_callback=r,this._interpreter.display_pub.clear_output_callback=a,this._interpreter.display_pub.display_data_callback=i,this._interpreter.display_pub.update_display_data_callback=n,this._interpreter.displayhook.publish_execution_result=s,this._interpreter.input=this.input.bind(this),this._interpreter.getpass=this.getpass.bind(this);let o=await this._kernel.run(e.code),l=this.formatResult(o);return"error"===l.status&&((e,t,s)=>{postMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:{ename:e,evalue:t,traceback:s},type:"execute_error"})})(l.ename,l.evalue,l.traceback),l}async complete(e,t){await this.setup(t);let s=this._kernel.complete(e.code,e.cursor_pos),a=this.formatResult(s);return a}async inspect(e,t){await this.setup(t);let s=this._kernel.inspect(e.code,e.cursor_pos,e.detail_level),a=this.formatResult(s);return a}async isComplete(e,t){await this.setup(t);let s=this._kernel.is_complete(e.code),a=this.formatResult(s);return a}async commInfo(e,t){await this.setup(t);let s=this._kernel.comm_info(e.target_name),a=this.formatResult(s);return{comms:a,status:"ok"}}async commOpen(e,t){await this.setup(t);let s=this._kernel.comm_manager.comm_open(this._pyodide.toPy(e)),a=this.formatResult(s);return a}async commMsg(e,t){await this.setup(t);let s=this._kernel.comm_manager.comm_msg(this._pyodide.toPy(e)),a=this.formatResult(s);return a}async commClose(e,t){await this.setup(t);let s=this._kernel.comm_manager.comm_close(this._pyodide.toPy(e)),a=this.formatResult(s);return a}async inputReply(e,t){await this.setup(t),this._resolveInputReply(e)}async sendInputRequest(e,t){postMessage({type:"input_request",parentHeader:this.formatResult(this._kernel._parent_header).header,content:{prompt:e,password:t}})}async getpass(e){e=void 0===e?"":e,await this.sendInputRequest(e,!0);let t=new Promise(e=>{this._resolveInputReply=e}),s=await t;return s.value}async input(e){e=void 0===e?"":e,await this.sendInputRequest(e,!1);let t=new Promise(e=>{this._resolveInputReply=e}),s=await t;return s.value}async sendComm(e,t,s,a,i){postMessage({type:e,content:this.formatResult(t),metadata:this.formatResult(s),ident:this.formatResult(a),buffers:this.formatResult(i),parentHeader:this.formatResult(this._kernel._parent_header).header})}}}}]);