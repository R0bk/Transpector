(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8706],{44095:function(t,e,r){var i;t.exports=(function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){if(o)return o(a,!0);var u=Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,r,i)}return r[a].exports}for(var o=void 0,a=0;a<i.length;a++)n(i[a]);return n})({1:[function(t,e,r){"use strict";r.byteLength=function(t){var e=l(t),r=e[0],i=e[1];return(r+i)*3/4-i},r.toByteArray=function(t){var e,r,i=l(t),a=i[0],s=i[1],u=new o((a+s)*3/4-s),h=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===s&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e),1===s&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u},r.fromByteArray=function(t){for(var e,r=t.length,n=r%3,o=[],a=0,s=r-n;a<s;a+=16383)o.push(function(t,e,r){for(var n,o=[],a=e;a<r;a+=3)o.push(i[(n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return o.join("")}(t,a,a+16383>s?s:a+16383));return 1===n?o.push(i[(e=t[r-1])>>2]+i[e<<4&63]+"=="):2===n&&o.push(i[(e=(t[r-2]<<8)+t[r-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),o.join("")};for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var i=r===e?0:4-r%4;return[r,i]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(t,e,r){},{}],3:[function(t,e,r){(function(e){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */"use strict";var e=t("base64-js"),i=t("ieee754");function n(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return u(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw TypeError("Unknown encoding: "+e);var r=0|f(t,e),i=n(r),a=i.write(t,e);return a!==r&&(i=i.slice(0,a)),i}(t,e);if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(R(t,ArrayBuffer)||t&&R(t.buffer,ArrayBuffer))return function(t,e,r){var i;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw RangeError('"length" is outside of buffer bounds');return(i=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=o.prototype,i}(t,e,r);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return o.from(i,e,r);var a=function(t){if(o.isBuffer(t)){var e,r=0|h(t.length),i=n(r);return 0===i.length||t.copy(i,0,0,r),i}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?n(0):l(t):"Buffer"===t.type&&Array.isArray(t.data)?l(t.data):void 0}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return s(t),n(t<0?0:0|h(t))}function l(t){for(var e=t.length<0?0:0|h(t.length),r=n(e),i=0;i<e;i+=1)r[i]=255&t[i];return r}function h(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function f(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||R(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(t).length;default:if(n)return i?-1:M(t).length;e=(""+e).toLowerCase(),n=!0}}function c(t,r,i){var n,o,a=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(r>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){var i,n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=e;a<r;++a)o+=(i=t[a])<16?"0"+i.toString(16):i.toString(16);return o}(this,r,i);case"utf8":case"utf-8":return g(this,r,i);case"ascii":return function(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}(this,r,i);case"latin1":case"binary":return function(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}(this,r,i);case"base64":return n=r,o=i,0===n&&o===this.length?e.fromByteArray(this):e.fromByteArray(this.slice(n,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}(this,r,i);default:if(a)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function d(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function p(t,e,r,i,n){var a;if(0===t.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(a=r=+r)!=a&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return -1;r=t.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof e&&(e=o.from(e,i)),o.isBuffer(e))return 0===e.length?-1:v(t,e,r,i,n);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,i,n);throw TypeError("val must be string, number or Buffer")}function v(t,e,r,i,n){var o,a=1,s=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var h=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*a}else -1!==h&&(o-=o-h),h=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,c=0;c<u;c++)if(l(t,o+c)!==l(e,c)){f=!1;break}if(f)return o}return -1}function g(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o,a,s,u,l=t[n],h=null,f=l>239?4:l>223?3:l>191?2:1;if(n+f<=r)switch(f){case 1:l<128&&(h=l);break;case 2:(192&(o=t[n+1]))==128&&(u=(31&l)<<6|63&o)>127&&(h=u);break;case 3:o=t[n+1],a=t[n+2],(192&o)==128&&(192&a)==128&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[n+1],a=t[n+2],s=t[n+3],(192&o)==128&&(192&a)==128&&(192&s)==128&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(h=u)}null===h?(h=65533,f=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}function m(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function b(t,e,r,i,n,a){if(!o.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw RangeError('"value" argument is out of bounds');if(r+i>t.length)throw RangeError("Index out of range")}function y(t,e,r,i,n,o){if(r+i>t.length||r<0)throw RangeError("Index out of range")}function x(t,e,r,n,o){return e=+e,r>>>=0,o||y(t,e,r,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,r,n,23,4),r+4}function _(t,e,r,n,o){return e=+e,r>>>=0,o||y(t,e,r,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,r,n,52,8),r+8}r.Buffer=o,r.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},r.INSPECT_MAX_BYTES=50,r.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return a(t,e,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,r){return(s(t),t<=0)?n(t):void 0!==e?"string"==typeof r?n(t).fill(e,r):n(t).fill(e):n(t)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(R(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,i=e.length,n=0,a=Math.min(r,i);n<a;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;var r,i=o.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var a=t[r];if(R(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?g(this,0,t):c.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,i,n){if(R(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,n>>>=0,this===t)return 0;for(var a=n-i,s=r-e,u=Math.min(a,s),l=this.slice(i,n),h=t.slice(e,r),f=0;f<u;++f)if(l[f]!==h[f]){a=l[f],s=h[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},o.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,o,a,s,u,l,h,f,c,d,p,v,g=this.length-e;if((void 0===r||r>g)&&(r=g),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var m=!1;;)switch(i){case"hex":return function(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(s!=s)break;t[r+a]=s}return a}(this,t,e,r);case"utf8":case"utf-8":return u=e,l=r,T(M(t,this.length-u),this,u,l);case"ascii":return h=e,f=r,T(E(t),this,h,f);case"latin1":case"binary":return n=this,o=t,a=e,s=r,T(E(o),n,a,s);case"base64":return c=e,d=r,T(A(t),this,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=e,v=r,T(function(t,e){for(var r,i,n=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(r=t.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(t,this.length-p),this,p,v);default:if(m)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),m=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var i=this.subarray(t,e);return i.__proto__=o.prototype,i},o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||m(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i},o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||m(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},o.prototype.readUInt8=function(t,e){return t>>>=0,e||m(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||m(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||m(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||m(t,e,this.length);for(var i=this[t],n=1,o=0;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||m(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return(t>>>=0,e||m(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||m(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||m(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||m(t,4,this.length),i.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||m(t,4,this.length),i.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||m(t,8,this.length),i.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||m(t,8,this.length),i.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;b(this,t,e,r,n,0)}var o=1,a=0;for(this[e]=255&t;++a<r&&(o*=256);)this[e+a]=t/o&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){var n=Math.pow(2,8*r)-1;b(this,t,e,r,n,0)}var o=r-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e>>>=0,!i){var n=Math.pow(2,8*r-1);b(this,t,e,r,n-1,-n)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e>>>=0,!i){var n=Math.pow(2,8*r-1);b(this,t,e,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||b(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return _(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return _(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,i){if(!o.isBuffer(t))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,i);else if(this===t&&r<e&&e<i)for(var a=n-1;a>=0;--a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),e);return n},o.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===t.length){var n,a=t.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(t=a)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(n=e;n<r;++n)this[n]=t;else{var s=o.isBuffer(t)?t:o.from(t,i),u=s.length;if(0===u)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<r-e;++n)this[n+e]=s[n%u]}return this};var w=/[^+/0-9A-Za-z-_]/g;function M(t,e){e=e||1/0;for(var r,i=t.length,n=null,o=[],a=0;a<i;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319||a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function E(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function A(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(w,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function T(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length)&&!(n>=t.length);++n)e[n+r]=t[n];return n}function R(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(t,e,r){r.read=function(t,e,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,h=-7,f=r?n-1:0,c=r?-1:1,d=t[e+f];for(f+=c,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+t[e+f],f+=c,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=256*a+t[e+f],f+=c,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,i),o-=l}return(d?-1:1)*a*Math.pow(2,o-i)},r.write=function(t,e,r,i,n,o){var a,s,u,l=8*o-n-1,h=(1<<l)-1,f=h>>1,c=23===n?5960464477539062e-23:0,d=i?0:o-1,p=i?1:-1,v=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+f>=1?e+=c/u:e+=c*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=h?(s=0,a=h):a+f>=1?(s=(e*u-1)*Math.pow(2,n),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[r+d]=255&a,d+=p,a/=256,l-=8);t[r+d-p]|=128*v}},{}],5:[function(t,e,r){var i,n,o,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function l(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var h=[],f=!1,c=-1;function d(){f&&o&&(f=!1,o.length?h=o.concat(h):c=-1,h.length&&p())}function p(){if(!f){var t=l(d);f=!0;for(var e=h.length;e;){for(o=h,h=[];++c<e;)o&&o[c].run();c=-1,e=h.length}o=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}a.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new v(t,e)),1!==h.length||f||l(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(t){return[]},a.binding=function(t){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(t,e,r){e.exports={alpha_shape:t("alpha-shape"),convex_hull:t("convex-hull"),delaunay_triangulate:t("delaunay-triangulate"),gl_cone3d:t("gl-cone3d"),gl_error3d:t("gl-error3d"),gl_heatmap2d:t("gl-heatmap2d"),gl_line3d:t("gl-line3d"),gl_mesh3d:t("gl-mesh3d"),gl_plot2d:t("gl-plot2d"),gl_plot3d:t("gl-plot3d"),gl_pointcloud2d:t("gl-pointcloud2d"),gl_scatter3d:t("gl-scatter3d"),gl_select_box:t("gl-select-box"),gl_spikes2d:t("gl-spikes2d"),gl_streamtube3d:t("gl-streamtube3d"),gl_surface3d:t("gl-surface3d"),ndarray:t("ndarray"),ndarray_linear_interpolate:t("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],s=t.up||[0,1,0],u=t.distanceLimits||[0,1/0],l=t.mode||"turntable",h=i(),f=n(),c=o();return h.setDistanceLimits(u[0],u[1]),h.lookAt(0,e,r,s),f.setDistanceLimits(u[0],u[1]),f.lookAt(0,e,r,s),c.setDistanceLimits(u[0],u[1]),c.lookAt(0,e,r,s),new a({turntable:h,orbit:f,matrix:c},l)};var i=t("turntable-camera-controller"),n=t("orbit-camera-controller"),o=t("matrix-camera-controller");function a(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;s.flush=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].flush(t)},s.idle=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].idle(t)},s.lookAt=function(t,e,r,i){for(var n=this._controllerList,o=0;o<n.length;++o)n[o].lookAt(t,e,r,i)},s.rotate=function(t,e,r,i){for(var n=this._controllerList,o=0;o<n.length;++o)n[o].rotate(t,e,r,i)},s.pan=function(t,e,r,i){for(var n=this._controllerList,o=0;o<n.length;++o)n[o].pan(t,e,r,i)},s.translate=function(t,e,r,i){for(var n=this._controllerList,o=0;o<n.length;++o)n[o].translate(t,e,r,i)},s.setMatrix=function(t,e){for(var r=this._controllerList,i=0;i<r.length;++i)r[i].setMatrix(t,e)},s.setDistanceLimits=function(t,e){for(var r=this._controllerList,i=0;i<r.length;++i)r[i].setDistanceLimits(t,e)},s.setDistance=function(t,e){for(var r=this._controllerList,i=0;i<r.length;++i)r[i].setDistance(t,e)},s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,i=this._controllerList[e],n=Math.max(r.lastT(),i.lastT());r.recalcMatrix(n),i.setMatrix(n,r.computedMatrix),this._active=i,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(t,e,r){"use strict";var i="undefined"==typeof WeakMap?t("weak-map"):WeakMap,n=t("gl-buffer"),o=t("gl-vao"),a=new i;e.exports=function(t){var e=a.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var i=n(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=o(t,[{buffer:i,type:t.FLOAT,size:2}]))._triangleBuffer=i,a.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(t,e,r){var i=t("pad-left");e.exports=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var n=t.split(/\r?\n/),o=String(n.length+e-1).length;return n.map(function(t,n){var a=n+e,s=String(a).length;return i(a,o-s)+r+t}).join("\n")}},{"pad-left":264}],10:[function(t,e,r){"use strict";e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,n=[t[0]],o=[0],a=1;a<e;++a){if(n.push(t[a]),!function(t,e){for(var r=Array(e+1),n=0;n<t.length;++n)r[n]=t[n];for(var n=0;n<=t.length;++n){for(var o=t.length;o<=e;++o){for(var a=Array(e),s=0;s<e;++s)a[s]=Math.pow(o+1-n,s);r[o]=a}if(i.apply(void 0,r))return!0}return!1}(n,r)){n.pop();continue}if(o.push(a),o.length===r+1)break}return o};var i=t("robust-orientation")},{"robust-orientation":284}],11:[function(t,e,r){"use strict";e.exports=function(t,e){return i(e).filter(function(r){for(var i=Array(r.length),o=0;o<r.length;++o)i[o]=e[r[o]];return n(i)*t<1})};var i=t("delaunay-triangulate"),n=t("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(t,e,r){e.exports=function(t,e){return n(i(t,e))};var i=t("alpha-complex"),n=t("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(t,e,r){e.exports=function(t){return atob(t)}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=e.length,o=Array(r+1),a=0;a<r;++a){for(var s=Array(r+1),u=0;u<=r;++u)s[u]=t[u][a];o[a]=s}o[r]=Array(r+1);for(var a=0;a<=r;++a)o[r][a]=1;for(var l=Array(r+1),a=0;a<r;++a)l[a]=e[a];l[r]=1;var h=i(o,l),f=n(h[r+1]);0===f&&(f=1);for(var c=Array(r+1),a=0;a<=r;++a)c[a]=n(h[a])/f;return c};var i=t("robust-linear-solve");function n(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}},{"robust-linear-solve":283}],15:[function(t,e,r){"use strict";var i=t("./lib/rationalize");e.exports=function(t,e){return i(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},{"./lib/rationalize":25}],16:[function(t,e,r){"use strict";e.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},{}],17:[function(t,e,r){"use strict";var i=t("./lib/rationalize");e.exports=function(t,e){return i(t[0].mul(e[1]),t[1].mul(e[0]))}},{"./lib/rationalize":25}],18:[function(t,e,r){"use strict";var i=t("./is-rat"),n=t("./lib/is-bn"),o=t("./lib/num-to-bn"),a=t("./lib/str-to-bn"),s=t("./lib/rationalize"),u=t("./div");e.exports=function t(e,r){if(i(e))return r?u(e,t(r)):[e[0].clone(),e[1].clone()];var l,h,f=0;if(n(e))l=e.clone();else if("string"==typeof e)l=a(e);else if(0===e)return[o(0),o(1)];else if(e===Math.floor(e))l=o(e);else{for(;e!==Math.floor(e);)e*=1157920892373162e62,f-=256;l=o(e)}if(i(r))l.mul(r[1]),h=r[0].clone();else if(n(r))h=r.clone();else if("string"==typeof r)h=a(r);else if(r){if(r===Math.floor(r))h=o(r);else{for(;r!==Math.floor(r);)r*=1157920892373162e62,f+=256;h=o(r)}}else h=o(1);return f>0?l=l.ushln(f):f<0&&(h=h.ushln(-f)),s(l,h)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(t,e,r){"use strict";var i=t("./lib/is-bn");e.exports=function(t){return Array.isArray(t)&&2===t.length&&i(t[0])&&i(t[1])}},{"./lib/is-bn":23}],20:[function(t,e,r){"use strict";var i=t("bn.js");e.exports=function(t){return t.cmp(new i(0))}},{"bn.js":33}],21:[function(t,e,r){"use strict";var i=t("./bn-sign");e.exports=function(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var o=0;o<e;o++)n+=r[o]*Math.pow(67108864,o);return i(t)*n}},{"./bn-sign":20}],22:[function(t,e,r){"use strict";var i=t("double-bits"),n=t("bit-twiddle").countTrailingZeros;e.exports=function(t){var e=n(i.lo(t));if(e<32)return e;var r=n(i.hi(t));return r>20?52:r+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(t,e,r){"use strict";t("bn.js"),e.exports=function(t){return t&&"object"==typeof t&&!!t.words}},{"bn.js":33}],24:[function(t,e,r){"use strict";var i=t("bn.js"),n=t("double-bits");e.exports=function(t){var e=n.exponent(t);return e<52?new i(t):new i(t*Math.pow(2,52-e)).ushln(e-52)}},{"bn.js":33,"double-bits":64}],25:[function(t,e,r){"use strict";var i=t("./num-to-bn"),n=t("./bn-sign");e.exports=function(t,e){var r=n(t),o=n(e);if(0===r)return[i(0),i(1)];if(0===o)return[i(0),i(0)];o<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);return a.cmpn(1)?[t.div(a),e.div(a)]:[t,e]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(t,e,r){"use strict";var i=t("bn.js");e.exports=function(t){return new i(t)}},{"bn.js":33}],27:[function(t,e,r){"use strict";var i=t("./lib/rationalize");e.exports=function(t,e){return i(t[0].mul(e[0]),t[1].mul(e[1]))}},{"./lib/rationalize":25}],28:[function(t,e,r){"use strict";var i=t("./lib/bn-sign");e.exports=function(t){return i(t[0])*i(t[1])}},{"./lib/bn-sign":20}],29:[function(t,e,r){"use strict";var i=t("./lib/rationalize");e.exports=function(t,e){return i(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},{"./lib/rationalize":25}],30:[function(t,e,r){"use strict";var i=t("./lib/bn-to-num"),n=t("./lib/ctz");e.exports=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var o=e.abs().divmod(r.abs()),a=i(o.div),s=o.mod,u=e.negative!==r.negative?-1:1;if(0===s.cmpn(0))return u*a;if(a){var l=n(a)+4,h=i(s.ushln(l).divRound(r));return u*(a+h*Math.pow(2,-l))}var f=r.bitLength()-s.bitLength()+53,h=i(s.ushln(f).divRound(r));return f<1023?u*h*Math.pow(2,-f):u*(h*=11125369292536007e-324)*Math.pow(2,1023-f)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(t,e,r){"use strict";function i(t,e,r,i,n){for(var o=n+1;i<=n;){var a=i+n>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>=0?(o=a,n=a-1):i=a+1}return o}function n(t,e,r,i,n){for(var o=n+1;i<=n;){var a=i+n>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>0?(o=a,n=a-1):i=a+1}return o}function o(t,e,r,i,n){for(var o=i-1;i<=n;){var a=i+n>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<0?(o=a,i=a+1):n=a-1}return o}function a(t,e,r,i,n){for(var o=i-1;i<=n;){var a=i+n>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<=0?(o=a,i=a+1):n=a-1}return o}function s(t,e,r,i,n){for(;i<=n;){var o=i+n>>>1,a=t[o],s=void 0!==r?r(a,e):a-e;if(0===s)return o;s<=0?i=o+1:n=o-1}return -1}function u(t,e,r,i,n,o){return"function"==typeof r?o(t,e,r,void 0===i?0:0|i,void 0===n?t.length-1:0|n):o(t,e,void 0,void 0===r?0:0|r,void 0===i?t.length-1:0|i)}e.exports={ge:function(t,e,r,n,o){return u(t,e,r,n,o,i)},gt:function(t,e,r,i,o){return u(t,e,r,i,o,n)},lt:function(t,e,r,i,n){return u(t,e,r,i,n,o)},le:function(t,e,r,i,n){return u(t,e,r,i,n,a)},eq:function(t,e,r,i,n){return u(t,e,r,i,n,s)}}},{}],32:[function(t,e,r){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-2147483648,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1)&&!!t},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)*16843009>>>24},r.countTrailingZeros=i,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=Array(256);(function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}})(n),r.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,e&=65535,(t=((t=((t=((t=(t|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)|(e=((e=((e=((e=(e|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1},r.deinterleave2=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1431655765)|t>>>1)&858993459)|t>>>2)&252645135)|t>>>4)&16711935)|t>>>16)&65535)<<16>>16},r.interleave3=function(t,e,r){return t&=1023,e&=1023,r&=1023,r=((r=((r=((r=(r|r<<16)&4278190335)|r<<8)&251719695)|r<<4)&3272356035)|r<<2)&1227133513,(t=((t=((t=((t=(t|t<<16)&4278190335)|t<<8)&251719695)|t<<4)&3272356035)|t<<2)&1227133513|(e=((e=((e=((e=(e|e<<16)&4278190335)|e<<8)&251719695)|e<<4)&3272356035)|e<<2)&1227133513)<<1)|r<<2},r.deinterleave3=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1227133513)|t>>>2)&3272356035)|t>>>4)&251719695)|t>>>8)&4278190335)|t>>>16)&1023)<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},{}],33:[function(t,e,r){!function(e,r){"use strict";function i(t,e){if(!t)throw Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof e?e.exports=o:r.BN=o,o.BN=o,o.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:t("buffer").Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(t,e,r){var i=a(t,r);return r-1>=e&&(i|=a(t,r-1)<<4),i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=s(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=s(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,h=r;h<s;h+=i)l=u(t,h,h+i,e),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var f=1;for(l=u(t,h,t.length,e),h=0;h<a;h++)f*=e;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var h=u>>>26,f=67108863&u,c=Math.min(l,e.length-1),d=Math.max(0,l-t.length+1);d<=c;d++){var p=l-d|0;h+=(a=(n=0|t.words[p])*(o=0|e.words[d])+f)/67108864|0,f=67108863&a}r.words[l]=0|f,u=0|h}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=f[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?v+r:h[l-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var u=new t(s),l=this.clone();if("le"===e){for(o=0;!l.isZero();o++)n=l.andln(255),l.iushrn(8),u[o]=n;for(;o<s;o++)u[o]=0}else{for(o=0;o<s-a;o++)u[o]=0;for(o=0;!l.isZero();o++)n=l.andln(255),l.iushrn(8),u[s-o-1]=n}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var e,r,i,n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,r=t):(e=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(i=(0|e.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&i;for(;0!==o&&a<e.length;a++)o=(i=(0|e.words[a])+o)>>26,this.words[a]=67108863&i;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,l=0,h=0|a[0],f=8191&h,c=h>>>13,d=0|a[1],p=8191&d,v=d>>>13,g=0|a[2],m=8191&g,b=g>>>13,y=0|a[3],x=8191&y,_=y>>>13,w=0|a[4],M=8191&w,E=w>>>13,A=0|a[5],T=8191&A,R=A>>>13,k=0|a[6],S=8191&k,O=k>>>13,C=0|a[7],L=8191&C,I=C>>>13,P=0|a[8],B=8191&P,N=P>>>13,F=0|a[9],z=8191&F,D=F>>>13,U=0|s[0],j=8191&U,G=U>>>13,V=0|s[1],H=8191&V,W=V>>>13,X=0|s[2],Y=8191&X,q=X>>>13,Z=0|s[3],K=8191&Z,Q=Z>>>13,J=0|s[4],$=8191&J,tt=J>>>13,te=0|s[5],tr=8191&te,ti=te>>>13,tn=0|s[6],to=8191&tn,ta=tn>>>13,ts=0|s[7],tu=8191&ts,tl=ts>>>13,th=0|s[8],tf=8191&th,tc=th>>>13,td=0|s[9],tp=8191&td,tv=td>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(l+(i=Math.imul(f,j))|0)+((8191&(n=(n=Math.imul(f,G))+Math.imul(c,j)|0))<<13)|0;l=((o=Math.imul(c,G))+(n>>>13)|0)+(tg>>>26)|0,tg&=67108863,i=Math.imul(p,j),n=(n=Math.imul(p,G))+Math.imul(v,j)|0,o=Math.imul(v,G);var tm=(l+(i=i+Math.imul(f,H)|0)|0)+((8191&(n=(n=n+Math.imul(f,W)|0)+Math.imul(c,H)|0))<<13)|0;l=((o=o+Math.imul(c,W)|0)+(n>>>13)|0)+(tm>>>26)|0,tm&=67108863,i=Math.imul(m,j),n=(n=Math.imul(m,G))+Math.imul(b,j)|0,o=Math.imul(b,G),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,W)|0;var tb=(l+(i=i+Math.imul(f,Y)|0)|0)+((8191&(n=(n=n+Math.imul(f,q)|0)+Math.imul(c,Y)|0))<<13)|0;l=((o=o+Math.imul(c,q)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,i=Math.imul(x,j),n=(n=Math.imul(x,G))+Math.imul(_,j)|0,o=Math.imul(_,G),i=i+Math.imul(m,H)|0,n=(n=n+Math.imul(m,W)|0)+Math.imul(b,H)|0,o=o+Math.imul(b,W)|0,i=i+Math.imul(p,Y)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,q)|0;var ty=(l+(i=i+Math.imul(f,K)|0)|0)+((8191&(n=(n=n+Math.imul(f,Q)|0)+Math.imul(c,K)|0))<<13)|0;l=((o=o+Math.imul(c,Q)|0)+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,i=Math.imul(M,j),n=(n=Math.imul(M,G))+Math.imul(E,j)|0,o=Math.imul(E,G),i=i+Math.imul(x,H)|0,n=(n=n+Math.imul(x,W)|0)+Math.imul(_,H)|0,o=o+Math.imul(_,W)|0,i=i+Math.imul(m,Y)|0,n=(n=n+Math.imul(m,q)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,q)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Q)|0;var tx=(l+(i=i+Math.imul(f,$)|0)|0)+((8191&(n=(n=n+Math.imul(f,tt)|0)+Math.imul(c,$)|0))<<13)|0;l=((o=o+Math.imul(c,tt)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,i=Math.imul(T,j),n=(n=Math.imul(T,G))+Math.imul(R,j)|0,o=Math.imul(R,G),i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,W)|0,i=i+Math.imul(x,Y)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,q)|0,i=i+Math.imul(m,K)|0,n=(n=n+Math.imul(m,Q)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,Q)|0,i=i+Math.imul(p,$)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0;var t_=(l+(i=i+Math.imul(f,tr)|0)|0)+((8191&(n=(n=n+Math.imul(f,ti)|0)+Math.imul(c,tr)|0))<<13)|0;l=((o=o+Math.imul(c,ti)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,i=Math.imul(S,j),n=(n=Math.imul(S,G))+Math.imul(O,j)|0,o=Math.imul(O,G),i=i+Math.imul(T,H)|0,n=(n=n+Math.imul(T,W)|0)+Math.imul(R,H)|0,o=o+Math.imul(R,W)|0,i=i+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,q)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,q)|0,i=i+Math.imul(x,K)|0,n=(n=n+Math.imul(x,Q)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,Q)|0,i=i+Math.imul(m,$)|0,n=(n=n+Math.imul(m,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,i=i+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,ti)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,ti)|0;var tw=(l+(i=i+Math.imul(f,to)|0)|0)+((8191&(n=(n=n+Math.imul(f,ta)|0)+Math.imul(c,to)|0))<<13)|0;l=((o=o+Math.imul(c,ta)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,i=Math.imul(L,j),n=(n=Math.imul(L,G))+Math.imul(I,j)|0,o=Math.imul(I,G),i=i+Math.imul(S,H)|0,n=(n=n+Math.imul(S,W)|0)+Math.imul(O,H)|0,o=o+Math.imul(O,W)|0,i=i+Math.imul(T,Y)|0,n=(n=n+Math.imul(T,q)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,q)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,Q)|0,i=i+Math.imul(x,$)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,i=i+Math.imul(m,tr)|0,n=(n=n+Math.imul(m,ti)|0)+Math.imul(b,tr)|0,o=o+Math.imul(b,ti)|0,i=i+Math.imul(p,to)|0,n=(n=n+Math.imul(p,ta)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ta)|0;var tM=(l+(i=i+Math.imul(f,tu)|0)|0)+((8191&(n=(n=n+Math.imul(f,tl)|0)+Math.imul(c,tu)|0))<<13)|0;l=((o=o+Math.imul(c,tl)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,i=Math.imul(B,j),n=(n=Math.imul(B,G))+Math.imul(N,j)|0,o=Math.imul(N,G),i=i+Math.imul(L,H)|0,n=(n=n+Math.imul(L,W)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,W)|0,i=i+Math.imul(S,Y)|0,n=(n=n+Math.imul(S,q)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,q)|0,i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,Q)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Q)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(x,tr)|0,n=(n=n+Math.imul(x,ti)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,ti)|0,i=i+Math.imul(m,to)|0,n=(n=n+Math.imul(m,ta)|0)+Math.imul(b,to)|0,o=o+Math.imul(b,ta)|0,i=i+Math.imul(p,tu)|0,n=(n=n+Math.imul(p,tl)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tl)|0;var tE=(l+(i=i+Math.imul(f,tf)|0)|0)+((8191&(n=(n=n+Math.imul(f,tc)|0)+Math.imul(c,tf)|0))<<13)|0;l=((o=o+Math.imul(c,tc)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,i=Math.imul(z,j),n=(n=Math.imul(z,G))+Math.imul(D,j)|0,o=Math.imul(D,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,W)|0)+Math.imul(N,H)|0,o=o+Math.imul(N,W)|0,i=i+Math.imul(L,Y)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,q)|0,i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(O,K)|0,o=o+Math.imul(O,Q)|0,i=i+Math.imul(T,$)|0,n=(n=n+Math.imul(T,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,i=i+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,ti)|0)+Math.imul(E,tr)|0,o=o+Math.imul(E,ti)|0,i=i+Math.imul(x,to)|0,n=(n=n+Math.imul(x,ta)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ta)|0,i=i+Math.imul(m,tu)|0,n=(n=n+Math.imul(m,tl)|0)+Math.imul(b,tu)|0,o=o+Math.imul(b,tl)|0,i=i+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,tc)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,tc)|0;var tA=(l+(i=i+Math.imul(f,tp)|0)|0)+((8191&(n=(n=n+Math.imul(f,tv)|0)+Math.imul(c,tp)|0))<<13)|0;l=((o=o+Math.imul(c,tv)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,i=Math.imul(z,H),n=(n=Math.imul(z,W))+Math.imul(D,H)|0,o=Math.imul(D,W),i=i+Math.imul(B,Y)|0,n=(n=n+Math.imul(B,q)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,q)|0,i=i+Math.imul(L,K)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,Q)|0,i=i+Math.imul(S,$)|0,n=(n=n+Math.imul(S,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,i=i+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,ti)|0)+Math.imul(R,tr)|0,o=o+Math.imul(R,ti)|0,i=i+Math.imul(M,to)|0,n=(n=n+Math.imul(M,ta)|0)+Math.imul(E,to)|0,o=o+Math.imul(E,ta)|0,i=i+Math.imul(x,tu)|0,n=(n=n+Math.imul(x,tl)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tl)|0,i=i+Math.imul(m,tf)|0,n=(n=n+Math.imul(m,tc)|0)+Math.imul(b,tf)|0,o=o+Math.imul(b,tc)|0;var tT=(l+(i=i+Math.imul(p,tp)|0)|0)+((8191&(n=(n=n+Math.imul(p,tv)|0)+Math.imul(v,tp)|0))<<13)|0;l=((o=o+Math.imul(v,tv)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,i=Math.imul(z,Y),n=(n=Math.imul(z,q))+Math.imul(D,Y)|0,o=Math.imul(D,q),i=i+Math.imul(B,K)|0,n=(n=n+Math.imul(B,Q)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,Q)|0,i=i+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,i=i+Math.imul(S,tr)|0,n=(n=n+Math.imul(S,ti)|0)+Math.imul(O,tr)|0,o=o+Math.imul(O,ti)|0,i=i+Math.imul(T,to)|0,n=(n=n+Math.imul(T,ta)|0)+Math.imul(R,to)|0,o=o+Math.imul(R,ta)|0,i=i+Math.imul(M,tu)|0,n=(n=n+Math.imul(M,tl)|0)+Math.imul(E,tu)|0,o=o+Math.imul(E,tl)|0,i=i+Math.imul(x,tf)|0,n=(n=n+Math.imul(x,tc)|0)+Math.imul(_,tf)|0,o=o+Math.imul(_,tc)|0;var tR=(l+(i=i+Math.imul(m,tp)|0)|0)+((8191&(n=(n=n+Math.imul(m,tv)|0)+Math.imul(b,tp)|0))<<13)|0;l=((o=o+Math.imul(b,tv)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,i=Math.imul(z,K),n=(n=Math.imul(z,Q))+Math.imul(D,K)|0,o=Math.imul(D,Q),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,i=i+Math.imul(L,tr)|0,n=(n=n+Math.imul(L,ti)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,ti)|0,i=i+Math.imul(S,to)|0,n=(n=n+Math.imul(S,ta)|0)+Math.imul(O,to)|0,o=o+Math.imul(O,ta)|0,i=i+Math.imul(T,tu)|0,n=(n=n+Math.imul(T,tl)|0)+Math.imul(R,tu)|0,o=o+Math.imul(R,tl)|0,i=i+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,tc)|0)+Math.imul(E,tf)|0,o=o+Math.imul(E,tc)|0;var tk=(l+(i=i+Math.imul(x,tp)|0)|0)+((8191&(n=(n=n+Math.imul(x,tv)|0)+Math.imul(_,tp)|0))<<13)|0;l=((o=o+Math.imul(_,tv)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,i=Math.imul(z,$),n=(n=Math.imul(z,tt))+Math.imul(D,$)|0,o=Math.imul(D,tt),i=i+Math.imul(B,tr)|0,n=(n=n+Math.imul(B,ti)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,ti)|0,i=i+Math.imul(L,to)|0,n=(n=n+Math.imul(L,ta)|0)+Math.imul(I,to)|0,o=o+Math.imul(I,ta)|0,i=i+Math.imul(S,tu)|0,n=(n=n+Math.imul(S,tl)|0)+Math.imul(O,tu)|0,o=o+Math.imul(O,tl)|0,i=i+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,tc)|0)+Math.imul(R,tf)|0,o=o+Math.imul(R,tc)|0;var tS=(l+(i=i+Math.imul(M,tp)|0)|0)+((8191&(n=(n=n+Math.imul(M,tv)|0)+Math.imul(E,tp)|0))<<13)|0;l=((o=o+Math.imul(E,tv)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,i=Math.imul(z,tr),n=(n=Math.imul(z,ti))+Math.imul(D,tr)|0,o=Math.imul(D,ti),i=i+Math.imul(B,to)|0,n=(n=n+Math.imul(B,ta)|0)+Math.imul(N,to)|0,o=o+Math.imul(N,ta)|0,i=i+Math.imul(L,tu)|0,n=(n=n+Math.imul(L,tl)|0)+Math.imul(I,tu)|0,o=o+Math.imul(I,tl)|0,i=i+Math.imul(S,tf)|0,n=(n=n+Math.imul(S,tc)|0)+Math.imul(O,tf)|0,o=o+Math.imul(O,tc)|0;var tO=(l+(i=i+Math.imul(T,tp)|0)|0)+((8191&(n=(n=n+Math.imul(T,tv)|0)+Math.imul(R,tp)|0))<<13)|0;l=((o=o+Math.imul(R,tv)|0)+(n>>>13)|0)+(tO>>>26)|0,tO&=67108863,i=Math.imul(z,to),n=(n=Math.imul(z,ta))+Math.imul(D,to)|0,o=Math.imul(D,ta),i=i+Math.imul(B,tu)|0,n=(n=n+Math.imul(B,tl)|0)+Math.imul(N,tu)|0,o=o+Math.imul(N,tl)|0,i=i+Math.imul(L,tf)|0,n=(n=n+Math.imul(L,tc)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,tc)|0;var tC=(l+(i=i+Math.imul(S,tp)|0)|0)+((8191&(n=(n=n+Math.imul(S,tv)|0)+Math.imul(O,tp)|0))<<13)|0;l=((o=o+Math.imul(O,tv)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,i=Math.imul(z,tu),n=(n=Math.imul(z,tl))+Math.imul(D,tu)|0,o=Math.imul(D,tl),i=i+Math.imul(B,tf)|0,n=(n=n+Math.imul(B,tc)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,tc)|0;var tL=(l+(i=i+Math.imul(L,tp)|0)|0)+((8191&(n=(n=n+Math.imul(L,tv)|0)+Math.imul(I,tp)|0))<<13)|0;l=((o=o+Math.imul(I,tv)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,i=Math.imul(z,tf),n=(n=Math.imul(z,tc))+Math.imul(D,tf)|0,o=Math.imul(D,tc);var tI=(l+(i=i+Math.imul(B,tp)|0)|0)+((8191&(n=(n=n+Math.imul(B,tv)|0)+Math.imul(N,tp)|0))<<13)|0;l=((o=o+Math.imul(N,tv)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863;var tP=(l+(i=Math.imul(z,tp))|0)+((8191&(n=(n=Math.imul(z,tv))+Math.imul(D,tp)|0))<<13)|0;return l=((o=Math.imul(D,tv))+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,u[0]=tg,u[1]=tm,u[2]=tb,u[3]=ty,u[4]=tx,u[5]=t_,u[6]=tw,u[7]=tM,u[8]=tE,u[9]=tA,u[10]=tT,u[11]=tR,u[12]=tk,u[13]=tS,u[14]=tO,u[15]=tC,u[16]=tL,u[17]=tI,u[18]=tP,0!==l&&(u[19]=l,r.length++),r};function v(t,e,r){return new g().mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?d(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var h=o-l,f=(0|t.words[h])*(0|e.words[l]),c=67108863&f;a=a+(f/67108864|0)|0,s=67108863&(c=c+s|0),n+=(a=a+(c>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):v(this,t,e)},g.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},g.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},g.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<n;h+=s)for(var f=u,c=l,d=0;d<a;d++){var p=r[h+d],v=i[h+d],g=r[h+d+a],m=i[h+d+a],b=f*g-c*m;m=f*m+c*g,g=b,r[h+d]=p+g,i[h+d]=v+m,r[h+d+a]=p-g,i[h+d+a]=v-m,d!==s&&(b=u*f-l*c,c=u*c+l*f,f=b)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},g.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},g.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},g.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=Array(i),s=Array(i),u=Array(i),l=Array(i),h=Array(i),f=Array(i),c=r.words;c.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,h,f,i,n);for(var d=0;d<i;d++){var p=s[d]*h[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*h[d],s[d]=p}return this.conjugate(s,u,i),this.transform(s,u,c,o,i,n),this.conjugate(c,o,i),this.normalize13b(c,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=n);l--){var f=0|this.words[l];this.words[l]=h<<26-o|f>>>o,h=f&s}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;o-=67108863&u,s=(o>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r,i=this.length-t.length,n=this.clone(),a=t,s=0|a.words[a.length-1];0!=(i=26-this._countBits(s))&&(a=a.ushln(i),n.iushln(i),s=0|a.words[a.length-1]);var u=n.length-a.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var l=0;l<r.length;l++)r.words[l]=0}var h=n.clone()._ishlnsubmul(a,1,u);0===h.negative&&(n=h,r&&(r.words[u]=1));for(var f=u-1;f>=0;f--){var c=(0|n.words[a.length+f])*67108864+(0|n.words[a.length+f-1]);for(c=Math.min(c/s|0,67108863),n._ishlnsubmul(a,c,f);0!==n.negative;)c--,n.negative=0,n._ishlnsubmul(a,1,f),n.isZero()||(n.negative^=1);r&&(r.words[f]=c)}return r&&r.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:r||null,mod:n}},o.prototype.divmod=function(t,e,r){var n,a,s;return(i(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var h=r.clone(),f=e.clone();!e.isZero();){for(var c=0,d=1;(e.words[0]&d)==0&&c<26;++c,d<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(h),a.isub(f)),n.iushrn(1),a.iushrn(1);for(var p=0,v=1;(r.words[0]&v)==0&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(h),u.isub(f)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(l)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new o(1),s=new o(0),u=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,h=1;(r.words[0]&h)==0&&l<26;++l,h<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,c=1;(n.words[0]&c)==0&&f<26;++f,c<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(s)):(n.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(y,b),y.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var n=t.words[9];for(i=10,e.words[e.length++]=4194303&n;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(x,b),n(_,b),n(w,b),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=(0|t.words[r])*19+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(m[t])return m[t];if("k256"===t)e=new y;else if("p224"===t)e=new x;else if("p192"===t)e=new _;else if("p25519"===t)e=new w;else throw Error("Unknown prime "+t);return m[t]=e,e},M.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(u);)h.redIAdd(u);for(var f=this.pow(h,n),c=this.pow(t,n.addn(1).iushrn(1)),d=this.pow(t,n),p=a;0!==d.cmp(s);){for(var v=d,g=0;0!==v.cmp(s);g++)v=v.redSqr();i(g<p);var m=this.pow(f,new o(1).iushln(p-g-1));c=c.redMul(m),f=m.redSqr(),d=d.redMul(f),p=g}return c},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=u-1;h>=0;h--){var f=l>>h&1;if(n!==r[0]&&(n=this.sqr(n)),0===f&&0===a){s=0;continue}a<<=1,a|=f,(4==++s||0===i&&0===h)&&(n=this.mul(n,r[a]),s=0,a=0)}u=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},n(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):0>n.cmpn(0)&&(a=n.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:2}],34:[function(t,e,r){"use strict";e.exports=function(t){var e,r,i,n=t.length,o=0;for(e=0;e<n;++e)o+=t[e].length;var a=Array(o),s=0;for(e=0;e<n;++e){var u=t[e],l=u.length;for(r=0;r<l;++r){var h=a[s++]=Array(l-1),f=0;for(i=0;i<l;++i)i!==r&&(h[f++]=u[i]);if(1&r){var c=h[1];h[1]=h[0],h[0]=c}}}return a}},{}],35:[function(t,e,r){"use strict";e.exports=function(t,e,r){switch(arguments.length){case 1:return i=[],u(t,t,l,!0),i;case 2:if("function"==typeof e)return u(t,t,e,!0);return i=[],u(t,e,l,!1),i;case 3:return u(t,e,r,!1);default:throw Error("box-intersect: Invalid arguments")}};var i,n=t("typedarray-pool"),o=t("./lib/sweep"),a=t("./lib/intersect");function s(t,e,r,i){for(var n=0,o=0,a=0,s=t.length;a<s;++a){var u=t[a];if(!function(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}(e,u)){for(var l=0;l<2*e;++l)r[n++]=u[l];i[o++]=a}}return o}function u(t,e,r,i){var u,l=t.length,h=e.length;if(!(l<=0)&&!(h<=0)){var f=t[0].length>>>1;if(!(f<=0)){var c=n.mallocDouble(2*f*l),d=n.mallocInt32(l);if((l=s(t,f,c,d))>0){if(1===f&&i)o.init(l),u=o.sweepComplete(f,r,0,l,c,d,0,l,c,d);else{var p=n.mallocDouble(2*f*h),v=n.mallocInt32(h);(h=s(e,f,p,v))>0&&(o.init(l+h),u=1===f?o.sweepBipartite(f,r,0,l,c,d,0,h,p,v):a(f,r,i,l,c,d,h,p,v),n.free(p),n.free(v))}n.free(c),n.free(d)}return u}}}function l(t,e){i.push([t,e])}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(t,e,r){"use strict";function i(t){return t?function(t,e,r,i,n,o,a,s,u,l,h){return n-i>u-s?function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=i,d=f*i;c<n;++c,d+=f){var p=o[e+d],v=o[e+d+t],g=a[c];t:for(var m=s,b=f*s;m<u;++m,b+=f){var y=l[e+b],x=l[e+b+t],_=h[m];if(!(x<p)&&!(v<y)){for(var w=e+1;w<t;++w){var M=o[w+d],E=o[w+t+d],A=l[w+b],T=l[w+t+b];if(E<A||T<M)continue t}var R=r(g,_);if(void 0!==R)return R}}}}(t,e,r,i,n,o,a,s,u,l,h):function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=s,d=f*s;c<u;++c,d+=f){var p=l[e+d],v=l[e+d+t],g=h[c];t:for(var m=i,b=f*i;m<n;++m,b+=f){var y=o[e+b],x=o[e+b+t],_=a[m];if(!(v<y)&&!(x<p)){for(var w=e+1;w<t;++w){var M=o[w+b],E=o[w+t+b],A=l[w+d],T=l[w+t+d];if(E<A||T<M)continue t}var R=r(_,g);if(void 0!==R)return R}}}}(t,e,r,i,n,o,a,s,u,l,h)}:function(t,e,r,i,n,o,a,s,u,l,h,f){return o-n>l-u?i?function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=i,d=f*i;c<n;++c,d+=f){var p=o[e+d],v=o[e+d+t],g=a[c];t:for(var m=s,b=f*s;m<u;++m,b+=f){var y=l[e+b],x=h[m];if(!(y<=p)&&!(v<y)){for(var _=e+1;_<t;++_){var w=o[_+d],M=o[_+t+d],E=l[_+b],A=l[_+t+b];if(M<E||A<w)continue t}var T=r(x,g);if(void 0!==T)return T}}}}(t,e,r,n,o,a,s,u,l,h,f):function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=i,d=f*i;c<n;++c,d+=f){var p=o[e+d],v=o[e+d+t],g=a[c];t:for(var m=s,b=f*s;m<u;++m,b+=f){var y=l[e+b],x=h[m];if(!(y<p)&&!(v<y)){for(var _=e+1;_<t;++_){var w=o[_+d],M=o[_+t+d],E=l[_+b],A=l[_+t+b];if(M<E||A<w)continue t}var T=r(g,x);if(void 0!==T)return T}}}}(t,e,r,n,o,a,s,u,l,h,f):i?function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=s,d=f*s;c<u;++c,d+=f){var p=l[e+d],v=h[c];t:for(var g=i,m=f*i;g<n;++g,m+=f){var b=o[e+m],y=o[e+m+t],x=a[g];if(!(p<=b)&&!(y<p)){for(var _=e+1;_<t;++_){var w=o[_+m],M=o[_+t+m],E=l[_+d],A=l[_+t+d];if(M<E||A<w)continue t}var T=r(v,x);if(void 0!==T)return T}}}}(t,e,r,n,o,a,s,u,l,h,f):function(t,e,r,i,n,o,a,s,u,l,h){for(var f=2*t,c=s,d=f*s;c<u;++c,d+=f){var p=l[e+d],v=h[c];t:for(var g=i,m=f*i;g<n;++g,m+=f){var b=o[e+m],y=o[e+m+t],x=a[g];if(!(p<b)&&!(y<p)){for(var _=e+1;_<t;++_){var w=o[_+m],M=o[_+t+m],E=l[_+d],A=l[_+t+d];if(M<E||A<w)continue t}var T=r(x,v);if(void 0!==T)return T}}}}(t,e,r,n,o,a,s,u,l,h,f)}}r.partial=i(!1),r.full=i(!0)},{}],37:[function(t,e,r){"use strict";e.exports=function(t,e,r,o,h,x,_,w,M){W=8*n.log2(o+_+1)*(t+1)|0,X=n.nextPow2(6*W),m.length<X&&(i.free(m),m=i.mallocInt32(X)),Y=n.nextPow2(2*W),b.length<Y&&(i.free(b),b=i.mallocDouble(Y));var E=0,A=2*t;for(y(E++,0,0,o,0,_,r?16:0,-1/0,1/0),r||y(E++,0,0,_,0,o,1,-1/0,1/0);E>0;){var T=6*(E-=1),R=m[T],k=m[T+1],S=m[T+2],O=m[T+3],C=m[T+4],L=m[T+5],I=2*E,P=b[I],B=b[I+1],N=1&L,F=!!(16&L),z=h,D=x,U=w,j=M;if(N&&(z=w,D=M,U=h,j=x),!(2&L&&(S=d(t,R,k,S,z,D,B),k>=S)||4&L&&(k=p(t,R,k,S,z,D,P))>=S)){var G=S-k,V=C-O;if(F){if(t*G*(G+V)<4194304){if(void 0!==(q=u.scanComplete(t,R,e,k,S,z,D,O,C,U,j)))return q;continue}}else{if(t*Math.min(G,V)<128){if(void 0!==(q=a(t,R,e,N,k,S,z,D,O,C,U,j)))return q;continue}if(t*G*V<4194304){if(void 0!==(q=u.scanBipartite(t,R,e,N,k,S,z,D,O,C,U,j)))return q;continue}}var H=f(t,R,k,S,z,D,P,B);if(k<H){if(t*(H-k)<128){if(void 0!==(q=s(t,R+1,e,k,H,z,D,O,C,U,j)))return q}else if(R===t-2){if(void 0!==(q=N?u.sweepBipartite(t,e,O,C,U,j,k,H,z,D):u.sweepBipartite(t,e,k,H,z,D,O,C,U,j)))return q}else y(E++,R+1,k,H,O,C,N,-1/0,1/0),y(E++,R+1,O,C,k,H,1^N,-1/0,1/0)}if(H<S){var W,X,Y,q,Z,K=l(t,R,O,C,U,j),Q=U[A*K+R],J=c(t,R,K,C,U,j,Q);if(J<C&&y(E++,R,H,S,J,C,(4|N)+(F?16:0),Q,B),O<K&&y(E++,R,H,S,O,K,(2|N)+(F?16:0),P,Q),K+1===J){if(void 0!==(q=F?function(t,e,r,i,n,o,a,s,u,l){var h=2*t,f=s*h,c=u[f+e];e:for(var d=i,p=i*h;d<n;++d,p+=h){var v=a[d];if(v!==l){var g=o[p+e],m=o[p+e+t];if(!(c<g)&&!(m<c)){for(var b=e+1;b<t;++b){var g=o[p+b],m=o[p+b+t],y=u[f+b],x=u[f+b+t];if(m<y||x<g)continue e}var _=r(v,l);if(void 0!==_)return _}}}}(t,R,e,H,S,z,D,K,U,j[K]):function(t,e,r,i,n,o,a,s,u,l,h){var f=2*t,c=u*f,d=l[c+e];e:for(var p=n,v=n*f;p<o;++p,v+=f){var g,m=a[v+e],b=a[v+e+t];if(!(d<m)&&!(b<d)&&(!i||d!==m)){for(var y=s[p],x=e+1;x<t;++x){var m=a[v+x],b=a[v+x+t],_=l[c+x],w=l[c+x+t];if(b<_||w<m)continue e}if(void 0!==(g=i?r(h,y):r(y,h)))return g}}}(t,R,e,N,H,S,z,D,K,U,j[K])))return q}else if(K<J){if(F){if(Z=v(t,R,H,S,z,D,Q),H<Z){var $=c(t,R,H,Z,z,D,Q);if(R===t-2){if(H<$&&void 0!==(q=u.sweepComplete(t,e,H,$,z,D,K,J,U,j))||$<Z&&void 0!==(q=u.sweepBipartite(t,e,$,Z,z,D,K,J,U,j)))return q}else H<$&&y(E++,R+1,H,$,K,J,16,-1/0,1/0),$<Z&&(y(E++,R+1,$,Z,K,J,0,-1/0,1/0),y(E++,R+1,K,J,$,Z,1,-1/0,1/0))}}else Z=N?g(t,R,H,S,z,D,Q):v(t,R,H,S,z,D,Q),H<Z&&(R===t-2?q=N?u.sweepBipartite(t,e,K,J,U,j,H,Z,z,D):u.sweepBipartite(t,e,H,Z,z,D,K,J,U,j):(y(E++,R+1,H,Z,K,J,N,-1/0,1/0),y(E++,R+1,K,J,H,Z,1^N,-1/0,1/0)))}}}}};var i=t("typedarray-pool"),n=t("bit-twiddle"),o=t("./brute"),a=o.partial,s=o.full,u=t("./sweep"),l=t("./median"),h=t("./partition"),f=h("!(lo>=p0)&&!(p1>=hi)"),c=h("lo===p0"),d=h("lo<p0"),p=h("hi<=p0"),v=h("lo<=p0&&p0<=hi"),g=h("lo<p0&&p0<=hi"),m=i.mallocInt32(1024),b=i.mallocDouble(1024);function y(t,e,r,i,n,o,a,s,u){var l=6*t;m[l]=e,m[l+1]=r,m[l+2]=i,m[l+3]=n,m[l+4]=o,m[l+5]=a;var h=2*t;b[h]=s,b[h+1]=u}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(t,e,r){"use strict";e.exports=function(t,e,r,n,o,a){if(n<=r+1)return r;for(var s=r,u=n,l=n+r>>>1,h=2*t,f=l,c=o[h*l+e];s<u;){if(u-s<8){(function(t,e,r,i,n,o){for(var a=2*t,s=a*(r+1)+e,u=r+1;u<i;++u,s+=a)for(var l=n[s],h=u,f=a*(u-1);h>r&&n[f+e]>l;--h,f-=a){for(var c=f,d=f+a,p=0;p<a;++p,++c,++d){var v=n[c];n[c]=n[d],n[d]=v}var g=o[h];o[h]=o[h-1],o[h-1]=g}})(t,e,s,u,o,a),c=o[h*l+e];break}var d=u-s,p=Math.random()*d+s|0,v=o[h*p+e],g=Math.random()*d+s|0,m=o[h*g+e],b=Math.random()*d+s|0,y=o[h*b+e];v<=m?y>=m?(f=g,c=m):v>=y?(f=p,c=v):(f=b,c=y):m>=y?(f=g,c=m):y>=v?(f=p,c=v):(f=b,c=y);for(var x=h*(u-1),_=h*f,w=0;w<h;++w,++x,++_){var M=o[x];o[x]=o[_],o[_]=M}var E=a[u-1];a[u-1]=a[f],a[f]=E,f=i(t,e,s,u-1,o,a,c);for(var x=h*(u-1),_=h*f,w=0;w<h;++w,++x,++_){var M=o[x];o[x]=o[_],o[_]=M}var E=a[u-1];if(a[u-1]=a[f],a[f]=E,l<f){for(u=f-1;s<u&&o[h*(u-1)+e]===c;)u-=1;u+=1}else if(f<l)for(s=f+1;s<u&&o[h*s+e]===c;)s+=1;else break}return i(t,e,r,l,o,a,o[h*l+e])};var i=t("./partition")("lo<p0")},{"./partition":39}],39:[function(t,e,r){"use strict";e.exports=function(t){return i[t]};var i={"lo===p0":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=r;i>f;++f,u+=s)if(n[u+e]===a){if(h===f)h+=1,l+=s;else{for(var c=0;s>c;++c){var d=n[u+c];n[u+c]=n[l],n[l++]=d}var p=o[f];o[f]=o[h],o[h++]=p}}return h},"lo<p0":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=r;i>f;++f,u+=s)if(n[u+e]<a){if(h===f)h+=1,l+=s;else{for(var c=0;s>c;++c){var d=n[u+c];n[u+c]=n[l],n[l++]=d}var p=o[f];o[f]=o[h],o[h++]=p}}return h},"lo<=p0":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=t+e,c=r;i>c;++c,u+=s)if(n[u+f]<=a){if(h===c)h+=1,l+=s;else{for(var d=0;s>d;++d){var p=n[u+d];n[u+d]=n[l],n[l++]=p}var v=o[c];o[c]=o[h],o[h++]=v}}return h},"hi<=p0":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=t+e,c=r;i>c;++c,u+=s)if(n[u+f]<=a){if(h===c)h+=1,l+=s;else{for(var d=0;s>d;++d){var p=n[u+d];n[u+d]=n[l],n[l++]=p}var v=o[c];o[c]=o[h],o[h++]=v}}return h},"lo<p0&&p0<=hi":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=t+e,c=r;i>c;++c,u+=s){var d=n[u+e],p=n[u+f];if(d<a&&a<=p){if(h===c)h+=1,l+=s;else{for(var v=0;s>v;++v){var g=n[u+v];n[u+v]=n[l],n[l++]=g}var m=o[c];o[c]=o[h],o[h++]=m}}}return h},"lo<=p0&&p0<=hi":function(t,e,r,i,n,o,a){for(var s=2*t,u=s*r,l=u,h=r,f=t+e,c=r;i>c;++c,u+=s){var d=n[u+e],p=n[u+f];if(d<=a&&a<=p){if(h===c)h+=1,l+=s;else{for(var v=0;s>v;++v){var g=n[u+v];n[u+v]=n[l],n[l++]=g}var m=o[c];o[c]=o[h],o[h++]=m}}}return h},"!(lo>=p0)&&!(p1>=hi)":function(t,e,r,i,n,o,a,s){for(var u=2*t,l=u*r,h=l,f=r,c=t+e,d=r;i>d;++d,l+=u){var p=n[l+e],v=n[l+c];if(!(p>=a)&&!(s>=v)){if(f===d)f+=1,h+=u;else{for(var g=0;u>g;++g){var m=n[l+g];n[l+g]=n[h],n[h++]=m}var b=o[d];o[d]=o[f],o[f++]=b}}}return f}}},{}],40:[function(t,e,r){"use strict";function i(t,e,r){for(var i=2*(t+1),n=t+1;n<=e;++n){for(var o=r[i++],a=r[i++],s=n,u=i-2;s-- >t;){var l=r[u-2],h=r[u-1];if(l<o||l===o&&h<a)break;r[u]=l,r[u+1]=h,u-=2}r[u]=o,r[u+1]=a}}function n(t,e,r){e*=2;var i=r[t*=2],n=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=i,r[e+1]=n}function o(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function a(t,e,r,i,n){e*=2,n[t*=2]=n[e],n[e]=r,n[t+1]=n[e+1],n[e+1]=i}function s(t,e,r){e*=2;var i=r[t*=2],n=r[e];return!(i<n)&&(i!==n||r[t+1]>r[e+1])}function u(t,e,r,i){var n=i[t*=2];return n<e||n===e&&i[t+1]<r}e.exports=function(t,e){e<=128?i(0,e-1,t):function t(e,r,l){var h=(r-e+1)/6|0,f=e+h,c=r-h,d=e+r>>1,p=d-h,v=d+h,g=f,m=p,b=d,y=v,x=c,_=e+1,w=r-1,M=0;s(g,m,l)&&(M=g,g=m,m=M),s(y,x,l)&&(M=y,y=x,x=M),s(g,b,l)&&(M=g,g=b,b=M),s(m,b,l)&&(M=m,m=b,b=M),s(g,y,l)&&(M=g,g=y,y=M),s(b,y,l)&&(M=b,b=y,y=M),s(m,x,l)&&(M=m,m=x,x=M),s(m,b,l)&&(M=m,m=b,b=M),s(y,x,l)&&(M=y,y=x,x=M);for(var E=l[2*m],A=l[2*m+1],T=l[2*y],R=l[2*y+1],k=2*g,S=2*b,O=2*x,C=2*f,L=2*d,I=2*c,P=0;P<2;++P){var B=l[k+P],N=l[S+P],F=l[O+P];l[C+P]=B,l[L+P]=N,l[I+P]=F}o(p,e,l),o(v,r,l);for(var z=_;z<=w;++z)if(u(z,E,A,l))z!==_&&n(z,_,l),++_;else if(!u(z,T,R,l))for(;;){if(u(w,T,R,l)){u(w,E,A,l)?(function(t,e,r,i){e*=2,r*=2;var n=i[t*=2],o=i[t+1];i[t]=i[e],i[t+1]=i[e+1],i[e]=i[r],i[e+1]=i[r+1],i[r]=n,i[r+1]=o}(z,_,w,l),++_,--w):(n(z,w,l),--w);break}if(--w<z)break}a(e,_-1,E,A,l),a(r,w+1,T,R,l),_-2-e<=32?i(e,_-2,l):t(e,_-2,l),r-(w+2)<=32?i(w+2,r,l):t(w+2,r,l),w-_<=32?i(_,w,l):t(_,w,l)}(0,e-1,t)}},{}],41:[function(t,e,r){"use strict";e.exports={init:function(t){var e=n.nextPow2(t);a.length<e&&(i.free(a),a=i.mallocInt32(e)),s.length<e&&(i.free(s),s=i.mallocInt32(e)),u.length<e&&(i.free(u),u=i.mallocInt32(e)),l.length<e&&(i.free(l),l=i.mallocInt32(e)),h.length<e&&(i.free(h),h=i.mallocInt32(e)),f.length<e&&(i.free(f),f=i.mallocInt32(e));var r=8*e;c.length<r&&(i.free(c),c=i.mallocDouble(r))},sweepBipartite:function(t,e,r,i,n,h,f,v,g,m){for(var b=0,y=2*t,x=t-1,_=y-1,w=r;w<i;++w){var M=h[w],E=y*w;c[b++]=n[E+x],c[b++]=-(M+1),c[b++]=n[E+_],c[b++]=M}for(var w=f;w<v;++w){var M=m[w]+268435456,A=y*w;c[b++]=g[A+x],c[b++]=-M,c[b++]=g[A+_],c[b++]=M}var T=b>>>1;o(c,T);for(var R=0,k=0,w=0;w<T;++w){var S=0|c[2*w+1];if(S>=268435456)S=S-268435456|0,d(u,l,k--,S);else if(S>=0)d(a,s,R--,S);else if(S<=-268435456){S=-S-268435456|0;for(var O=0;O<R;++O){var C=e(a[O],S);if(void 0!==C)return C}p(u,l,k++,S)}else{S=-S-1|0;for(var O=0;O<k;++O){var C=e(S,u[O]);if(void 0!==C)return C}p(a,s,R++,S)}}},sweepComplete:function(t,e,r,i,n,v,g,m,b,y){for(var x=0,_=2*t,w=t-1,M=_-1,E=r;E<i;++E){var A=v[E]+1<<1,T=_*E;c[x++]=n[T+w],c[x++]=-A,c[x++]=n[T+M],c[x++]=A}for(var E=g;E<m;++E){var A=y[E]+1<<1,R=_*E;c[x++]=b[R+w],c[x++]=1|-A,c[x++]=b[R+M],c[x++]=1|A}var k=x>>>1;o(c,k);for(var S=0,O=0,C=0,E=0;E<k;++E){var L=0|c[2*E+1],I=1&L;if(E<k-1&&L>>1==c[2*E+3]>>1&&(I=2,E+=1),L<0){for(var P=-(L>>1)-1,B=0;B<C;++B){var N=e(h[B],P);if(void 0!==N)return N}if(0!==I)for(var B=0;B<S;++B){var N=e(a[B],P);if(void 0!==N)return N}if(1!==I)for(var B=0;B<O;++B){var N=e(u[B],P);if(void 0!==N)return N}0===I?p(a,s,S++,P):1===I?p(u,l,O++,P):2===I&&p(h,f,C++,P)}else{var P=(L>>1)-1;0===I?d(a,s,S--,P):1===I?d(u,l,O--,P):2===I&&d(h,f,C--,P)}}},scanBipartite:function(t,e,r,i,n,u,l,h,f,v,g,m){var b=0,y=2*t,x=e+t,_=1,w=1;i?w=268435456:_=268435456;for(var M=n;M<u;++M){var E=M+_,A=y*M;c[b++]=l[A+e],c[b++]=-E,c[b++]=l[A+x],c[b++]=E}for(var M=f;M<v;++M){var E=M+w,T=y*M;c[b++]=g[T+e],c[b++]=-E}var R=b>>>1;o(c,R);for(var k=0,M=0;M<R;++M){var S=0|c[2*M+1];if(S<0){var E=-S,O=!1;if(E>=268435456?(O=!i,E-=268435456):(O=!!i,E-=1),O)p(a,s,k++,E);else{var C=m[E],L=y*E,I=g[L+e+1],P=g[L+e+1+t];e:for(var B=0;B<k;++B){var N,F=a[B],z=y*F;if(!(P<l[z+e+1])&&!(l[z+e+1+t]<I)){for(var D=e+2;D<t;++D)if(g[L+D+t]<l[z+D]||l[z+D+t]<g[L+D])continue e;var U=h[F];if(void 0!==(N=i?r(C,U):r(U,C)))return N}}}}else d(a,s,k--,S-_)}},scanComplete:function(t,e,r,i,n,s,u,l,h,f,d){for(var p=0,v=2*t,g=e+t,m=i;m<n;++m){var b=m+268435456,y=v*m;c[p++]=s[y+e],c[p++]=-b,c[p++]=s[y+g],c[p++]=b}for(var m=l;m<h;++m){var b=m+1,x=v*m;c[p++]=f[x+e],c[p++]=-b}var _=p>>>1;o(c,_);for(var w=0,m=0;m<_;++m){var M=0|c[2*m+1];if(M<0){var b=-M;if(b>=268435456)a[w++]=b-268435456;else{var E=d[b-=1],A=v*b,T=f[A+e+1],R=f[A+e+1+t];e:for(var k=0;k<w;++k){var S=a[k],O=u[S];if(O===E)break;var C=v*S;if(!(R<s[C+e+1])&&!(s[C+e+1+t]<T)){for(var L=e+2;L<t;++L)if(f[A+L+t]<s[C+L]||s[C+L+t]<f[A+L])continue e;var I=r(O,E);if(void 0!==I)return I}}}}else{for(var b=M-268435456,k=w-1;k>=0;--k)if(a[k]===b){for(var L=k+1;L<w;++L)a[L-1]=a[L];break}--w}}}};var i=t("typedarray-pool"),n=t("bit-twiddle"),o=t("./sort"),a=i.mallocInt32(1024),s=i.mallocInt32(1024),u=i.mallocInt32(1024),l=i.mallocInt32(1024),h=i.mallocInt32(1024),f=i.mallocInt32(1024),c=i.mallocDouble(8192);function d(t,e,r,i){var n=e[i],o=t[r-1];t[n]=o,e[o]=n}function p(t,e,r,i){t[r]=i,e[i]=r}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(t,e,r){"use strict";var i=t("./lib/monotone"),n=t("./lib/triangulation"),o=t("./lib/delaunay"),a=t("./lib/filter");function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function u(t,e){return t[0]-e[0]||t[1]-e[1]}function l(t,e,r){return e in t?t[e]:r}e.exports=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var h=!!l(r,"delaunay",!0),f=!!l(r,"interior",!0),c=!!l(r,"exterior",!0),d=!!l(r,"infinity",!1);if(!f&&!c||0===t.length)return[];var p=i(t,e);if(!h&&f===c&&!d)return p;for(var v=n(t.length,e.map(s).sort(u)),g=0;g<p.length;++g){var m=p[g];v.addTriangle(m[0],m[1],m[2])}return(h&&o(t,v),c)?f?d?a(v,0,d):v.cells():a(v,1,d):a(v,-1)}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(t,e,r){"use strict";var i=t("robust-in-sphere")[4];function n(t,e,r,n,o,a){var s=e.opposite(n,o);if(!(s<0)){if(o<n){var u=n;n=o,o=u,u=a,a=s,s=u}!e.isConstraint(n,o)&&0>i(t[n],t[o],t[a],t[s])&&r.push(n,o)}}t("binary-search-bounds"),e.exports=function(t,e){for(var r=[],o=t.length,a=e.stars,s=0;s<o;++s)for(var u=a[s],l=1;l<u.length;l+=2){var h=u[l];if(!(h<s||e.isConstraint(s,h))){for(var f=u[l-1],c=-1,d=1;d<u.length;d+=2)if(u[d-1]===h){c=u[d];break}!(c<0)&&0>i(t[s],t[h],t[f],t[c])&&r.push(s,h)}}for(;r.length>0;){for(var h=r.pop(),s=r.pop(),f=-1,c=-1,u=a[s],p=1;p<u.length;p+=2){var v=u[p-1],g=u[p];v===h?c=g:g===h&&(f=v)}f<0||c<0||i(t[s],t[h],t[f],t[c])>=0||(e.flip(s,h),n(t,e,r,f,s,c),n(t,e,r,s,c,f),n(t,e,r,c,h,f),n(t,e,r,h,f,c))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(t,e,r){"use strict";var i,n=t("binary-search-bounds");function o(t,e,r,i,n,o,a){this.cells=t,this.neighbor=e,this.flags=i,this.constraint=r,this.active=n,this.next=o,this.boundary=a}function a(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}e.exports=function(t,e,r){var i=function(t,e){for(var r=t.cells(),i=r.length,n=0;n<i;++n){var s=r[n],u=s[0],l=s[1],h=s[2];l<h?l<u&&(s[0]=l,s[1]=h,s[2]=u):h<u&&(s[0]=h,s[1]=u,s[2]=l)}r.sort(a);for(var f=Array(i),n=0;n<f.length;++n)f[n]=0;var c=[],d=[],p=Array(3*i),v=Array(3*i),g=null;e&&(g=[]);for(var m=new o(r,p,v,f,c,d,g),n=0;n<i;++n)for(var s=r[n],b=0;b<3;++b){var u=s[b],l=s[(b+1)%3],y=p[3*n+b]=m.locate(l,u,t.opposite(l,u)),x=v[3*n+b]=t.isConstraint(u,l);y<0&&(x?d.push(n):(c.push(n),f[n]=1),e&&g.push([l,u,-1]))}return m}(t,r);if(0===e)return r?i.cells.concat(i.boundary):i.cells;for(var n=1,s=i.active,u=i.next,l=i.flags,h=i.cells,f=i.constraint,c=i.neighbor;s.length>0||u.length>0;){for(;s.length>0;){var d=s.pop();if(l[d]!==-n){l[d]=n,h[d];for(var p=0;p<3;++p){var v=c[3*d+p];v>=0&&0===l[v]&&(f[3*d+p]?u.push(v):(s.push(v),l[v]=n))}}}var g=u;u=s,s=g,u.length=0,n=-n}var m=function(t,e,r){for(var i=0,n=0;n<t.length;++n)e[n]===r&&(t[i++]=t[n]);return t.length=i,t}(h,l,e);return r?m.concat(i.boundary):m},o.prototype.locate=(i=[0,0,0],function(t,e,r){var o=t,s=e,u=r;return(e<r?e<t&&(o=e,s=r,u=t):r<t&&(o=r,s=t,u=e),o<0)?-1:(i[0]=o,i[1]=s,i[2]=u,n.eq(this.cells,i,a))})},{"binary-search-bounds":31}],45:[function(t,e,r){"use strict";var i=t("binary-search-bounds"),n=t("robust-orientation")[3];function o(t,e,r,i,n){this.a=t,this.b=e,this.idx=r,this.lowerIds=i,this.upperIds=n}function a(t,e,r,i){this.a=t,this.b=e,this.type=r,this.idx=i}function s(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||0!==t.type&&(r=n(t.a,t.b,e.b))?r:t.idx-e.idx}function u(t,e){return n(t.a,t.b,e)}function l(t,e){var r;return(r=t.a[0]<e.a[0]?n(t.a,t.b,e.a):n(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?n(t.a,t.b,e.b):n(e.b,e.a,t.b))||t.idx-e.idx}e.exports=function(t,e){for(var r=t.length,h=e.length,f=[],c=0;c<r;++c)f.push(new a(t[c],null,0,c));for(var c=0;c<h;++c){var d=e[c],p=t[d[0]],v=t[d[1]];p[0]<v[0]?f.push(new a(p,v,2,c),new a(v,p,1,c)):p[0]>v[0]&&f.push(new a(v,p,2,c),new a(p,v,1,c))}f.sort(s);for(var g=f[0].a[0]-(1+Math.abs(f[0].a[0]))*2220446049250313e-31,m=[new o([g,1],[g,0],-1,[],[],[],[])],b=[],c=0,y=f.length;c<y;++c){var x=f[c],_=x.type;0===_?function(t,e,r,o,a){for(var s=i.lt(e,o,u),l=i.gt(e,o,u),h=s;h<l;++h){for(var f=e[h],c=f.lowerIds,d=c.length;d>1&&n(r[c[d-2]],r[c[d-1]],o)>0;)t.push([c[d-1],c[d-2],a]),d-=1;c.length=d,c.push(a);for(var p=f.upperIds,d=p.length;d>1&&0>n(r[p[d-2]],r[p[d-1]],o);)t.push([p[d-2],p[d-1],a]),d-=1;p.length=d,p.push(a)}}(b,m,t,x.a,x.idx):2===_?function(t,e,r){var n=i.le(t,r,l),a=t[n],s=a.upperIds,u=s[s.length-1];a.upperIds=[u],t.splice(n+1,0,new o(r.a,r.b,r.idx,[u],s))}(m,0,x):function(t,e,r){var n=r.a;r.a=r.b,r.b=n;var o=i.eq(t,r,l),a=t[o];t[o-1].upperIds=a.upperIds,t.splice(o,1)}(m,0,x)}return b}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(t,e,r){"use strict";var i=t("binary-search-bounds");function n(t,e){this.stars=t,this.edges=e}e.exports=function(t,e){for(var r=Array(t),i=0;i<t;++i)r[i]=[];return new n(r,e)};var o=n.prototype;function a(t,e,r){for(var i=1,n=t.length;i<n;i+=2)if(t[i-1]===e&&t[i]===r){t[i-1]=t[n-2],t[i]=t[n-1],t.length=n-2;return}}o.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),i.eq(this.edges,t,e)>=0}}(),o.removeTriangle=function(t,e,r){var i=this.stars;a(i[t],e,r),a(i[e],r,t),a(i[r],t,e)},o.addTriangle=function(t,e,r){var i=this.stars;i[t].push(e,r),i[e].push(r,t),i[r].push(t,e)},o.opposite=function(t,e){for(var r=this.stars[e],i=1,n=r.length;i<n;i+=2)if(r[i]===t)return r[i-1];return -1},o.flip=function(t,e){var r=this.opposite(t,e),i=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,i),this.addTriangle(t,i,r),this.addTriangle(e,r,i)},o.edges=function(){for(var t=this.stars,e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],o=0,a=n.length;o<a;o+=2)e.push([n[o],n[o+1]]);return e},o.cells=function(){for(var t=this.stars,e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],o=0,a=n.length;o<a;o+=2){var s=n[o],u=n[o+1];r<Math.min(s,u)&&e.push([r,s,u])}return e}},{"binary-search-bounds":31}],47:[function(t,e,r){"use strict";e.exports=function(t){for(var e=1,r=1;r<t.length;++r)for(var i=0;i<r;++i)if(t[r]<t[i])e=-e;else if(t[i]===t[r])return 0;return e}},{}],48:[function(t,e,r){"use strict";var i=t("dup"),n=t("robust-linear-solve");function o(t,e){for(var r=0,i=t.length,n=0;n<i;++n)r+=t[n]*e[n];return r}function a(t){var e=t.length;if(0===e)return[];t[0].length;var r=i([t.length+1,t.length+1],1),a=i([t.length+1],1);r[e][e]=0;for(var s=0;s<e;++s){for(var u=0;u<=s;++u)r[u][s]=r[s][u]=2*o(t[s],t[u]);a[s]=o(t[s],t[s])}for(var l=n(r,a),h=0,f=l[e+1],s=0;s<f.length;++s)h+=f[s];for(var c=Array(e),s=0;s<e;++s){for(var f=l[s],d=0,u=0;u<f.length;++u)d+=f[u];c[s]=d/h}return c}function s(t){if(0===t.length)return[];for(var e=t[0].length,r=i([e]),n=a(t),o=0;o<t.length;++o)for(var s=0;s<e;++s)r[s]+=t[o][s]*n[o];return r}s.barycenetric=a,e.exports=s},{dup:65,"robust-linear-solve":283}],49:[function(t,e,r){e.exports=function(t){for(var e=i(t),r=0,n=0;n<t.length;++n)for(var o=t[n],a=0;a<e.length;++a)r+=Math.pow(o[a]-e[a],2);return Math.sqrt(r/t.length)};var i=t("circumcenter")},{circumcenter:48}],50:[function(t,e,r){"use strict";e.exports=function(t,e,r){if(r){A=e;for(var i,c,v,g,b,y,x,_,w,M,E,A,T=Array(e.length),R=0;R<e.length;++R){var k=e[R];T[R]=[k[0],k[1],r[R]]}e=T}for(var S=(i=e,c=!!r,m(i,v=p(t,[],d(t)),c),!!v);g=e,b=!!r,y=function(t,e){for(var r=Array(e.length),i=0;i<e.length;++i){var n=e[i],o=t[n[0]],a=t[n[1]];r[i]=[h(Math.min(o[0],a[0]),-1/0),h(Math.min(o[1],a[1]),-1/0),h(Math.max(o[0],a[0]),1/0),h(Math.max(o[1],a[1]),1/0)]}return r}(t,g),x=[],n(y,function(e,r){var i=g[e],n=g[r];i[0]!==n[0]&&i[0]!==n[1]&&i[1]!==n[0]&&i[1]!==n[1]&&o(t[i[0]],t[i[1]],t[n[0]],t[n[1]])&&x.push([e,r])}),_=d(t),w=[],n(y,_,function(e,r){var i=g[e];if(i[0]!==r&&i[1]!==r){var n=t[r];o(t[i[0]],t[i[1]],n,n)&&w.push([e,r])}}),M=function(t,e,r,i,n){var o=t.map(function(t){return[a(t[0]),a(t[1])]});for(m=0;m<r.length;++m){var h=r[m];b=h[0];var c=h[1],d=e[b],p=e[c],v=f(l(t[d[0]]),l(t[d[1]]),l(t[p[0]]),l(t[p[1]]));if(v){var g=t.length;t.push([u(v[0]),u(v[1])]),o.push(v),i.push([b,g],[c,g])}}for(i.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=o[t[1]],i=o[e[1]];return s(r[0],i[0])||s(r[1],i[1])}),m=i.length-1;m>=0;--m){var m,b,y,x=i[m],_=e[b=x[0]],w=_[0],M=_[1],E=t[w],A=t[M];if(0>(E[0]-A[0]||E[1]-A[1])){var T=w;w=M,M=T}_[0]=w;var R=_[1]=x[1];for(n&&(y=_[2]);m>0&&i[m-1][0]===b;){var x=i[--m],k=x[1];n?e.push([R,k,y]):e.push([R,k]),R=k}n?e.push([R,M,y]):e.push([R,M])}return o}(t,g,x,w,b),m(g,E=p(t,M,_),b),E||x.length>0||w.length>0;)S=!0;if(r&&S){A.length=0,r.length=0;for(var R=0;R<e.length;++R){var k=e[R];A.push([k[0],k[1]]),r.push(k[2])}}return S};var i=t("union-find"),n=t("box-intersect"),o=t("robust-segment-intersect"),a=t("big-rat"),s=t("big-rat/cmp"),u=t("big-rat/to-float"),l=t("rat-vec"),h=t("nextafter"),f=t("./lib/rat-seg-intersect");function c(t){var e=u(t);return[h(e,-1/0),h(e,1/0)]}function d(t){for(var e=Array(t.length),r=0;r<t.length;++r){var i=t[r];e[r]=[h(i[0],-1/0),h(i[1],-1/0),h(i[0],1/0),h(i[1],1/0)]}return e}function p(t,e,r){for(var o=e.length,a=new i(o),s=[],u=0;u<e.length;++u){var l=e[u],f=c(l[0]),d=c(l[1]);s.push([h(f[0],-1/0),h(d[0],-1/0),h(f[1],1/0),h(d[1],1/0)])}n(s,function(t,e){a.link(t,e)});for(var p=!0,v=Array(o),u=0;u<o;++u){var g=a.find(u);g!==u&&(p=!1,t[g]=[Math.min(t[u][0],t[g][0]),Math.min(t[u][1],t[g][1])])}if(p)return null;for(var m=0,u=0;u<o;++u){var g=a.find(u);g===u?(v[u]=m,t[m++]=t[u]):v[u]=-1}t.length=m;for(var u=0;u<o;++u)v[u]<0&&(v[u]=v[a.find(u)]);return v}function v(t,e){return t[0]-e[0]||t[1]-e[1]}function g(t,e){return t[0]-e[0]||t[1]-e[1]||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function m(t,e,r){if(0!==t.length){if(e)for(var i=0;i<t.length;++i){var n=t[i],o=e[n[0]],a=e[n[1]];n[0]=Math.min(o,a),n[1]=Math.max(o,a)}else for(var i=0;i<t.length;++i){var n=t[i],o=n[0],a=n[1];n[0]=Math.min(o,a),n[1]=Math.max(o,a)}r?t.sort(g):t.sort(v);for(var s=1,i=1;i<t.length;++i){var u=t[i-1],l=t[i];(l[0]!==u[0]||l[1]!==u[1]||r&&l[2]!==u[2])&&(t[s++]=l)}t.length=s}}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){var o=s(e,t),f=s(i,r),c=h(o,f);if(0===a(c))return null;var d=n(h(f,s(t,r)),c),p=l(o,d);return u(t,p)};var i=t("big-rat/mul"),n=t("big-rat/div"),o=t("big-rat/sub"),a=t("big-rat/sign"),s=t("rat-vec/sub"),u=t("rat-vec/add"),l=t("rat-vec/muls");function h(t,e){return o(i(t[0],e[1]),i(t[1],e[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(t,e,r){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(t,e,r){"use strict";var i=t("./colorScale"),n=t("lerp");function o(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function a(t){for(var e,r="#",i=0;i<3;++i)r+=("00"+(e=(e=t[i]).toString(16))).substr(e.length);return r}function s(t){return"rgba("+t.join(",")+")"}e.exports=function(t){if(t||(t={}),d=(t.nshades||72)-1,c=t.format||"hex",(f=t.colormap)||(f="jet"),"string"==typeof f){if(!i[f=f.toLowerCase()])throw Error(f+" not a supported colorscale");h=i[f]}else if(Array.isArray(f))h=f.slice();else throw Error("unsupported colormap option",f);if(h.length>d+1)throw Error(f+" map requires nshades to be at least size "+h.length);v=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1],e=h.map(function(t){return Math.round(t.index*d)}),v[0]=Math.min(Math.max(v[0],0),1),v[1]=Math.min(Math.max(v[1],0),1);var e,r,u,l,h,f,c,d,p,v,g,m=h.map(function(t,e){var r=h[e].index,i=h[e].rgb.slice();return 4===i.length&&i[3]>=0&&i[3]<=1||(i[3]=v[0]+(v[1]-v[0])*r),i}),p=[];for(g=0;g<e.length-1;++g){l=e[g+1]-e[g],r=m[g],u=m[g+1];for(var b=0;b<l;b++){var y=b/l;p.push([Math.round(n(r[0],u[0],y)),Math.round(n(r[1],u[1],y)),Math.round(n(r[2],u[2],y)),n(r[3],u[3],y)])}}return p.push(h[h.length-1].rgb.concat(v[1])),"hex"===c?p=p.map(a):"rgbaString"===c?p=p.map(s):"float"===c&&(p=p.map(o)),p}},{"./colorScale":52,lerp:240}],54:[function(t,e,r){"use strict";e.exports=function(t,e,r,o){var a=i(e,r,o);if(0===a){var s=n(i(t,e,r)),l=n(i(t,e,o));if(s===l){if(0===s){var h=u(t,e,r);if(h===u(t,e,o));else if(h)return 1;else return -1}return 0}return 0===l?s>0?-1:u(t,e,o)?-1:1:0===s?l>0?1:u(t,e,r)?1:-1:n(l-s)}var f=i(t,e,r);return f>0?a>0&&i(t,e,o)>0?1:-1:f<0?a>0||i(t,e,o)>0?1:-1:i(t,e,o)>0?1:u(t,e,r)?1:-1};var i=t("robust-orientation"),n=t("signum"),o=t("two-sum"),a=t("robust-product"),s=t("robust-sum");function u(t,e,r){var i=o(t[0],-e[0]),n=o(t[1],-e[1]),u=o(r[0],-e[0]),l=o(r[1],-e[1]),h=s(a(i,u),a(n,l));return h[h.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(t,e,r){"use strict";e.exports=function(t){return t<0?-1:t>0?1:0}},{}],56:[function(t,e,r){e.exports=function(t,e){var r=t.length,o=t.length-e.length;if(o)return o;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return t[0]+t[1]-e[0]-e[1]||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var u=i(t[0],t[1]),l=i(e[0],e[1]);return i(u,t[2])-i(l,e[2])||i(u+t[2],a)-i(l+e[2],s);case 4:var h=t[0],f=t[1],c=t[2],d=t[3],p=e[0],v=e[1],g=e[2],m=e[3];return h+f+c+d-(p+v+g+m)||i(h,f,c,d)-i(p,v,g,m,p)||i(h+f,h+c,h+d,f+c,f+d,c+d)-i(p+v,p+g,p+m,v+g,v+m,g+m)||i(h+f+c,h+f+d,h+c+d,f+c+d)-i(p+v+g,p+v+m,p+g+m,v+g+m);default:for(var b=t.slice().sort(n),y=e.slice().sort(n),x=0;x<r;++x)if(o=b[x]-y[x])return o;return 0}};var i=Math.min;function n(t,e){return t-e}},{}],57:[function(t,e,r){"use strict";var i=t("compare-cell"),n=t("cell-orientation");e.exports=function(t,e){return i(t,e)||n(t)-n(e)}},{"cell-orientation":47,"compare-cell":56}],58:[function(t,e,r){"use strict";var i=t("./lib/ch1d"),n=t("./lib/ch2d"),o=t("./lib/chnd");e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;return 0===r?[]:1===r?i(t):2===r?n(t):o(t,r)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(t,e,r){"use strict";e.exports=function(t){for(var e=0,r=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[r][0]&&(r=i);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}},{}],60:[function(t,e,r){"use strict";e.exports=function(t){var e=i(t),r=e.length;if(r<=2)return[];for(var n=Array(r),o=e[r-1],a=0;a<r;++a){var s=e[a];n[a]=[o,s],o=s}return n};var i=t("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(t,e,r){"use strict";e.exports=function(t,e){try{return i(t,!0)}catch(o){var r=n(t);if(r.length<=e)return[];return function(t,e){for(var r=t.length,i=e.length,n=0;n<r;++n)for(var o=t[n],a=0;a<o.length;++a){var s=o[a];if(s<i)o[a]=e[s];else{s-=i;for(var u=0;u<i;++u)s>=e[u]&&(s+=1);o[a]=s}}return t}(i(function(t,e){for(var r=t.length,i=Array(r),n=0;n<e.length;++n)i[n]=t[e[n]];for(var o=e.length,n=0;n<r;++n)0>e.indexOf(n)&&(i[o++]=t[n]);return i}(t,r),!0),r)}};var i=t("incremental-convex-hull"),n=t("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n,o){var a=n-1,s=n*n,u=a*a,l=(1+2*n)*u,h=n*u,f=s*(3-2*n),c=s*a;if(t.length){o||(o=Array(t.length));for(var d=t.length-1;d>=0;--d)o[d]=l*t[d]+h*e[d]+f*r[d]+c*i[d];return o}return l*t+h*e+f*r+c*i},e.exports.derivative=function(t,e,r,i,n,o){var a=6*n*n-6*n,s=3*n*n-4*n+1,u=-6*n*n+6*n,l=3*n*n-2*n;if(t.length){o||(o=Array(t.length));for(var h=t.length-1;h>=0;--h)o[h]=a*t[h]+s*e[h]+u*r[h]+l*i[h];return o}return a*t+s*e+u*r[h]+l*i}},{}],63:[function(t,e,r){"use strict";var i=t("incremental-convex-hull"),n=t("uniq");function o(t,e){this.point=t,this.index=e}function a(t,e){for(var r=t.point,i=e.point,n=r.length,o=0;o<n;++o){var a=i[o]-r[o];if(a)return a}return 0}e.exports=function(t,e){var r=t.length;if(0===r)return[];var s=t[0].length;if(s<1)return[];if(1===s)return function(t,e,r){if(1===t)return r?[[-1,0]]:[];var i=e.map(function(t,e){return[t[0],e]});i.sort(function(t,e){return t[0]-e[0]});for(var n=Array(t-1),o=1;o<t;++o){var a=i[o-1],s=i[o];n[o-1]=[a[1],s[1]]}return r&&n.push([-1,n[0][1]],[n[t-1][1],-1]),n}(r,t,e);for(var u=Array(r),l=1,h=0;h<r;++h){for(var f=t[h],c=Array(s+1),d=0,p=0;p<s;++p){var v=f[p];c[p]=v,d+=v*v}c[s]=d,u[h]=new o(c,h),l=Math.max(d,l)}n(u,a);for(var g=Array((r=u.length)+s+1),m=Array(r+s+1),b=(s+1)*(s+1)*l,y=Array(s+1),h=0;h<=s;++h)y[h]=0;y[s]=b,g[0]=y.slice(),m[0]=-1;for(var h=0;h<=s;++h){var c=y.slice();c[h]=1,g[h+1]=c,m[h+1]=-1}for(var h=0;h<r;++h){var x=u[h];g[h+s+1]=x.point,m[h+s+1]=x.index}var _=i(g,!1);if(_=e?_.filter(function(t){for(var e=0,r=0;r<=s;++r){var i=m[t[r]];if(i<0&&++e>=2)return!1;t[r]=i}return!0}):_.filter(function(t){for(var e=0;e<=s;++e){var r=m[t[e]];if(r<0)return!1;t[e]=r}return!0}),1&s)for(var h=0;h<_.length;++h){var x=_[h],c=x[0];x[0]=x[1],x[1]=c}return _}},{"incremental-convex-hull":233,uniq:310}],64:[function(t,e,r){(function(t){(function(){var r=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),n=new Uint32Array(i.buffer);(i[0]=1,r=!0,1072693248===n[1])?(e.exports=function(t){return i[0]=t,[n[0],n[1]]},e.exports.pack=function(t,e){return n[0]=t,n[1]=e,i[0]},e.exports.lo=function(t){return i[0]=t,n[0]},e.exports.hi=function(t){return i[0]=t,n[1]}):1072693248===n[0]?(e.exports=function(t){return i[0]=t,[n[1],n[0]]},e.exports.pack=function(t,e){return n[1]=t,n[0]=e,i[0]},e.exports.lo=function(t){return i[0]=t,n[1]},e.exports.hi=function(t){return i[0]=t,n[0]}):r=!1}if(!r){var o=new t(8);e.exports=function(t){return o.writeDoubleLE(t,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},e.exports.pack=function(t,e){return o.writeUInt32LE(t,0,!0),o.writeUInt32LE(e,4,!0),o.readDoubleLE(0,!0)},e.exports.lo=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(0,!0)},e.exports.hi=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(4,!0)}}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var r=e.exports.lo(t),i=e.exports.hi(t),n=1048575&i;return 2146435072&i&&(n+=1048576),[r,n]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:3}],65:[function(t,e,r){"use strict";e.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,i;for(i=0,r=Array(t);i<t;++i)r[i]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,i){var n=0|e[i];if(n<=0)return[];var o,a=Array(n);if(i===e.length-1)for(o=0;o<n;++o)a[o]=r;else for(o=0;o<n;++o)a[o]=t(e,r,i+1);return a}(t,e,0)}return[]}},{}],66:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var n=0;n<r;++n){var o=t[n];e=Math.max(e,o[0],o[1])}e=(0|e)+1}for(var a=Array(e|=0),n=0;n<e;++n)a[n]=[];for(var n=0;n<r;++n){var o=t[n];a[o[0]].push(o[1]),a[o[1]].push(o[0])}for(var s=0;s<e;++s)i(a[s],function(t,e){return t-e});return a};var i=t("uniq")},{uniq:310}],67:[function(t,e,r){"use strict";e.exports=function(t,e,r){var i=e||0,n=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[i*t[12]+t[8],i*t[13]+t[9],i*t[14]+t[10],i*t[15]+t[11]],[n*t[12]-t[8],n*t[13]-t[9],n*t[14]-t[10],n*t[15]-t[11]]]}},{}],68:[function(t,e,r){"use strict";e.exports=function(t,e,r){switch(arguments.length){case 0:return new a([0],[0],0);case 1:if("number"!=typeof t)return new a(t,u(t.length),0);var i=u(t);return new a(i,i,0);case 2:if("number"==typeof e){var i=u(t.length);return new a(t,i,+e)}r=0;case 3:if(t.length!==e.length)throw Error("state and velocity lengths must match");return new a(t,e,r)}};var i=t("cubic-hermite"),n=t("binary-search-bounds");function o(t,e,r){return Math.min(e,Math.max(t,r))}function a(t,e,r){this.dimension=t.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=a.prototype;function u(t){for(var e=Array(t),r=0;r<t;++r)e[r]=0;return e}s.flush=function(t){var e=n.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,r=e.length,a=n.le(e,t),s=this._scratch[0],u=this._state,l=this._velocity,h=this.dimension,f=this.bounds;if(a<0)for(var c=h-1,d=0;d<h;++d,--c)s[d]=u[c];else if(a>=r-1)for(var c=u.length-1,p=t-e[r-1],d=0;d<h;++d,--c)s[d]=u[c]+p*l[c];else{for(var c=h*(a+1)-1,v=e[a],g=e[a+1]-v||1,m=this._scratch[1],b=this._scratch[2],y=this._scratch[3],x=this._scratch[4],_=!0,d=0;d<h;++d,--c)m[d]=u[c],y[d]=l[c]*g,b[d]=u[c+h],x[d]=l[c+h]*g,_=_&&m[d]===b[d]&&y[d]===x[d]&&0===y[d];if(_)for(var d=0;d<h;++d)s[d]=m[d];else i(m,y,b,x,(t-v)/g,s)}for(var w=f[0],M=f[1],d=0;d<h;++d)s[d]=o(w[d],M[d],s[d]);return s},s.dcurve=function(t){var e=this._time,r=e.length,o=n.le(e,t),a=this._scratch[0],s=this._state,u=this._velocity,l=this.dimension;if(o>=r-1){var h=s.length-1;e[r-1];for(var f=0;f<l;++f,--h)a[f]=u[h]}else{for(var h=l*(o+1)-1,c=e[o],d=e[o+1]-c||1,p=this._scratch[1],v=this._scratch[2],g=this._scratch[3],m=this._scratch[4],b=!0,f=0;f<l;++f,--h)p[f]=s[h],g[f]=u[h]*d,v[f]=s[h+l],m[f]=u[h+l]*d,b=b&&p[f]===v[f]&&g[f]===m[f]&&0===g[f];if(b)for(var f=0;f<l;++f)a[f]=0;else{i.derivative(p,g,v,m,(t-c)/d,a);for(var f=0;f<l;++f)a[f]/=d}}return a},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e)&&arguments.length===r+1){var i=this._state,n=this._velocity,a=i.length-this.dimension,s=this.bounds,u=s[0],l=s[1];this._time.push(e,t);for(var h=0;h<2;++h)for(var f=0;f<r;++f)i.push(i[a++]),n.push(0);this._time.push(t);for(var f=r;f>0;--f)i.push(o(u[f-1],l[f-1],arguments[f])),n.push(0)}},s.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e)&&arguments.length===r+1){var i=this._state,n=this._velocity,a=i.length-this.dimension,s=t-e,u=this.bounds,l=u[0],h=u[1],f=s>1e-6?1/s:0;this._time.push(t);for(var c=r;c>0;--c){var d=o(l[c-1],h[c-1],arguments[c]);i.push(d),n.push((d-i[a++])*f)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT())&&arguments.length===e+1){var r=this._state,i=this._velocity,n=this.bounds,a=n[0],s=n[1];this._time.push(t);for(var u=e;u>0;--u)r.push(o(a[u-1],s[u-1],arguments[u])),i.push(0)}},s.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e)&&arguments.length===r+1){var i=this._state,n=this._velocity,a=i.length-this.dimension,s=this.bounds,u=s[0],l=s[1],h=t-e,f=h>1e-6?1/h:0;this._time.push(t);for(var c=r;c>0;--c){var d=arguments[c];i.push(o(u[c-1],l[c-1],i[a++]+d)),n.push(d*f)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,i=this._state,n=this._velocity,a=i.length-r,s=this.bounds,u=s[0],l=s[1],h=t-e;this._time.push(t);for(var f=r-1;f>=0;--f)i.push(o(u[f],l[f],i[a]+h*n[a])),n.push(0),a+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(t,e,r){"use strict";function i(t,e,r,i,n,o){this._color=t,this.key=e,this.value=r,this.left=i,this.right=n,this._count=o}function n(t){return new i(t._color,t.key,t.value,t.left,t.right,t._count)}function o(t,e){return new i(t,e.key,e.value,e.left,e.right,e._count)}function a(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function s(t,e){this._compare=t,this.root=e}e.exports=function(t){return new s(t||c,null)};var u=s.prototype;function l(t,e){this.tree=t,this._stack=e}Object.defineProperty(u,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(u,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(t,e){for(var r=this._compare,n=this.root,u=[],l=[];n;){var h=r(t,n.key);u.push(n),l.push(h),n=h<=0?n.left:n.right}u.push(new i(0,t,e,null,null,1));for(var f=u.length-2;f>=0;--f){var n=u[f];l[f]<=0?u[f]=new i(n._color,n.key,n.value,u[f+1],n.right,n._count+1):u[f]=new i(n._color,n.key,n.value,n.left,u[f+1],n._count+1)}for(var f=u.length-1;f>1;--f){var c=u[f-1],n=u[f];if(1===c._color||1===n._color)break;var d=u[f-2];if(d.left===c){if(c.left===n){var p=d.right;if(p&&0===p._color)c._color=1,d.right=o(1,p),d._color=0,f-=1;else{if(d._color=0,d.left=c.right,c._color=1,c.right=d,u[f-2]=c,u[f-1]=n,a(d),a(c),f>=3){var v=u[f-3];v.left===d?v.left=c:v.right=c}break}}else{var p=d.right;if(p&&0===p._color)c._color=1,d.right=o(1,p),d._color=0,f-=1;else{if(c.right=n.left,d._color=0,d.left=n.right,n._color=1,n.left=c,n.right=d,u[f-2]=n,u[f-1]=c,a(d),a(c),a(n),f>=3){var v=u[f-3];v.left===d?v.left=n:v.right=n}break}}}else if(c.right===n){var p=d.left;if(p&&0===p._color)c._color=1,d.left=o(1,p),d._color=0,f-=1;else{if(d._color=0,d.right=c.left,c._color=1,c.left=d,u[f-2]=c,u[f-1]=n,a(d),a(c),f>=3){var v=u[f-3];v.right===d?v.right=c:v.left=c}break}}else{var p=d.left;if(p&&0===p._color)c._color=1,d.left=o(1,p),d._color=0,f-=1;else{if(c.left=n.right,d._color=0,d.right=n.left,n._color=1,n.right=c,n.left=d,u[f-2]=n,u[f-1]=c,a(d),a(c),a(n),f>=3){var v=u[f-3];v.right===d?v.right=n:v.left=n}break}}}return u[0]._color=1,new s(r,u[0])},u.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){if(r.left){var i=t(e,r.left);if(i)return i}var i=e(r.key,r.value);return i||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,i,n){if(0>=r(e,n.key)){if(n.left){var o=t(e,r,i,n.left);if(o)return o}var o=i(n.key,n.value);if(o)return o}if(n.right)return t(e,r,i,n.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,i,n,o){var a,s=i(e,o.key),u=i(r,o.key);return s<=0&&(o.left&&(a=t(e,r,i,n,o.left))||u>0&&(a=n(o.key,o.value)))?a:u>0&&o.right?t(e,r,i,n,o.right):void 0}(e,r,this._compare,t,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new l(this,t)}}),Object.defineProperty(u,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new l(this,t)}}),u.at=function(t){if(t<0)return new l(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new l(this,r);if(t-=1,e.right){if(t>=e.right._count)break;e=e.right}else break}return new l(this,[])},u.ge=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o<=0&&(n=i.length),r=o<=0?r.left:r.right}return i.length=n,new l(this,i)},u.gt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o<0&&(n=i.length),r=o<0?r.left:r.right}return i.length=n,new l(this,i)},u.lt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o>0&&(n=i.length),r=o<=0?r.left:r.right}return i.length=n,new l(this,i)},u.le=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o>=0&&(n=i.length),r=o<0?r.left:r.right}return i.length=n,new l(this,i)},u.find=function(t){for(var e=this._compare,r=this.root,i=[];r;){var n=e(t,r.key);if(i.push(r),0===n)return new l(this,i);r=n<=0?r.left:r.right}return new l(this,[])},u.remove=function(t){var e=this.find(t);return e?e.remove():this},u.get=function(t){for(var e=this._compare,r=this.root;r;){var i=e(t,r.key);if(0===i)return r.value;r=i<=0?r.left:r.right}};var h=l.prototype;function f(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function c(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new l(this.tree,this._stack.slice())},h.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=Array(t.length),r=t[t.length-1];e[e.length-1]=new i(r._color,r.key,r.value,r.left,r.right,r._count);for(var u=t.length-2;u>=0;--u){var r=t[u];r.left===t[u+1]?e[u]=new i(r._color,r.key,r.value,e[u+1],r.right,r._count):e[u]=new i(r._color,r.key,r.value,r.left,e[u+1],r._count)}if((r=e[e.length-1]).left&&r.right){var l=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var h=e[l-1];e.push(new i(r._color,h.key,h.value,r.left,r.right,r._count)),e[l-1].key=r.key,e[l-1].value=r.value;for(var u=e.length-2;u>=l;--u)r=e[u],e[u]=new i(r._color,r.key,r.value,r.left,e[u+1],r._count);e[l-1].left=e[l]}if(0===(r=e[e.length-1])._color){var c=e[e.length-2];c.left===r?c.left=null:c.right===r&&(c.right=null),e.pop();for(var u=0;u<e.length;++u)e[u]._count--}else if(r.left||r.right){r.left?f(r,r.left):r.right&&f(r,r.right),r._color=1;for(var u=0;u<e.length-1;++u)e[u]._count--}else{if(1===e.length)return new s(this.tree._compare,null);for(var u=0;u<e.length;++u)e[u]._count--;var d=e[e.length-2];(function(t){for(var e,r,i,s,u=t.length-1;u>=0;--u){if(e=t[u],0===u){e._color=1;return}if((r=t[u-1]).left===e){if((i=r.right).right&&0===i.right._color){if(s=(i=r.right=n(i)).right=n(i.right),r.right=i.left,i.left=r,i.right=s,i._color=r._color,e._color=1,r._color=1,s._color=1,a(r),a(i),u>1){var l=t[u-2];l.left===r?l.left=i:l.right=i}t[u-1]=i;return}if(i.left&&0===i.left._color){if(s=(i=r.right=n(i)).left=n(i.left),r.right=s.left,i.left=s.right,s.left=r,s.right=i,s._color=r._color,r._color=1,i._color=1,e._color=1,a(r),a(i),a(s),u>1){var l=t[u-2];l.left===r?l.left=s:l.right=s}t[u-1]=s;return}if(1===i._color){if(0===r._color){r._color=1,r.right=o(0,i);return}r.right=o(0,i);continue}if(i=n(i),r.right=i.left,i.left=r,i._color=r._color,r._color=0,a(r),a(i),u>1){var l=t[u-2];l.left===r?l.left=i:l.right=i}t[u-1]=i,t[u]=r,u+1<t.length?t[u+1]=e:t.push(e),u+=2}else{if((i=r.left).left&&0===i.left._color){if(s=(i=r.left=n(i)).left=n(i.left),r.left=i.right,i.right=r,i.left=s,i._color=r._color,e._color=1,r._color=1,s._color=1,a(r),a(i),u>1){var l=t[u-2];l.right===r?l.right=i:l.left=i}t[u-1]=i;return}if(i.right&&0===i.right._color){if(s=(i=r.left=n(i)).right=n(i.right),r.left=s.right,i.right=s.left,s.right=r,s.left=i,s._color=r._color,r._color=1,i._color=1,e._color=1,a(r),a(i),a(s),u>1){var l=t[u-2];l.right===r?l.right=s:l.left=s}t[u-1]=s;return}if(1===i._color){if(0===r._color){r._color=1,r.left=o(0,i);return}r.left=o(0,i);continue}if(i=n(i),r.left=i.right,i.right=r,i._color=r._color,r._color=0,a(r),a(i),u>1){var l=t[u-2];l.right===r?l.right=i:l.left=i}t[u-1]=i,t[u]=r,u+1<t.length?t[u+1]=e:t.push(e),u+=2}}})(e),d.left===r?d.left=null:d.right=null}return new s(this.tree._compare,e[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var i=e.length-2;i>=0;--i)e[i+1]===e[i].right&&(++t,e[i].left&&(t+=e[i].left._count));return t},enumerable:!0}),h.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),h.update=function(t){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var r=Array(e.length),n=e[e.length-1];r[r.length-1]=new i(n._color,n.key,t,n.left,n.right,n._count);for(var o=e.length-2;o>=0;--o)(n=e[o]).left===e[o+1]?r[o]=new i(n._color,n.key,n.value,r[o+1],n.right,n._count):r[o]=new i(n._color,n.key,n.value,n.left,r[o+1],n._count);return new s(this.tree._compare,r[0])},h.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],70:[function(t,e,r){"use strict";e.exports=function(t,e){var r=new h(t);return r.update(e),r};var i=t("./lib/text.js"),n=t("./lib/lines.js"),o=t("./lib/background.js"),a=t("./lib/cube.js"),s=t("./lib/ticks.js"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function h(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=o(t)}var f=h.prototype;function c(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}f.update=function(t){function e(e,r,i){if(i in t){var n,o=t[i],a=this[i];(e?Array.isArray(o)&&Array.isArray(o[0]):Array.isArray(o))?this[i]=n=[r(o[0]),r(o[1]),r(o[2])]:this[i]=n=[r(o),r(o),r(o)];for(var s=0;s<3;++s)if(n[s]!==a[s])return!0}return!1}t=t||{};var r,o=e.bind(this,!1,Number),a=e.bind(this,!1,Boolean),u=e.bind(this,!1,String),l=e.bind(this,!0,function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]}),h=!1,f=!1;if("bounds"in t){var c=t.bounds;r:for(var d=0;d<2;++d)for(var p=0;p<3;++p)c[d][p]!==this.bounds[d][p]&&(f=!0),this.bounds[d][p]=c[d][p]}if("ticks"in t){r=t.ticks,h=!0,this.autoTicks=!1;for(var d=0;d<3;++d)this.tickSpacing[d]=0}else o("tickSpacing")&&(this.autoTicks=!0,f=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),f=!0,h=!0,this._firstInit=!1),f&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),h=!0),h){for(var d=0;d<3;++d)r[d].sort(function(t,e){return t.x-e.x});s.equal(r,this.ticks)?h=!1:this.ticks=r}a("tickEnable"),u("tickFont")&&(h=!0),o("tickSize"),o("tickAngle"),o("tickPad"),l("tickColor");var v=u("labels");u("labelFont")&&(v=!0),a("labelEnable"),o("labelSize"),o("labelPad"),l("labelColor"),a("lineEnable"),a("lineMirror"),o("lineWidth"),l("lineColor"),a("lineTickEnable"),a("lineTickMirror"),o("lineTickLength"),o("lineTickWidth"),l("lineTickColor"),a("gridEnable"),o("gridWidth"),l("gridColor"),a("zeroEnable"),l("zeroLineColor"),o("zeroLineWidth"),a("backgroundEnable"),l("backgroundColor"),this._text?this._text&&(v||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var d=[new c,new c,new c],p=[0,0,0],v={model:u,view:u,projection:u,_ortho:!1};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(t){};var g=[0,0,0],m=[0,0,0],b=[0,0,0];f.draw=function(t){t=t||v;for(var e,r,i,n=this.gl,o=t.model||u,s=t.view||u,h=t.projection||u,f=this.bounds,c=t._ortho||!1,y=a(o,s,h,f,c),x=y.cubeEdges,_=y.axis,w=s[12],M=s[13],E=s[14],A=s[15],T=(c?2:1)*this.pixelRatio*(h[3]*w+h[7]*M+h[11]*E+h[15]*A)/n.drawingBufferHeight,R=0;R<3;++R)this.lastCubeProps.cubeEdges[R]=x[R],this.lastCubeProps.axis[R]=_[R];for(var R=0;R<3;++R)!function(t,e,r,i,n){for(var o=t.primalOffset,a=t.primalMinor,s=t.mirrorOffset,u=t.mirrorMinor,l=i[e],h=0;h<3;++h)if(e!==h){var f=o,c=s,d=a,p=u;l&1<<h&&(f=s,c=o,d=u,p=a),f[h]=r[0][h],c[h]=r[1][h],n[h]>0?(d[h]=-1,p[h]=0):(d[h]=0,p[h]=1)}}(d[R],R,this.bounds,x,_);for(var n=this.gl,k=p,R=0;R<3;++R)this.backgroundEnable[R]?k[R]=_[R]:k[R]=0;this._background.draw(o,s,h,f,k,this.backgroundColor),this._lines.bind(o,s,h,this);for(var R=0;R<3;++R){var S=[0,0,0];_[R]>0?S[R]=f[1][R]:S[R]=f[0][R];for(var O=0;O<2;++O){var C=(R+1+O)%3,L=(R+1+(1^O))%3;this.gridEnable[C]&&this._lines.drawGrid(C,L,this.bounds,S,this.gridColor[C],this.gridWidth[C]*this.pixelRatio)}for(var O=0;O<2;++O){var C=(R+1+O)%3,L=(R+1+(1^O))%3;this.zeroEnable[L]&&0>=Math.min(f[0][L],f[1][L])&&Math.max(f[0][L],f[1][L])>=0&&this._lines.drawZero(C,L,this.bounds,S,this.zeroLineColor[L],this.zeroLineWidth[L]*this.pixelRatio)}}for(var R=0;R<3;++R){this.lineEnable[R]&&this._lines.drawAxisLine(R,this.bounds,d[R].primalOffset,this.lineColor[R],this.lineWidth[R]*this.pixelRatio),this.lineMirror[R]&&this._lines.drawAxisLine(R,this.bounds,d[R].mirrorOffset,this.lineColor[R],this.lineWidth[R]*this.pixelRatio);for(var I=l(g,d[R].primalMinor),P=l(m,d[R].mirrorMinor),B=this.lineTickLength,O=0;O<3;++O){var N=T/o[5*O];I[O]*=B[O]*N,P[O]*=B[O]*N}this.lineTickEnable[R]&&this._lines.drawAxisTicks(R,d[R].primalOffset,I,this.lineTickColor[R],this.lineTickWidth[R]*this.pixelRatio),this.lineTickMirror[R]&&this._lines.drawAxisTicks(R,d[R].mirrorOffset,P,this.lineTickColor[R],this.lineTickWidth[R]*this.pixelRatio)}function F(t){(i=[0,0,0])[t]=1}this._lines.unbind(),this._text.bind(o,s,h,this.pixelRatio);for(var R=0;R<3;++R){for(var z=d[R].primalMinor,D=d[R].mirrorMinor,U=l(b,d[R].primalOffset),O=0;O<3;++O)this.lineTickEnable[R]&&(U[O]+=T*z[O]*Math.max(this.lineTickLength[O],0)/o[5*O]);var j=[0,0,0];if(j[R]=1,this.tickEnable[R]){-3600===this.tickAngle[R]?(this.tickAngle[R]=0,this.tickAlign[R]="auto"):this.tickAlign[R]=-1,r=1,"auto"===(e=[this.tickAlign[R],.5,r])[0]?e[0]=0:e[0]=parseInt(""+e[0]),i=[0,0,0],function(t,e,r){var i=(t+1)%3,n=(t+2)%3,o=e[i],a=e[n],s=r[i],u=r[n];if(o>0&&u>0||o>0&&u<0){F(i);return}o<0&&u>0?F(i):o<0&&u<0?F(i):a>0&&s>0?F(n):a>0&&s<0?F(n):a<0&&s>0?F(n):a<0&&s<0&&F(n)}(R,z,D);for(var O=0;O<3;++O)U[O]+=T*z[O]*this.tickPad[O]/o[5*O];this._text.drawTicks(R,this.tickSize[R],this.tickAngle[R],U,this.tickColor[R],j,i,e)}if(this.labelEnable[R]){r=0,i=[0,0,0],this.labels[R].length>4&&(F(R),r=1),"auto"===(e=[this.labelAlign[R],.5,r])[0]?e[0]=0:e[0]=parseInt(""+e[0]);for(var O=0;O<3;++O)U[O]+=T*z[O]*this.labelPad[O]/o[5*O];U[R]+=.5*(f[0][R]+f[1][R]),this._text.drawLabel(R,this.labelSize[R],this.labelAngle[R],U,this.labelColor[R],[0,0,0],i,e)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(t,e,r){"use strict";e.exports=function(t){for(var e=[],r=[],s=0,u=0;u<3;++u)for(var l=(u+1)%3,h=(u+2)%3,f=[0,0,0],c=[0,0,0],d=-1;d<=1;d+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),f[u]=d,c[u]=d;for(var p=-1;p<=1;p+=2){f[l]=p;for(var v=-1;v<=1;v+=2)f[h]=v,e.push(f[0],f[1],f[2],c[0],c[1],c[2]),s+=1}var g=l;l=h,h=g}var m=i(t,new Float32Array(e)),b=i(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),y=n(t,[{buffer:m,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:m,type:t.FLOAT,size:3,offset:12,stride:24}],b),x=o(t);return x.attributes.position.location=0,x.attributes.normal.location=1,new a(t,m,y,x)};var i=t("gl-buffer"),n=t("gl-vao"),o=t("./shaders").bg;function a(t,e,r,i){this.gl=t,this.buffer=e,this.vao=r,this.shader=i}var s=a.prototype;s.draw=function(t,e,r,i,n,o){for(var a=!1,s=0;s<3;++s)a=a||n[s];if(a){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:i,enable:n,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(t,e,r){"use strict";e.exports=function(t,e,r,g,m){n(s,e,t),n(s,r,s);for(var b=0,y=0;y<2;++y){h[2]=g[y][2];for(var x=0;x<2;++x){h[1]=g[x][1];for(var _=0;_<2;++_)h[0]=g[_][0],function(t,e,r){for(var i=0;i<4;++i){t[i]=r[12+i];for(var n=0;n<3;++n)t[i]+=e[n]*r[4*n+i]}}(u[b],h,s),b+=1}}for(var w=-1,y=0;y<8;++y){for(var M=u[y][3],E=0;E<3;++E)l[y][E]=u[y][E]/M;m&&(l[y][2]*=-1),M<0&&(w<0?w=y:l[y][2]<l[w][2]&&(w=y))}if(w<0){w=0;for(var A=0;A<3;++A){for(var T=(A+2)%3,R=(A+1)%3,k=-1,S=-1,O=0;O<2;++O){var C=O<<A,L=C+(O<<T)+(1-O<<R),I=C+(1-O<<T)+(O<<R);0>a(l[C],l[L],l[I],f)||(O?k=1:S=1)}if(k<0||S<0){S>k&&(w|=1<<A);continue}for(var O=0;O<2;++O){var C=O<<A,L=C+(O<<T)+(1-O<<R),I=C+(1-O<<T)+(O<<R),P=function(t){for(var e=0;e<c.length;++e)if((t=o.positive(t,c[e])).length<3)return 0;for(var r=t[0],i=r[0]/r[3],n=r[1]/r[3],a=0,e=1;e+1<t.length;++e){var s=t[e],u=t[e+1],l=s[0]/s[3],h=s[1]/s[3],f=u[0]/u[3],d=u[1]/u[3],p=h-n;a+=Math.abs((l-i)*(d-n)-p*(f-i))}return a}([u[C],u[L],u[I],u[C+(1<<T)+(1<<R)]]);O?k=P:S=P}if(S>k){w|=1<<A;continue}}}for(var B=7^w,N=-1,y=0;y<8;++y)y!==w&&y!==B&&(N<0?N=y:l[N][1]>l[y][1]&&(N=y));for(var F=-1,y=0;y<3;++y){var z=N^1<<y;if(z!==w&&z!==B){F<0&&(F=z);var R=l[z];R[0]<l[F][0]&&(F=z)}}for(var D=-1,y=0;y<3;++y){var z=N^1<<y;if(z!==w&&z!==B&&z!==F){D<0&&(D=z);var R=l[z];R[0]>l[D][0]&&(D=z)}}var U=d;U[0]=U[1]=U[2]=0,U[i.log2(F^N)]=N&F,U[i.log2(N^D)]=N&D;var j=7^D;j===w||j===B?(j=7^F,U[i.log2(D^j)]=j&D):U[i.log2(F^j)]=j&F;for(var G=p,V=w,A=0;A<3;++A)V&1<<A?G[A]=-1:G[A]=1;return v};var i=t("bit-twiddle"),n=t("gl-mat4/multiply"),o=t("split-polygon"),a=t("robust-orientation"),s=Array(16),u=Array(8),l=Array(8),h=[,,,],f=[0,0,0];!function(){for(var t=0;t<8;++t)u[t]=[1,1,1,1],l[t]=[1,1,1]}();var c=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],p=[0,0,0],v={cubeEdges:d,axis:p}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(t,e,r){"use strict";e.exports=function(t,e,r){var a=[],s=[0,0,0],u=[0,0,0],l=[0,0,0],h=[0,0,0];a.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var f=0;f<3;++f){for(var c=a.length/3|0,p=0;p<r[f].length;++p){var v=+r[f][p].x;a.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var g=a.length/3|0;s[f]=c,u[f]=g-c;for(var c=a.length/3|0,m=0;m<r[f].length;++m){var v=+r[f][m].x;a.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var g=a.length/3|0;l[f]=c,h[f]=g-c}var b=i(t,new Float32Array(a)),y=n(t,[{buffer:b,type:t.FLOAT,size:3,stride:0,offset:0}]),x=o(t);return x.attributes.position.location=0,new d(t,b,y,x,u,s,h,l)};var i=t("gl-buffer"),n=t("gl-vao"),o=t("./shaders").line,a=[0,0,0],s=[0,0,0],u=[0,0,0],l=[0,0,0],h=[1,1];function f(t){return t[0]=t[1]=t[2]=0,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function d(t,e,r,i,n,o,a,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=i,this.tickCount=n,this.tickOffset=o,this.gridCount=a,this.gridOffset=s}var p=d.prototype;p.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(t,e,r,i,n){var o=f(s);this.shader.uniforms.majorAxis=s,o[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=o;var a=c(l,r);a[t]+=e[0][t],this.shader.uniforms.offset=a,this.shader.uniforms.lineWidth=n,this.shader.uniforms.color=i;var h=f(u);h[(t+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=f(u);h[(t+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(t,e,r,i,n){if(this.tickCount[t]){var o=f(a);o[t]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=i,this.shader.uniforms.lineWidth=n;var s=f(u);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},p.drawGrid=function(t,e,r,i,n,o){if(this.gridCount[t]){var h=f(s);h[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=h;var d=c(l,i);d[e]+=r[0][e],this.shader.uniforms.offset=d;var p=f(a);p[t]=1,this.shader.uniforms.majorAxis=p;var v=f(u);v[t]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},p.drawZero=function(t,e,r,i,n,o){var a=f(s);this.shader.uniforms.majorAxis=a,a[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=a;var h=c(l,i);h[t]+=r[0][t],this.shader.uniforms.offset=h;var d=f(u);d[e]=1,this.shader.uniforms.screenAxis=d,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=n,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(t,e,r){"use strict";var i=t("glslify"),n=t("gl-shader"),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.line=function(t){return n(t,o,a,null,[{name:"position",type:"vec3"}])};var s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.text=function(t){return n(t,s,u,null,[{name:"position",type:"vec3"}])};var l=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),h=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);r.bg=function(t){return n(t,l,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(t,e,r){(function(r){(function(){"use strict";e.exports=function(t,e,r,o,s,u){var h=i(t),f=n(t,[{buffer:h,size:3}]),c=a(t);c.attributes.position.location=0;var d=new l(t,c,h,f);return d.update(e,r,o,s,u),d};var i=t("gl-buffer"),n=t("gl-vao"),o=t("vectorize-text"),a=t("./shaders").text,s=window||r.global||{},u=s.__TEXT_CACHE||{};function l(t,e,r,i){this.gl=t,this.shader=e,this.buffer=r,this.vao=i,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}s.__TEXT_CACHE={};var h=l.prototype,f=[0,0];h.bind=function(t,e,r,i){this.vao.bind(),this.shader.bind();var n=this.shader.uniforms;n.model=t,n.view=e,n.projection=r,n.pixelScale=i,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=f},h.unbind=function(){this.vao.unbind()},h.update=function(t,e,r,i,n){var a=[];function s(t,e,r,i,n,s){var l=u[r];l||(l=u[r]={});var h=l[e];h||(h=l[e]=function(t,e){try{return o(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:n,styletags:s}));for(var f=(i||12)/12,c=h.positions,d=h.cells,p=0,v=d.length;p<v;++p)for(var g=d[p],m=2;m>=0;--m){var b=c[g[m]];a.push(f*b[0],-f*b[1],t)}}for(var l=[0,0,0],h=[0,0,0],f=[0,0,0],c=[0,0,0],d={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},p=0;p<3;++p){f[p]=a.length/3|0,s(.5*(t[0][p]+t[1][p]),e[p],r[p],12,1.25,d),c[p]=(a.length/3|0)-f[p],l[p]=a.length/3|0;for(var v=0;v<i[p].length;++v)i[p][v].text&&s(i[p][v].x,i[p][v].text,i[p][v].font||n,i[p][v].fontSize||12,1.25,d);h[p]=(a.length/3|0)-l[p]}this.buffer.update(a),this.tickOffset=l,this.tickCount=h,this.labelOffset=f,this.labelCount=c},h.drawTicks=function(t,e,r,i,n,o,a,s){this.tickCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=n,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},h.drawLabel=function(t,e,r,i,n,o,a,s){this.labelCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=n,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=i,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,t("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(t,e,r){"use strict";function i(t,e){var r=t+"",i=r.indexOf("."),n=0;i>=0&&(n=r.length-i-1);var o=Math.pow(10,n),a=Math.round(t*e*o),s=a+"";if(s.indexOf("e")>=0)return s;var u=a/o,l=a%o;a<0?(u=0|-Math.ceil(u),l=0|-l):(u=0|Math.floor(u),l|=0);var h=""+u;if(a<0&&(h="-"+h),!n)return h;for(var f=""+l;f.length<n;)f="0"+f;return h+"."+f}r.create=function(t,e){for(var r=[],n=0;n<3;++n){var o=[];t[0][n],t[1][n];for(var a=0;a*e[n]<=t[1][n];++a)o.push({x:a*e[n],text:i(e[n],a)});for(var a=-1;a*e[n]>=t[0][n];--a)o.push({x:a*e[n],text:i(e[n],a)});r.push(o)}return r},r.equal=function(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var i=0;i<t[r].length;++i){var n=t[r][i],o=e[r][i];if(n.x!==o.x||n.text!==o.text||n.font!==o.font||n.fontColor!==o.fontColor||n.fontSize!==o.fontSize||n.dx!==o.dx||n.dy!==o.dy)return!1}}return!0}},{}],77:[function(t,e,r){"use strict";e.exports=function(t,e,r,f,g){var m=e.model||l,b=e.view||l,y=e.projection||l,x=e._ortho||!1,_=t.bounds,g=g||o(m,b,y,_,x),w=g.axis;a(h,b,m),a(h,y,h);for(var M=p,E=0;E<3;++E)M[E].lo=1/0,M[E].hi=-1/0,M[E].pixelsPerDataUnit=1/0;var A=i(s(h,h));s(h,h);for(var T=0;T<3;++T){var R=(T+1)%3,k=(T+2)%3,S=v;r:for(var E=0;E<2;++E){var O=[];if(w[T]<0!=!!E){S[T]=_[E][T];for(var C=0;C<2;++C){S[R]=_[C^E][R];for(var L=0;L<2;++L)S[k]=_[L^C^E][k],O.push(S.slice())}for(var I=x?5:4,C=I;C===I;++C){if(0===O.length)continue r;O=n.positive(O,A[C])}for(var C=0;C<O.length;++C)for(var k=O[C],P=function(t,e,r,i,n){for(var o=0;o<3;++o){for(var a=c,s=d,l=0;l<3;++l)s[l]=a[l]=r[l];s[3]=a[3]=1,s[o]+=1,u(s,s,e),s[3]<0&&(t[o]=1/0),a[o]-=1,u(a,a,e),a[3]<0&&(t[o]=1/0);var h=(a[0]/a[3]-s[0]/s[3])*i,f=(a[1]/a[3]-s[1]/s[3])*n;t[o]=.25*Math.sqrt(h*h+f*f)}return t}(v,h,k,r,f),L=0;L<3;++L)M[L].lo=Math.min(M[L].lo,k[L]),M[L].hi=Math.max(M[L].hi,k[L]),L!==T&&(M[L].pixelsPerDataUnit=Math.min(M[L].pixelsPerDataUnit,Math.abs(P[L])))}}}return M};var i=t("extract-frustum-planes"),n=t("split-polygon"),o=t("./lib/cube.js"),a=t("gl-mat4/multiply"),s=t("gl-mat4/transpose"),u=t("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function f(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var c=[0,0,0,1],d=[0,0,0,1],p=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],v=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(t,e,r){"use strict";var i=t("typedarray-pool"),n=t("ndarray-ops"),o=t("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,r,i,n){this.gl=t,this.type=e,this.handle=r,this.length=i,this.usage=n}var u=s.prototype;function l(t,e,r,i,n,o){var a=n.length*n.BYTES_PER_ELEMENT;if(o<0)return t.bufferData(e,n,i),a;if(a+o>r)throw Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,o,n),r}function h(t,e){for(var r=i.malloc(t.length,e),n=t.length,o=0;o<n;++o)r[o]=t[o];return r}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r,s=t.dtype;if(0>a.indexOf(s)&&(s="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(s=gl.getExtension("OES_element_index_uint")&&"uint16"!==s?"uint32":"uint16"),s===t.dtype&&function(t,e){for(var r=1,i=e.length-1;i>=0;--i){if(e[i]!==r)return!1;r*=t[i]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=l(this.gl,this.type,this.length,this.usage,t.data,e):this.length=l(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var u=i.malloc(t.size,s),f=o(u,t.shape);n.assign(f,t),e<0?this.length=l(this.gl,this.type,this.length,this.usage,u,e):this.length=l(this.gl,this.type,this.length,this.usage,u.subarray(0,t.size),e),i.free(u)}}else if(Array.isArray(t))r=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(t,"uint16"):h(t,"float32"),e<0?this.length=l(this.gl,this.type,this.length,this.usage,r,e):this.length=l(this.gl,this.type,this.length,this.usage,r.subarray(0,t.length),e),i.free(r);else if("object"==typeof t&&"number"==typeof t.length)this.length=l(this.gl,this.type,this.length,this.usage,t,e);else if("number"==typeof t||void 0===t){if(e>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}else throw Error("gl-buffer: Invalid data type")},e.exports=function(t,e,r,i){if(r=r||t.ARRAY_BUFFER,i=i||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==t.DYNAMIC_DRAW&&i!==t.STATIC_DRAW&&i!==t.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var n=t.createBuffer(),o=new s(t,r,n,0,i);return o.update(e),o}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(t,e,r){"use strict";var i=t("gl-vec3");e.exports=function(t,e){var r=t.positions,n=t.vectors,o={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),o;for(var a=0,s=1/0,u=-1/0,l=1/0,h=-1/0,f=1/0,c=-1/0,d=null,p=null,v=[],g=1/0,m=!1,b=0;b<r.length;b++){var y=r[b];s=Math.min(y[0],s),u=Math.max(y[0],u),l=Math.min(y[1],l),h=Math.max(y[1],h),f=Math.min(y[2],f),c=Math.max(y[2],c);var x=n[b];if(i.length(x)>a&&(a=i.length(x)),b){var _=2*i.distance(d,y)/(i.length(p)+i.length(x));_?(g=Math.min(g,_),m=!1):m=!0}m||(d=y,p=x),v.push(x)}var w=[s,l,f],M=[u,h,c];e&&(e[0]=w,e[1]=M),0===a&&(a=1);var E=1/a;isFinite(g)||(g=1),o.vectorScale=g;var A=t.coneSize||.5;t.absoluteConeSize&&(A=t.absoluteConeSize*E),o.coneScale=A;for(var b=0,T=0;b<r.length;b++)for(var y=r[b],R=y[0],k=y[1],S=y[2],O=v[b],C=i.length(O)*E,L=0;L<8;L++){o.positions.push([R,k,S,T++]),o.positions.push([R,k,S,T++]),o.positions.push([R,k,S,T++]),o.positions.push([R,k,S,T++]),o.positions.push([R,k,S,T++]),o.positions.push([R,k,S,T++]),o.vectors.push(O),o.vectors.push(O),o.vectors.push(O),o.vectors.push(O),o.vectors.push(O),o.vectors.push(O),o.vertexIntensity.push(C,C,C),o.vertexIntensity.push(C,C,C);var I=o.positions.length;o.cells.push([I-6,I-5,I-4],[I-3,I-2,I-1])}return o};var n=t("./lib/shaders");e.exports.createMesh=t("./create_mesh"),e.exports.createConeMesh=function(t,r){return e.exports.createMesh(t,r,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(t,e,r){"use strict";var i=t("gl-shader"),n=t("gl-buffer"),o=t("gl-vao"),a=t("gl-texture2d"),s=t("gl-mat4/multiply"),u=t("gl-mat4/invert"),l=t("ndarray"),h=t("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(t,e,r,i,n,o,a,s,u,l,h){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.pickShader=i,this.trianglePositions=n,this.triangleVectors=o,this.triangleColors=s,this.triangleUVs=u,this.triangleIds=a,this.triangleVAO=l,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=h,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var d=c.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(t){this.pickId=t},d.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=h({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var n=e[i],o=0;o<3;++o)r[4*i+o]=n[o];r[4*i+3]=255*n[3]}return l(r,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var r=t.cells,i=t.positions,n=t.vectors;if(i&&r&&n){var o=[],a=[],s=[],u=[],f=[];this.cells=r,this.positions=i,this.vectors=n;var c=t.meshColor||[1,1,1,1],d=t.vertexIntensity,p=1/0,v=-1/0;if(d){if(t.vertexIntensityBounds)p=+t.vertexIntensityBounds[0],v=+t.vertexIntensityBounds[1];else for(var g=0;g<d.length;++g){var m=d[g];p=Math.min(p,m),v=Math.max(v,m)}}else for(var g=0;g<i.length;++g){var m=i[g][2];p=Math.min(p,m),v=Math.max(v,m)}d?this.intensity=d:this.intensity=function(t){for(var e=t.length,r=Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var g=0;g<i.length;++g)for(var b=i[g],y=0;y<3;++y)!isNaN(b[y])&&isFinite(b[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],b[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],b[y]));var x=0;i:for(var g=0;g<r.length;++g){var _=r[g];if(3===_.length){for(var y=0;y<3;++y)for(var w=_[y],b=i[w],M=0;M<3;++M)if(isNaN(b[M])||!isFinite(b[M]))continue i;for(var y=0;y<3;++y){var E,w=_[2-y],b=i[w];o.push(b[0],b[1],b[2],b[3]);var A=n[w];a.push(A[0],A[1],A[2],A[3]||0),3===c.length?s.push(c[0],c[1],c[2],1):s.push(c[0],c[1],c[2],c[3]),E=d?[(d[w]-p)/(v-p),0]:[(b[2]-p)/(v-p),0],u.push(E[0],E[1]),f.push(g)}x+=1}}this.triangleCount=x,this.trianglePositions.update(o),this.triangleVectors.update(a),this.triangleColors.update(s),this.triangleUVs.update(u),this.triangleIds.update(new Uint32Array(f))}},d.drawTransparent=d.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||f,i=t.view||f,n=t.projection||f,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);var l={model:r,view:i,projection:n,inverseModel:f.slice(),clipBounds:o,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};l.inverseModel=u(l.inverseModel,l.model),e.disable(e.CULL_FACE),this.texture.bind(0);var h=Array(16);s(h,l.view,l.model),s(h,l.projection,h),u(h,h);for(var a=0;a<3;++a)l.eyePosition[a]=h[12+a]/h[15];for(var c=h[15],a=0;a<3;++a)c+=this.lightPosition[a]*h[4*a+3];for(var a=0;a<3;++a){for(var d=h[12+a],p=0;p<3;++p)d+=h[4*p+a]*this.lightPosition[p];l.lightPosition[a]=d/c}if(this.triangleCount>0){var v=this.triShader;v.bind(),v.uniforms=l,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||f,i=t.view||f,n=t.projection||f,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:i,projection:n,clipBounds:o,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},u=this.pickShader;u.bind(),u.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions[r[1]].slice(0,3),n={position:i,dataCoordinate:i,index:Math.floor(r[1]/48)};return"cone"===this.traceType?n.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(n.intensity=this.intensity[r[1]],n.velocity=this.vectors[r[1]].slice(0,3),n.divergence=this.vectors[r[1]][3],n.index=e),n},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},e.exports=function(t,e,r){var s,u,h=r.shaders;1==arguments.length&&(t=(e=t).gl);var f=((s=i(t,h.meshShader.vertex,h.meshShader.fragment,null,h.meshShader.attributes)).attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.vector.location=4,s),d=((u=i(t,h.pickShader.vertex,h.pickShader.fragment,null,h.pickShader.attributes)).attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u),p=a(t,l(new Uint8Array([255,255,255,255]),[1,1,4]));p.generateMipmap(),p.minFilter=t.LINEAR_MIPMAP_LINEAR,p.magFilter=t.LINEAR;var v=n(t),g=n(t),m=n(t),b=n(t),y=n(t),x=o(t,[{buffer:v,type:t.FLOAT,size:4},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:t.FLOAT,size:4},{buffer:b,type:t.FLOAT,size:2},{buffer:g,type:t.FLOAT,size:4}]),_=new c(t,p,f,d,v,g,y,m,b,x,r.traceType||"cone");return _.update(e),_}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(t,e,r){var i=t("glslify"),n=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);r.meshShader={vertex:n,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},r.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(t,e,r){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(t,e,r){var i=t("./1.0/numbers");e.exports=function(t){return i[t]}},{"./1.0/numbers":82}],84:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=i(e),a=n(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),u=o(e);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var l=new s(e,r,a,u);return l.update(t),l};var i=t("gl-buffer"),n=t("gl-vao"),o=t("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,i){this.gl=t,this.shader=i,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=s.prototype;function l(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var i=r.view=t.view||a,n=r.projection=t.projection||a;r.model=t.model||a,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var o=i[12],s=i[13],u=i[14],l=i[15],h=(t._ortho?2:1)*this.pixelRatio*(n[3]*o+n[7]*s+n[11]*u+n[15]*l)/e.drawingBufferHeight;this.vao.bind();for(var f=0;f<3;++f)e.lineWidth(this.lineWidth[f]*this.pixelRatio),r.capSize=this.capSize[f]*h,this.lineCount[f]&&e.drawArrays(e.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var h=function(){for(var t=[,,,],e=0;e<3;++e){for(var r=[],i=1;i<=2;++i)for(var n=-1;n<=1;n+=2){var o=[0,0,0];o[(i+e)%3]=n,r.push(o)}t[e]=r}return t}();function f(t,e,r,i){for(var n=h[i],o=0;o<n.length;++o){var a=n[o];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],a[0],a[1],a[2])}return n.length}u.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,i=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&i){var n=[],o=r.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=a;r:for(var u=0;u<o;++u){for(var h=r[u],c=0;c<3;++c)if(isNaN(h[c])||!isFinite(h[c]))continue r;var d=i[u],p=e[s];if(Array.isArray(p[0])&&(p=e[u]),3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0)),!(isNaN(d[0][s])||isNaN(d[1][s]))){if(d[0][s]<0){var v=h.slice();v[s]+=d[0][s],n.push(h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0,v[0],v[1],v[2],p[0],p[1],p[2],p[3],0,0,0),l(this.bounds,v),a+=2+f(n,v,p,s)}if(d[1][s]>0){var v=h.slice();v[s]+=d[1][s],n.push(h[0],h[1],h[2],p[0],p[1],p[2],p[3],0,0,0,v[0],v[1],v[2],p[0],p[1],p[2],p[3],0,0,0),l(this.bounds,v),a+=2+f(n,v,p,s)}}}this.lineCount[s]=a-this.lineOffset[s]}this.buffer.update(n)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(t,e,r){"use strict";var i=t("glslify"),n=t("gl-shader"),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(t){return n(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(t,e,r){"use strict";var i,n,o,a,s=t("gl-texture2d");e.exports=function(t,e,r,s){i||(i=t.FRAMEBUFFER_UNSUPPORTED,n=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,a=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var l=t.getExtension("WEBGL_draw_buffers");if(!u&&l&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);u=Array(r+1);for(var i=0;i<=r;++i){for(var n=Array(r),o=0;o<i;++o)n[o]=t.COLOR_ATTACHMENT0+o;for(var o=i;o<r;++o)n[o]=t.NONE;u[i]=n}}(t,l),Array.isArray(e)&&(s=r,r=0|e[1],e=0|e[0]),"number"!=typeof e)throw Error("gl-fbo: Missing shape parameter");var h=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>h||r<0||r>h)throw Error("gl-fbo: Parameters are too large for FBO");var f=1;if("color"in(s=s||{})){if((f=Math.max(0|s.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(f>1){if(l){if(f>t.getParameter(l.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+f+" draw buffers")}else throw Error("gl-fbo: Multiple draw buffer extension not supported")}}var c=t.UNSIGNED_BYTE,d=t.getExtension("OES_texture_float");if(s.float&&f>0){if(!d)throw Error("gl-fbo: Context does not support floating point textures");c=t.FLOAT}else s.preferFloat&&f>0&&d&&(c=t.FLOAT);var v=!0;"depth"in s&&(v=!!s.depth);var g=!1;return"stencil"in s&&(g=!!s.stencil),new p(t,e,r,c,f,v,g,l)};var u=null;function l(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function h(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function f(t){switch(t){case i:throw Error("gl-fbo: Framebuffer unsupported");case n:throw Error("gl-fbo: Framebuffer incomplete attachment");case o:throw Error("gl-fbo: Framebuffer incomplete dimensions");case a:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(t,e,r,i,n,o){if(!i)return null;var a=s(t,e,r,n,i);return a.magFilter=t.NEAREST,a.minFilter=t.NEAREST,a.mipSamples=1,a.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,a.handle,0),a}function d(t,e,r,i,n){var o=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,i,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,o),o}function p(t,e,r,i,n,o,a,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=Array(n);for(var p=0;p<n;++p)this.color[p]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=i,this._useDepth=o,this._useStencil=a;var v=this,g=[0|e,0|r];Object.defineProperties(g,{0:{get:function(){return v._shape[0]},set:function(t){return v.width=t}},1:{get:function(){return v._shape[1]},set:function(t){return v.height=t}}}),this._shapeVector=g,function(t){var e=l(t.gl),r=t.gl,i=t.handle=r.createFramebuffer(),n=t._shape[0],o=t._shape[1],a=t.color.length,s=t._ext,p=t._useStencil,v=t._useDepth,g=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,i);for(var m=0;m<a;++m)t.color[m]=c(r,n,o,g,r.RGBA,r.COLOR_ATTACHMENT0+m);0===a?(t._color_rb=d(r,n,o,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(u[0])):a>1&&s.drawBuffersWEBGL(u[a]);var b=r.getExtension("WEBGL_depth_texture");b?p?t.depth=c(r,n,o,b.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):v&&(t.depth=c(r,n,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):v&&p?t._depth_rb=d(r,n,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):v?t._depth_rb=d(r,n,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):p&&(t._depth_rb=d(r,n,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var y=r.checkFramebufferStatus(r.FRAMEBUFFER);if(y!==r.FRAMEBUFFER_COMPLETE){t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(var m=0;m<t.color.length;++m)t.color[m].dispose(),t.color[m]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),h(r,e),f(y)}h(r,e)}(this)}var v=p.prototype;function g(t,e,r){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var i=t.gl,n=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(e<0||e>n||r<0||r>n)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var o=l(i),a=0;a<t.color.length;++a)t.color[a].shape=t._shape;t._color_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,t._color_rb),i.renderbufferStorage(i.RENDERBUFFER,i.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(i.bindRenderbuffer(i.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX,t._shape[0],t._shape[1])),i.bindFramebuffer(i.FRAMEBUFFER,t.handle);var s=i.checkFramebufferStatus(i.FRAMEBUFFER);s!==i.FRAMEBUFFER_COMPLETE&&(t.dispose(),h(i,o),f(s)),h(i,o)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return g(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return g(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,g(this,this._shape[0],t),t},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(t,e,r){var i=t("sprintf-js").sprintf,n=t("gl-constants/lookup"),o=t("glsl-shader-name"),a=t("add-line-numbers");e.exports=function(t,e,r){"use strict";var s=o(e)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===n.FRAGMENT_SHADER?"fragment":"vertex");for(var l=i("Error compiling %s shader %s:\n",u,s),h=i("%s%s",l,t),f=t.split("\n"),c={},d=0;d<f.length;d++){var p=f[d];if(""!==p&&"\x00"!==p){var v=parseInt(p.split(":")[2]);if(isNaN(v))throw Error(i("Could not parse error: %s",p));c[v]=p}}for(var g=a(e).split("\n"),d=0;d<g.length;d++)if((c[d+3]||c[d+2]||c[d+1])&&(l+=g[d]+"\n",c[d+1])){var m=c[d+1];l+=i("^^^ %s\n\n",m=m.substr(m.split(":",3).join(":").length+1).trim())}return{long:l.trim(),short:h.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.gl,i=l(r,f.vertex,f.fragment),n=l(r,f.pickVertex,f.pickFragment),o=h(r),a=h(r),s=h(r),u=h(r),d=new c(t,i,n,o,a,s,u);return d.update(e),t.addObject(d),d};var i,n,o,a=t("binary-search-bounds"),s=t("iota-array"),u=t("typedarray-pool"),l=t("gl-shader"),h=t("gl-buffer"),f=t("./lib/shaders");function c(t,e,r,i,n,o,a){this.plot=t,this.shader=e,this.pickShader=r,this.positionBuffer=i,this.weightBuffer=n,this.colorBuffer=o,this.idBuffer=a,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d=c.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var t=this.plot,e=this.shader,r=this.bounds,n=this.numVertices;if(!(n<=0)){var o=t.gl,a=t.dataBox,s=r[2]-r[0],u=r[3]-r[1],l=a[2]-a[0],h=a[3]-a[1];i[0]=2*s/l,i[4]=2*u/h,i[6]=2*(r[0]-a[0])/l-1,i[7]=2*(r[1]-a[1])/h-1,e.bind();var f=e.uniforms;f.viewTransform=i,f.shape=this.shape;var c=e.attributes;this.positionBuffer.bind(),c.position.pointer(),this.weightBuffer.bind(),c.weight.pointer(o.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),c.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,n)}}),d.drawPick=(n=[1,0,0,0,1,0,0,0,1],o=[0,0,0,0],function(t){var e=this.plot,r=this.pickShader,i=this.bounds,a=this.numVertices;if(!(a<=0)){var s=e.gl,u=e.dataBox,l=i[2]-i[0],h=i[3]-i[1],f=u[2]-u[0],c=u[3]-u[1];n[0]=2*l/f,n[4]=2*h/c,n[6]=2*(i[0]-u[0])/f-1,n[7]=2*(i[1]-u[1])/c-1;for(var d=0;d<4;++d)o[d]=t>>8*d&255;this.pickOffset=t,r.bind();var p=r.uniforms;p.viewTransform=n,p.pickOffset=o,p.shape=this.shape;var v=r.attributes;return this.positionBuffer.bind(),v.position.pointer(),this.weightBuffer.bind(),v.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),v.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,a),t+this.shape[0]*this.shape[1]}}),d.pick=function(t,e,r){var i=this.pickOffset,n=this.shape[0]*this.shape[1];if(r<i||r>=i+n)return null;var o=r-i,a=this.xData,s=this.yData;return{object:this,pointId:o,dataCoord:[a[o%this.shape[0]],s[o/this.shape[0]|0]]}},d.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||s(e[0]),i=t.y||s(e[1]),n=t.z||new Float32Array(e[0]*e[1]),o=!1!==t.zsmooth;this.xData=r,this.yData=i;var l=t.colorLevels||[0],h=t.colorValues||[0,0,0,1],f=l.length,c=this.bounds;o?(S=c[0]=r[0],O=c[1]=i[0],C=c[2]=r[r.length-1],L=c[3]=i[i.length-1]):(S=c[0]=r[0]+(r[1]-r[0])/2,O=c[1]=i[0]+(i[1]-i[0])/2,C=c[2]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2,L=c[3]=i[i.length-1]+(i[i.length-1]-i[i.length-2])/2);var d=1/(C-S),v=1/(L-O),g=e[0],m=e[1];this.shape=[g,m];var b=(o?(g-1)*(m-1):g*m)*(p.length>>>1);this.numVertices=b;for(var y=u.mallocUint8(4*b),x=u.mallocFloat32(2*b),_=u.mallocUint8(2*b),w=u.mallocUint32(b),M=0,E=o?g-1:g,A=o?m-1:m,T=0;T<A;++T){o?(I=v*(i[T]-O),P=v*(i[T+1]-O)):(I=T<m-1?v*(i[T]-(i[T+1]-i[T])/2-O):v*(i[T]-(i[T]-i[T-1])/2-O),P=T<m-1?v*(i[T]+(i[T+1]-i[T])/2-O):v*(i[T]+(i[T]-i[T-1])/2-O));for(var R=0;R<E;++R){o?(B=d*(r[R]-S),N=d*(r[R+1]-S)):(B=R<g-1?d*(r[R]-(r[R+1]-r[R])/2-S):d*(r[R]-(r[R]-r[R-1])/2-S),N=R<g-1?d*(r[R]+(r[R+1]-r[R])/2-S):d*(r[R]+(r[R]-r[R-1])/2-S));for(var k=0;k<p.length;k+=2){var S,O,C,L,I,P,B,N,F,z,D,U,j=p[k],G=p[k+1],V=n[o?(T+G)*g+(R+j):T*g+R],H=a.le(l,V);if(H<0)F=h[0],z=h[1],D=h[2],U=h[3];else if(H===f-1)F=h[4*f-4],z=h[4*f-3],D=h[4*f-2],U=h[4*f-1];else{var W=(V-l[H])/(l[H+1]-l[H]),X=1-W,Y=4*H,q=4*(H+1);F=X*h[Y]+W*h[q],z=X*h[Y+1]+W*h[q+1],D=X*h[Y+2]+W*h[q+2],U=X*h[Y+3]+W*h[q+3]}y[4*M]=255*F,y[4*M+1]=255*z,y[4*M+2]=255*D,y[4*M+3]=255*U,x[2*M]=.5*B+.5*N,x[2*M+1]=.5*I+.5*P,_[2*M]=j,_[2*M+1]=G,w[M]=T*g+R,M+=1}}}this.positionBuffer.update(x),this.weightBuffer.update(_),this.colorBuffer.update(y),this.idBuffer.update(w),u.free(x),u.free(y),u.free(_),u.free(w)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(t,e,r){"use strict";var i=t("glslify");e.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(t,e,r){var i=t("glslify"),n=t("gl-shader"),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];r.createShader=function(t){return n(t,o,a,null,u)},r.createPickShader=function(t){return n(t,o,s,null,u)}},{"gl-shader":132,glslify:231}],91:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,r=f(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var a=c(e);a.attributes.position.location=0,a.attributes.nextPosition.location=1,a.attributes.arcLength.location=2,a.attributes.lineWidth.location=3,a.attributes.color.location=4;for(var s=i(e),u=n(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),h=l(Array(1024),[256,1,4]),d=0;d<1024;++d)h.data[d]=255;var p=o(e,h);p.wrap=e.REPEAT;var v=new g(e,r,a,s,u,p);return v.update(t),v};var i=t("gl-buffer"),n=t("gl-vao"),o=t("gl-texture2d"),a=new Uint8Array(4),s=new Float32Array(a.buffer),u=t("binary-search-bounds"),l=t("ndarray"),h=t("./lib/shaders"),f=h.createShader,c=h.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function v(t,e,r,i){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=i}function g(t,e,r,i,n,o){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=i,this.vao=n,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=o,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=g.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.drawTransparent=m.draw=function(t){if(this.vertexCount){var e=this.gl,r=this.shader,i=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(e.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},m.drawPick=function(t){if(this.vertexCount){var e=this.gl,r=this.pickShader,i=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},i.bind(),i.draw(e.TRIANGLE_STRIP,this.vertexCount),i.unbind()}},m.update=function(t){this.dirty=!0;var e=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],i=[],n=[],o=0,a=0,s=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=t.position||t.positions;if(h){var f=t.color||t.colors||[0,0,0,1],c=t.lineWidth||1,d=!1;i:for(p=1;p<h.length;++p){var p,v,g,m,b,y=h[p-1],x=h[p];for(i.push(o),n.push(y.slice()),v=0;v<3;++v){if(isNaN(y[v])||isNaN(x[v])||!isFinite(y[v])||!isFinite(x[v])){if(!e&&r.length>0){for(var _=0;_<24;++_)r.push(r[r.length-12]);a+=2,d=!0}continue i}s[0][v]=Math.min(s[0][v],y[v],x[v]),s[1][v]=Math.max(s[1][v],y[v],x[v])}Array.isArray(f[0])?(g=f.length>p-1?f[p-1]:f.length>0?f[f.length-1]:[0,0,0,1],m=f.length>p?f[p]:f.length>0?f[f.length-1]:[0,0,0,1]):g=m=f,3===g.length&&(g=[g[0],g[1],g[2],1]),3===m.length&&(m=[m[0],m[1],m[2],1]),!this.hasAlpha&&g[3]<1&&(this.hasAlpha=!0),b=Array.isArray(c)?c.length>p-1?c[p-1]:c.length>0?c[c.length-1]:[0,0,0,1]:c;var w=o;if(o+=function(t,e){for(var r=0,i=0;i<3;++i){var n=t[i]-e[i];r+=n*n}return Math.sqrt(r)}(y,x),d){for(v=0;v<2;++v)r.push(y[0],y[1],y[2],x[0],x[1],x[2],w,b,g[0],g[1],g[2],g[3]);a+=2,d=!1}r.push(y[0],y[1],y[2],x[0],x[1],x[2],w,b,g[0],g[1],g[2],g[3],y[0],y[1],y[2],x[0],x[1],x[2],w,-b,g[0],g[1],g[2],g[3],x[0],x[1],x[2],y[0],y[1],y[2],o,-b,m[0],m[1],m[2],m[3],x[0],x[1],x[2],y[0],y[1],y[2],o,b,m[0],m[1],m[2],m[3]),a+=4}}if(this.buffer.update(r),i.push(o),n.push(h[h.length-1].slice()),this.bounds=s,this.vertexCount=a,this.points=n,this.arcLength=i,"dashes"in t){var M=t.dashes.slice();for(M.unshift(0),p=1;p<M.length;++p)M[p]=M[p-1]+M[p];var E=l(Array(1024),[256,1,4]);for(p=0;p<256;++p){for(v=0;v<4;++v)E.set(p,0,v,0);1&u.le(M,M[M.length-1]*p/255)?E.set(p,0,0,0):E.set(p,0,0,255)}this.texture.setPixels(E)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(t){if(!t||t.id!==this.pickId)return null;var e,r,i,n=(e=t.value[0],r=t.value[1],i=t.value[2],a[0]=0,a[1]=i,a[2]=r,a[3]=e,s[0]),o=u.le(this.arcLength,n);if(o<0)return null;if(o===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),o);for(var l=this.points[o],h=this.points[Math.min(o+1,this.points.length-1)],f=(n-this.arcLength[o])/(this.arcLength[o+1]-this.arcLength[o]),c=1-f,d=[0,0,0],p=0;p<3;++p)d[p]=c*l[p]+f*h[p];var g=Math.min(f<.5?o:o+1,this.points.length-1);return new v(n,d,g,this.points[g])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(t,e,r){e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],93:[function(t,e,r){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],94:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],h=t[9],f=t[10],c=t[11],d=t[12],p=t[13],v=t[14],g=t[15];return(e*a-r*o)*(f*g-c*v)-(e*s-i*o)*(h*g-c*p)+(e*u-n*o)*(h*v-f*p)+(r*s-i*a)*(l*g-c*d)-(r*u-n*a)*(l*v-f*d)+(i*u-n*s)*(l*p-h*d)}},{}],95:[function(t,e,r){e.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=r+r,s=i+i,u=n+n,l=r*a,h=i*a,f=i*s,c=n*a,d=n*s,p=n*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-p,t[1]=h+m,t[2]=c-g,t[3]=0,t[4]=h-m,t[5]=1-l-p,t[6]=d+v,t[7]=0,t[8]=c+g,t[9]=d-v,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],96:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=i+i,u=n+n,l=o+o,h=i*s,f=i*u,c=i*l,d=n*u,p=n*l,v=o*l,g=a*s,m=a*u,b=a*l;return t[0]=1-(d+v),t[1]=f+b,t[2]=c-m,t[3]=0,t[4]=f-b,t[5]=1-(h+v),t[6]=p+g,t[7]=0,t[8]=c+m,t[9]=p-g,t[10]=1-(h+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}},{}],97:[function(t,e,r){e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],98:[function(t,e,r){e.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],h=e[8],f=e[9],c=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],b=r*s-i*a,y=r*u-n*a,x=r*l-o*a,_=i*u-n*s,w=i*l-o*s,M=n*l-o*u,E=h*v-f*p,A=h*g-c*p,T=h*m-d*p,R=f*g-c*v,k=f*m-d*v,S=c*m-d*g,O=b*S-y*k+x*R+_*T-w*A+M*E;return O?(O=1/O,t[0]=(s*S-u*k+l*R)*O,t[1]=(n*k-i*S-o*R)*O,t[2]=(v*M-g*w+m*_)*O,t[3]=(c*w-f*M-d*_)*O,t[4]=(u*T-a*S-l*A)*O,t[5]=(r*S-n*T+o*A)*O,t[6]=(g*x-p*M-m*y)*O,t[7]=(h*M-c*x+d*y)*O,t[8]=(a*k-s*T+l*E)*O,t[9]=(i*T-r*k-o*E)*O,t[10]=(p*w-v*x+m*b)*O,t[11]=(f*x-h*w-d*b)*O,t[12]=(s*A-a*R-u*E)*O,t[13]=(r*R-i*A+n*E)*O,t[14]=(v*y-p*_-g*b)*O,t[15]=(h*_-f*y+c*b)*O,t):null}},{}],99:[function(t,e,r){var i=t("./identity");e.exports=function(t,e,r,n){var o,a,s,u,l,h,f,c,d,p,v=e[0],g=e[1],m=e[2],b=n[0],y=n[1],x=n[2],_=r[0],w=r[1],M=r[2];return 1e-6>Math.abs(v-_)&&1e-6>Math.abs(g-w)&&1e-6>Math.abs(m-M)?i(t):(p=1/Math.sqrt((f=v-_)*f+(c=g-w)*c+(d=m-M)*d),f*=p,c*=p,d*=p,(p=Math.sqrt((o=y*d-x*c)*o+(a=x*f-b*d)*a+(s=b*c-y*f)*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0),(p=Math.sqrt((u=c*s-d*a)*u+(l=d*o-f*s)*l+(h=f*a-c*o)*h))?(u*=p=1/p,l*=p,h*=p):(u=0,l=0,h=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=c,t[7]=0,t[8]=s,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*v+a*g+s*m),t[13]=-(u*v+l*g+h*m),t[14]=-(f*v+c*g+d*m),t[15]=1,t)}},{"./identity":97}],100:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],f=e[8],c=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],b=e[15],y=r[0],x=r[1],_=r[2],w=r[3];return t[0]=y*i+x*s+_*f+w*v,t[1]=y*n+x*u+_*c+w*g,t[2]=y*o+x*l+_*d+w*m,t[3]=y*a+x*h+_*p+w*b,y=r[4],x=r[5],_=r[6],w=r[7],t[4]=y*i+x*s+_*f+w*v,t[5]=y*n+x*u+_*c+w*g,t[6]=y*o+x*l+_*d+w*m,t[7]=y*a+x*h+_*p+w*b,y=r[8],x=r[9],_=r[10],w=r[11],t[8]=y*i+x*s+_*f+w*v,t[9]=y*n+x*u+_*c+w*g,t[10]=y*o+x*l+_*d+w*m,t[11]=y*a+x*h+_*p+w*b,y=r[12],x=r[13],_=r[14],w=r[15],t[12]=y*i+x*s+_*f+w*v,t[13]=y*n+x*u+_*c+w*g,t[14]=y*o+x*l+_*d+w*m,t[15]=y*a+x*h+_*p+w*b,t}},{}],101:[function(t,e,r){e.exports=function(t,e,r,i,n,o,a){var s=1/(e-r),u=1/(i-n),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*u,t[14]=(a+o)*l,t[15]=1,t}},{}],102:[function(t,e,r){e.exports=function(t,e,r,i,n){var o=1/Math.tan(e/2),a=1/(i-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*a,t[15]=0,t}},{}],103:[function(t,e,r){e.exports=function(t,e,r,i){var n,o,a,s,u,l,h,f,c,d,p,v,g,m,b,y,x,_,w,M,E,A,T,R,k=i[0],S=i[1],O=i[2],C=Math.sqrt(k*k+S*S+O*O);return 1e-6>Math.abs(C)?null:(k*=C=1/C,S*=C,O*=C,n=Math.sin(r),a=1-(o=Math.cos(r)),s=e[0],u=e[1],l=e[2],h=e[3],f=e[4],c=e[5],d=e[6],p=e[7],v=e[8],g=e[9],m=e[10],b=e[11],y=k*k*a+o,x=S*k*a+O*n,_=O*k*a-S*n,w=k*S*a-O*n,M=S*S*a+o,E=O*S*a+k*n,A=k*O*a+S*n,T=S*O*a-k*n,R=O*O*a+o,t[0]=s*y+f*x+v*_,t[1]=u*y+c*x+g*_,t[2]=l*y+d*x+m*_,t[3]=h*y+p*x+b*_,t[4]=s*w+f*M+v*E,t[5]=u*w+c*M+g*E,t[6]=l*w+d*M+m*E,t[7]=h*w+p*M+b*E,t[8]=s*A+f*T+v*R,t[9]=u*A+c*T+g*R,t[10]=l*A+d*T+m*R,t[11]=h*A+p*T+b*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}},{}],104:[function(t,e,r){e.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],h=e[9],f=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*i,t[5]=a*n+h*i,t[6]=s*n+f*i,t[7]=u*n+c*i,t[8]=l*n-o*i,t[9]=h*n-a*i,t[10]=f*n-s*i,t[11]=c*n-u*i,t}},{}],105:[function(t,e,r){e.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],h=e[9],f=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-l*i,t[1]=a*n-h*i,t[2]=s*n-f*i,t[3]=u*n-c*i,t[8]=o*i+l*n,t[9]=a*i+h*n,t[10]=s*i+f*n,t[11]=u*i+c*n,t}},{}],106:[function(t,e,r){e.exports=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],h=e[5],f=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*i,t[1]=a*n+h*i,t[2]=s*n+f*i,t[3]=u*n+c*i,t[4]=l*n-o*i,t[5]=h*n-a*i,t[6]=f*n-s*i,t[7]=c*n-u*i,t}},{}],107:[function(t,e,r){e.exports=function(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],108:[function(t,e,r){e.exports=function(t,e,r){var i,n,o,a,s,u,l,h,f,c,d,p,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],f=e[8],c=e[9],d=e[10],p=e[11],t[0]=i,t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=h,t[8]=f,t[9]=c,t[10]=d,t[11]=p,t[12]=i*v+s*g+f*m+e[12],t[13]=n*v+u*g+c*m+e[13],t[14]=o*v+l*g+d*m+e[14],t[15]=a*v+h*g+p*m+e[15]),t}},{}],109:[function(t,e,r){e.exports=function(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=n,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},{}],110:[function(t,e,r){"use strict";var i=t("barycentric"),n=t("polytope-closest-point/lib/closest_point_2d.js");function o(t,e){for(var r=[0,0,0,0],i=0;i<4;++i)for(var n=0;n<4;++n)r[n]+=t[4*i+n]*e[i];return r}e.exports=function(t,e,r,a,s,u){if(1===t.length)return[0,t[0].slice()];for(var l=Array(t.length),h=0;h<t.length;++h)l[h]=function(t,e,r,i,n){for(var a=o(i,o(r,o(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)a[s]/=a[3];return[.5*n[0]*(1+a[0]),.5*n[1]*(1-a[1])]}(t[h],r,a,s,u);for(var f=0,c=1/0,h=0;h<l.length;++h){for(var d=0,p=0;p<2;++p)d+=Math.pow(l[h][p]-e[p],2);d<c&&(c=d,f=h)}for(var v=function(t,e){if(2===t.length){for(var r=0,o=0,a=0;a<2;++a)r+=Math.pow(e[a]-t[0][a],2),o+=Math.pow(e[a]-t[1][a],2);return(r=Math.sqrt(r))+(o=Math.sqrt(o))<1e-6?[1,0]:[o/(r+o),r/(o+r)]}if(3===t.length){var s=[0,0];return n(t[0],t[1],t[2],e,s),i(t,s)}return[]}(l,e),g=0,h=0;h<3;++h){if(v[h]<-.001||v[h]>1.0001)return null;g+=v[h]}return Math.abs(g-1)>.001?null:[f,function(t,e){for(var r=[0,0,0],i=0;i<t.length;++i)for(var n=t[i],o=e[i],a=0;a<3;++a)r[a]+=o*n[a];return r}(t,v),v]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(t,e,r){var i=t("glslify"),n=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),o=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),d=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);r.meshShader={vertex:n,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.pointShader={vertex:u,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},r.pickShader={vertex:h,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},r.pointPickShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},r.contourShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(t,e,r){"use strict";var i=t("gl-shader"),n=t("gl-buffer"),o=t("gl-vao"),a=t("gl-texture2d"),s=t("normals"),u=t("gl-mat4/multiply"),l=t("gl-mat4/invert"),h=t("ndarray"),f=t("colormap"),c=t("simplicial-complex-contour"),d=t("typedarray-pool"),p=t("./lib/shaders"),v=t("./lib/closest-point"),g=p.meshShader,m=p.wireShader,b=p.pointShader,y=p.pickShader,x=p.pointPickShader,_=p.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function M(t,e,r,i,n,o,a,s,u,l,h,f,c,d,p,v,g,m,b,y,x,_,M,E,A,T,R){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=i,this.pointShader=n,this.pickShader=o,this.pointPickShader=a,this.contourShader=s,this.trianglePositions=u,this.triangleColors=h,this.triangleNormals=c,this.triangleUVs=f,this.triangleIds=l,this.triangleVAO=d,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=g,this.edgeUVs=m,this.edgeIds=v,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=y,this.pointColors=_,this.pointUVs=M,this.pointSizes=E,this.pointIds=x,this.pointVAO=A,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=T,this.contourVAO=R,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var E=M.prototype;function A(t,e){if(!e||!e.length)return 1;for(var r=0;r<e.length&&!(e.length<2);++r){if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(t){this.pickId=t},E.highlight=function(t){if(!t||!this.contourEnable){this.contourCount=0;return}for(var e=c(this.cells,this.intensity,t.intensity),r=e.cells,i=e.vertexIds,n=e.vertexWeights,o=r.length,a=d.mallocFloat32(6*o),s=0,u=0;u<o;++u)for(var l=r[u],h=0;h<2;++h){var f=l[0];2===l.length&&(f=l[h]);for(var p=i[f][0],v=i[f][1],g=n[f],m=1-g,b=this.positions[p],y=this.positions[v],x=0;x<3;++x)a[s++]=g*b[x]+m*y[x]}this.contourCount=s/3|0,this.contourPositions.update(a.subarray(0,s)),d.free(a)},E.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=a(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var r=f({colormap:t,nshades:256,format:"rgba"}),i=new Uint8Array(1024),n=0;n<256;++n){for(var o=r[n],a=0;a<3;++a)i[4*n+a]=o[a];e?i[4*n+3]=255*A(n/255,e):i[4*n+3]=255*o[3]}return h(i,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,i=t.positions;if(i&&r){var n=[],o=[],u=[],l=[],c=[],d=[],p=[],v=[],g=[],m=[],b=[],y=[],x=[],_=[];this.cells=r,this.positions=i;var w=t.vertexNormals,M=t.cellNormals,E=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,T=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!M&&(M=s.faceNormals(r,i,T)),M||w||(w=s.vertexNormals(r,i,E));var R=t.vertexColors,k=t.cellColors,S=t.meshColor||[1,1,1,1],O=t.vertexUVs,C=t.vertexIntensity,L=t.cellUVs,I=t.cellIntensity,P=1/0,B=-1/0;if(!O&&!L){if(C){if(t.vertexIntensityBounds)P=+t.vertexIntensityBounds[0],B=+t.vertexIntensityBounds[1];else for(var N=0;N<C.length;++N){var F=C[N];P=Math.min(P,F),B=Math.max(B,F)}}else if(I){if(t.cellIntensityBounds)P=+t.cellIntensityBounds[0],B=+t.cellIntensityBounds[1];else for(var N=0;N<I.length;++N){var F=I[N];P=Math.min(P,F),B=Math.max(B,F)}}else for(var N=0;N<i.length;++N){var F=i[N][2];P=Math.min(P,F),B=Math.max(B,F)}}C?this.intensity=C:I?this.intensity=I:this.intensity=function(t){for(var e=t.length,r=Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i),this.pickVertex=!(I||k);var z=t.pointSizes,D=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var N=0;N<i.length;++N)for(var U=i[N],j=0;j<3;++j)!isNaN(U[j])&&isFinite(U[j])&&(this.bounds[0][j]=Math.min(this.bounds[0][j],U[j]),this.bounds[1][j]=Math.max(this.bounds[1][j],U[j]));var G=0,V=0,H=0;i:for(var N=0;N<r.length;++N){var W=r[N];switch(W.length){case 1:for(var X,Y,q=W[0],U=i[q],j=0;j<3;++j)if(isNaN(U[j])||!isFinite(U[j]))continue i;m.push(U[0],U[1],U[2]),X=R?R[q]:k?k[N]:S,this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?b.push(X[0],X[1],X[2],this.opacity):(b.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),Y=O?O[q]:C?[(C[q]-P)/(B-P),0]:L?L[N]:I?[(I[N]-P)/(B-P),0]:[(U[2]-P)/(B-P),0],y.push(Y[0],Y[1]),z?x.push(z[q]):x.push(D),_.push(N),H+=1;break;case 2:for(var j=0;j<2;++j)for(var q=W[j],U=i[q],Z=0;Z<3;++Z)if(isNaN(U[Z])||!isFinite(U[Z]))continue i;for(var j=0;j<2;++j){var X,Y,q=W[j],U=i[q];d.push(U[0],U[1],U[2]),X=R?R[q]:k?k[N]:S,this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?p.push(X[0],X[1],X[2],this.opacity):(p.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),Y=O?O[q]:C?[(C[q]-P)/(B-P),0]:L?L[N]:I?[(I[N]-P)/(B-P),0]:[(U[2]-P)/(B-P),0],v.push(Y[0],Y[1]),g.push(N)}V+=1;break;case 3:for(var j=0;j<3;++j)for(var q=W[j],U=i[q],Z=0;Z<3;++Z)if(isNaN(U[Z])||!isFinite(U[Z]))continue i;for(var j=0;j<3;++j){var X,Y,K,q=W[2-j],U=i[q];n.push(U[0],U[1],U[2]),(X=R?R[q]:k?k[N]:S)?this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?o.push(X[0],X[1],X[2],this.opacity):(o.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)):o.push(.5,.5,.5,1),Y=O?O[q]:C?[(C[q]-P)/(B-P),0]:L?L[N]:I?[(I[N]-P)/(B-P),0]:[(U[2]-P)/(B-P),0],l.push(Y[0],Y[1]),K=w?w[q]:M[N],u.push(K[0],K[1],K[2]),c.push(N)}G+=1}}this.pointCount=H,this.edgeCount=V,this.triangleCount=G,this.pointPositions.update(m),this.pointColors.update(b),this.pointUVs.update(y),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(_)),this.edgePositions.update(d),this.edgeColors.update(p),this.edgeUVs.update(v),this.edgeIds.update(new Uint32Array(g)),this.trianglePositions.update(n),this.triangleColors.update(o),this.triangleUVs.update(l),this.triangleNormals.update(u),this.triangleIds.update(new Uint32Array(c))}},E.drawTransparent=E.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);var s={model:r,view:i,projection:n,inverseModel:w.slice(),clipBounds:o,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=l(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var h=Array(16);u(h,s.view,s.model),u(h,s.projection,h),l(h,h);for(var a=0;a<3;++a)s.eyePosition[a]=h[12+a]/h[15];for(var f=h[15],a=0;a<3;++a)f+=this.lightPosition[a]*h[4*a+3];for(var a=0;a<3;++a){for(var c=h[12+a],d=0;d<3;++d)c+=h[4*d+a]*this.lightPosition[d];s.lightPosition[a]=c/f}if(this.triangleCount>0){var p=this.triShader;p.bind(),p.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var p=this.lineShader;p.bind(),p.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var p=this.pointShader;p.bind(),p.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var p=this.contourShader;p.bind(),p.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:i,projection:n,clipBounds:o,pickId:this.pickId/255},u=this.pickShader;if(u.bind(),u.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var u=this.pointPickShader;u.bind(),u.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(t){if(!t||t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions,n=Array(r.length),o=0;o<r.length;++o)n[o]=i[r[o]];var a=t.coord[0],s=t.coord[1];if(!this.pickVertex){var u=this.positions[r[0]],l=this.positions[r[1]],h=this.positions[r[2]],f=[(u[0]+l[0]+h[0])/3,(u[1]+l[1]+h[1])/3,(u[2]+l[2]+h[2])/3];return{_cellCenter:!0,position:[a,s],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:f}}var c=v(n,[a*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!c)return null;for(var d=c[2],p=0,o=0;o<r.length;++o)p+=d[o]*this.intensity[r[o]];return{position:c[1],index:r[c[0]],cell:r,cellId:e,intensity:p,dataCoordinate:this.positions[r[c[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(t,e){if(1==arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var r,s,u,l,f,c,d=((r=i(t,g.vertex,g.fragment)).attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.normal.location=4,r),p=((s=i(t,m.vertex,m.fragment)).attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s),v=((u=i(t,b.vertex,b.fragment)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.pointSize.location=4,u),w=((l=i(t,y.vertex,y.fragment)).attributes.position.location=0,l.attributes.id.location=1,l),E=((f=i(t,x.vertex,x.fragment)).attributes.position.location=0,f.attributes.id.location=1,f.attributes.pointSize.location=4,f),A=((c=i(t,_.vertex,_.fragment)).attributes.position.location=0,c),T=a(t,h(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=t.LINEAR_MIPMAP_LINEAR,T.magFilter=t.LINEAR;var R=n(t),k=n(t),S=n(t),O=n(t),C=n(t),L=o(t,[{buffer:R,type:t.FLOAT,size:3},{buffer:C,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:k,type:t.FLOAT,size:4},{buffer:S,type:t.FLOAT,size:2},{buffer:O,type:t.FLOAT,size:3}]),I=n(t),P=n(t),B=n(t),N=n(t),F=o(t,[{buffer:I,type:t.FLOAT,size:3},{buffer:N,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:t.FLOAT,size:4},{buffer:B,type:t.FLOAT,size:2}]),z=n(t),D=n(t),U=n(t),j=n(t),G=n(t),V=o(t,[{buffer:z,type:t.FLOAT,size:3},{buffer:G,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:D,type:t.FLOAT,size:4},{buffer:U,type:t.FLOAT,size:2},{buffer:j,type:t.FLOAT,size:1}]),H=n(t),W=o(t,[{buffer:H,type:t.FLOAT,size:3}]),X=new M(t,T,d,p,v,w,E,A,R,C,k,S,O,L,I,N,P,B,F,z,G,D,U,j,V,H,W);return X.update(e),X}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=o(e,[0,0,0,1,1,0,1,1]),i=a(e,s.boxVert,s.lineFrag);return new u(t,r,i)};var i,n,o=t("gl-buffer"),a=t("gl-shader"),s=t("./shaders");function u(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var l=u.prototype;l.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},l.drawBox=(i=[0,0],n=[0,0],function(t,e,r,o,a){var s=this.plot,u=this.shader,l=s.gl;i[0]=t,i[1]=e,n[0]=r,n[1]=o,u.uniforms.lo=i,u.uniforms.hi=n,u.uniforms.color=a,l.drawArrays(l.TRIANGLE_STRIP,0,4)}),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=p(e),i=v(e,m.gridVert,m.gridFrag),n=v(e,m.tickVert,m.gridFrag);return new b(t,r,i,n)};var i,n,o,a,s,u,l,h,f,c,d,p=t("gl-buffer"),v=t("gl-shader"),g=t("binary-search-bounds"),m=t("./shaders");function b(t,e,r,i){this.plot=t,this.vbo=e,this.shader=r,this.tickShader=i,this.ticks=[[],[]]}function y(t,e){return t-e}var x=b.prototype;x.draw=(i=[0,0],n=[0,0],o=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.shader,a=this.ticks,s=t.gl,u=t._tickBounds,l=t.dataBox,h=t.viewBox,f=t.gridLineWidth,c=t.gridLineColor,d=t.gridLineEnable,p=t.pixelRatio,v=0;v<2;++v){var g=u[v],m=u[v+2]-g,b=.5*(l[v+2]+l[v]),y=l[v+2]-l[v];n[v]=2*m/y,i[v]=2*(g-b)/y}r.bind(),e.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=i,r.uniforms.dataScale=n;for(var x=0,v=0;v<2;++v){o[0]=o[1]=0,o[v]=1,r.uniforms.dataAxis=o,r.uniforms.lineWidth=f[v]/(h[v+2]-h[v])*p,r.uniforms.color=c[v];var _=6*a[v].length;d[v]&&_&&s.drawArrays(s.TRIANGLES,x,_),x+=_}}),x.drawTickMarks=(a=[0,0],s=[0,0],u=[1,0],l=[0,1],h=[0,0],f=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.tickShader,i=this.ticks,n=t.gl,o=t._tickBounds,c=t.dataBox,d=t.viewBox,p=t.pixelRatio,v=t.screenBox,m=v[2]-v[0],b=v[3]-v[1],x=d[2]-d[0],_=d[3]-d[1],w=0;w<2;++w){var M=o[w],E=o[w+2]-M,A=.5*(c[w+2]+c[w]),T=c[w+2]-c[w];s[w]=2*E/T,a[w]=2*(M-A)/T}s[0]*=x/m,a[0]*=x/m,s[1]*=_/b,a[1]*=_/b,r.bind(),e.bind(),r.attributes.dataCoord.pointer();var R=r.uniforms;R.dataShift=a,R.dataScale=s;var k=t.tickMarkLength,S=t.tickMarkWidth,O=t.tickMarkColor,C=6*i[0].length,L=Math.min(g.ge(i[0],(c[0]-o[0])/(o[2]-o[0]),y),i[0].length),I=Math.min(g.gt(i[0],(c[2]-o[0])/(o[2]-o[0]),y),i[0].length),P=0+6*L,B=6*Math.max(0,I-L),N=Math.min(g.ge(i[1],(c[1]-o[1])/(o[3]-o[1]),y),i[1].length),F=Math.min(g.gt(i[1],(c[3]-o[1])/(o[3]-o[1]),y),i[1].length),z=C+6*N,D=6*Math.max(0,F-N);h[0]=2*(d[0]-k[1])/m-1,h[1]=(d[3]+d[1])/b-1,f[0]=k[1]*p/m,f[1]=S[1]*p/b,D&&(R.color=O[1],R.tickScale=f,R.dataAxis=l,R.screenOffset=h,n.drawArrays(n.TRIANGLES,z,D)),h[0]=(d[2]+d[0])/m-1,h[1]=2*(d[1]-k[0])/b-1,f[0]=S[0]*p/m,f[1]=k[0]*p/b,B&&(R.color=O[0],R.tickScale=f,R.dataAxis=u,R.screenOffset=h,n.drawArrays(n.TRIANGLES,P,B)),h[0]=2*(d[2]+k[3])/m-1,h[1]=(d[3]+d[1])/b-1,f[0]=k[3]*p/m,f[1]=S[3]*p/b,D&&(R.color=O[3],R.tickScale=f,R.dataAxis=l,R.screenOffset=h,n.drawArrays(n.TRIANGLES,z,D)),h[0]=(d[2]+d[0])/m-1,h[1]=2*(d[3]+k[2])/b-1,f[0]=S[2]*p/m,f[1]=k[2]*p/b,B&&(R.color=O[2],R.tickScale=f,R.dataAxis=u,R.screenOffset=h,n.drawArrays(n.TRIANGLES,P,B))}),x.update=(c=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1],function(t){var e=t.ticks,r=t.bounds,i=new Float32Array(18*(e[0].length+e[1].length));this.plot.zeroLineEnable;for(var n=0,o=[[],[]],a=0;a<2;++a)for(var s=o[a],u=e[a],l=r[a],h=r[a+2],f=0;f<u.length;++f){var p=(u[f].x-l)/(h-l);s.push(p);for(var v=0;v<6;++v)i[n++]=p,i[n++]=c[v],i[n++]=d[v]}this.ticks=o,this.vbo.update(i)}),x.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=o(e,[-1,-1,-1,1,1,-1,1,1]),i=a(e,s.lineVert,s.lineFrag);return new u(t,r,i)};var i,n,o=t("gl-buffer"),a=t("gl-shader"),s=t("./shaders");function u(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var l=u.prototype;l.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},l.drawLine=(i=[0,0],n=[0,0],function(t,e,r,o,a,s){var u=this.plot,l=this.shader,h=u.gl;i[0]=t,i[1]=e,n[0]=r,n[1]=o,l.uniforms.start=i,l.uniforms.end=n,l.uniforms.width=a*u.pixelRatio,l.uniforms.color=s,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(t,e,r){"use strict";var i=t("glslify"),n=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);e.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:n,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:n,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:n,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=f(e),i=c(e,v.textVert,v.textFrag);return new g(t,r,i)};var i,n,o,a,s,u,l,h,f=t("gl-buffer"),c=t("gl-shader"),d=t("text-cache"),p=t("binary-search-bounds"),v=t("./shaders");function g(t,e,r){this.plot=t,this.vbo=e,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var m=g.prototype;m.drawTicks=(i=[0,0],n=[0,0],o=[0,0],function(t){var e=this.plot,r=this.shader,a=this.tickX[t],s=this.tickOffset[t],u=e.gl,l=e.viewBox,h=e.dataBox,f=e.screenBox,c=e.pixelRatio,d=e.tickEnable,v=e.tickPad,g=e.tickColor,m=e.tickAngle,b=e.labelEnable,y=e.labelPad,x=e.labelColor,_=e.labelAngle,w=this.labelOffset[t],M=this.labelCount[t],E=p.lt(a,h[t]),A=p.le(a,h[t+2]);i[0]=i[1]=0,i[t]=1,n[t]=(l[2+t]+l[t])/(f[2+t]-f[t])-1;var T=2/f[2+(1^t)]-f[1^t];n[1^t]=T*l[1^t]-1,d[t]&&(n[1^t]-=T*c*v[t],E<A&&s[A]>s[E]&&(r.uniforms.dataAxis=i,r.uniforms.screenOffset=n,r.uniforms.color=g[t],r.uniforms.angle=m[t],u.drawArrays(u.TRIANGLES,s[E],s[A]-s[E]))),b[t]&&M&&(n[1^t]-=T*c*y[t],r.uniforms.dataAxis=o,r.uniforms.screenOffset=n,r.uniforms.color=x[t],r.uniforms.angle=_[t],u.drawArrays(u.TRIANGLES,w,M)),n[1^t]=T*l[2+(1^t)]-1,d[t+2]&&(n[1^t]+=T*c*v[t+2],E<A&&s[A]>s[E]&&(r.uniforms.dataAxis=i,r.uniforms.screenOffset=n,r.uniforms.color=g[t+2],r.uniforms.angle=m[t+2],u.drawArrays(u.TRIANGLES,s[E],s[A]-s[E]))),b[t+2]&&M&&(n[1^t]+=T*c*y[t+2],r.uniforms.dataAxis=o,r.uniforms.screenOffset=n,r.uniforms.color=x[t+2],r.uniforms.angle=_[t+2],u.drawArrays(u.TRIANGLES,w,M))}),m.drawTitle=(a=[0,0],s=[0,0],function(){var t=this.plot,e=this.shader,r=t.gl,i=t.screenBox,n=t.titleCenter,o=t.titleAngle,u=t.titleColor,l=t.pixelRatio;if(this.titleCount){for(var h=0;h<2;++h)s[h]=2*(n[h]*l-i[h])/(i[2+h]-i[h])-1;e.bind(),e.uniforms.dataAxis=a,e.uniforms.screenOffset=s,e.uniforms.angle=o,e.uniforms.color=u,r.drawArrays(r.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(u=[0,0],l=[0,0],h=[0,0],function(){var t=this.plot,e=this.shader,r=t._tickBounds,i=t.dataBox,n=t.screenBox,o=t.viewBox;e.bind();for(var a=0;a<2;++a){var s=r[a],f=r[a+2]-s,c=.5*(i[a+2]+i[a]),d=i[a+2]-i[a],p=o[a],v=o[a+2]-p,g=n[a],m=n[a+2]-g;l[a]=2*f/d*v/m,u[a]=2*(s-c)/d*v/m}h[1]=2*t.pixelRatio/(n[3]-n[1]),h[0]=h[1]*(n[3]-n[1])/(n[2]-n[0]),e.uniforms.dataScale=l,e.uniforms.dataShift=u,e.uniforms.textScale=h,this.vbo.bind(),e.attributes.textCoordinate.pointer()}),m.update=function(t){var e,r,i,n,o,a=[],s=t.ticks,u=t.bounds;for(o=0;o<2;++o){var l=[Math.floor(a.length/3)],h=[-1/0],f=s[o];for(e=0;e<f.length;++e){var c=f[e],p=c.x,v=c.text,g=c.font||"sans-serif";n=c.fontSize||12;for(var m=1/(u[o+2]-u[o]),b=u[o],y=v.split("\n"),x=0;x<y.length;x++)for(r=0,i=d(g,y[x]).data;r<i.length;r+=2)a.push(i[r]*n,-i[r+1]*n-x*n*1.2,(p-b)*m);l.push(Math.floor(a.length/3)),h.push(p)}this.tickOffset[o]=l,this.tickX[o]=h}for(o=0;o<2;++o){for(e=0,this.labelOffset[o]=Math.floor(a.length/3),i=d(t.labelFont[o],t.labels[o],{textAlign:"center"}).data,n=t.labelSize[o];e<i.length;e+=2)a.push(i[e]*n,-i[e+1]*n,0);this.labelCount[o]=Math.floor(a.length/3)-this.labelOffset[o]}for(e=0,this.titleOffset=Math.floor(a.length/3),i=d(t.titleFont,t.title).data,n=t.titleSize;e<i.length;e+=2)a.push(i[e]*n,-i[e+1]*n,0);this.titleCount=Math.floor(a.length/3)-this.titleOffset,this.vbo.update(a)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=i(e,[e.drawingBufferWidth,e.drawingBufferHeight]),l=new u(e,r);return l.grid=n(l),l.text=o(l),l.line=a(l),l.box=s(l),l.update(t),l};var i=t("gl-select-static"),n=t("./lib/grid"),o=t("./lib/text"),a=t("./lib/line"),s=t("./lib/box");function u(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var l=u.prototype;function h(t){for(var e=t.slice(),r=0;r<e.length;++r)e[r]=e[r].slice();return e}function f(t,e){return t.x-e.x}l.setDirty=function(){this.dirty=this.pickDirty=!0},l.setOverlayDirty=function(){this.dirty=!0},l.nextDepthValue=function(){return this._depthCounter++/65536},l.draw=function(){var t=this.gl,e=this.screenBox,r=this.viewBox,i=this.dataBox,n=this.pixelRatio,o=this.grid,a=this.line,s=this.text,u=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var l=this.borderColor;t.clearColor(l[0]*l[3],l[1]*l[3],l[2]*l[3],l[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),t.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var h=this.backgroundColor;t.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),t.clear(t.COLOR_BUFFER_BIT),o.draw();var f=this.zeroLineEnable,c=this.zeroLineColor,d=this.zeroLineWidth;if(f[0]||f[1]){a.bind();for(var p=0;p<2;++p)if(f[p]&&i[p]<=0&&i[p+2]>=0){var v=e[p]-i[p]*(e[p+2]-e[p])/(i[p+2]-i[p]);0===p?a.drawLine(v,e[1],v,e[3],d[p],c[p]):a.drawLine(e[0],v,e[2],v,d[p],c[p])}}for(var p=0;p<u.length;++p)u[p].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),a.bind();var g=this.borderLineEnable,m=this.borderLineWidth,b=this.borderLineColor;g[1]&&a.drawLine(r[0],r[1]-.5*m[1]*n,r[0],r[3]+.5*m[3]*n,m[1],b[1]),g[0]&&a.drawLine(r[0]-.5*m[0]*n,r[1],r[2]+.5*m[2]*n,r[1],m[0],b[0]),g[3]&&a.drawLine(r[2],r[1]-.5*m[1]*n,r[2],r[3]+.5*m[3]*n,m[3],b[3]),g[2]&&a.drawLine(r[0]-.5*m[0]*n,r[3],r[2]+.5*m[2]*n,r[3],m[2],b[2]),s.bind();for(var p=0;p<2;++p)s.drawTicks(p);this.titleEnable&&s.drawTitle();for(var y=this.overlays,p=0;p<y.length;++p)y[p].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},l.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl,this._pickTimeout=null,t.begin();for(var e=1,r=this.objects,i=0;i<r.length;++i)e=r[i].drawPick(e);t.end()}},l.pick=function(t,e){if(!this.static){var r=this.pixelRatio,i=this.pickPixelRatio,n=this.viewBox,o=0|Math.round((t-n[0]/r)*i),a=0|Math.round((e-n[1]/r)*i),s=this.pickBuffer.query(o,a,this.pickRadius);if(!s)return null;for(var u=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),l=this.objects,h=0;h<l.length;++h){var f=l[h].pick(o,a,u);if(f)return f}return null}},l.setScreenBox=function(t){var e=this.screenBox,r=this.pixelRatio;e[0]=0|Math.round(t[0]*r),e[1]=0|Math.round(t[1]*r),e[2]=0|Math.round(t[2]*r),e[3]=0|Math.round(t[3]*r),this.setDirty()},l.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},l.setViewBox=function(t){var e=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(t[0]*e),r[1]=0|Math.round(t[1]*e),r[2]=0|Math.round(t[2]*e),r[3]=0|Math.round(t[3]*e);var i=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*i),0|Math.round((t[3]-t[1])*i)],this.setDirty()},l.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/r,e.drawingBufferHeight/r]),this.screenBox,this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var i=this.viewBox,n=(i[2]-i[0])/(i[3]-i[1]);this.setDataBox(t.dataBox||[-10,-10/n,10,10/n]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(i[0]+i[2])/r,(i[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in t)||!!t.titleEnable,this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=t.ticks||[[],[]],a=this._tickBounds;a[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var s=0;s<2;++s){var u=o[s].slice(0);0!==u.length&&(u.sort(f),a[s]=Math.min(a[s],u[0].x),a[s+2]=Math.max(a[s+2],u[u.length-1].x))}this.grid.update({bounds:a,ticks:o}),this.text.update({bounds:a,ticks:o,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif"}),this.static=!!t.static,this.setDirty()},l.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();this.objects.length=0;for(var t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},l.addObject=function(t){0>this.objects.indexOf(t)&&(this.objects.push(t),this.setDirty())},l.removeObject=function(t){for(var e=this.objects,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setDirty();break}},l.addOverlay=function(t){0>this.overlays.indexOf(t)&&(this.overlays.push(t),this.setOverlayDirty())},l.removeOverlay=function(t){for(var e=this.overlays,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(t,e,r){"use strict";e.exports=function(t,e){t=t||document.body;var r=[.01,1/0];"distanceLimits"in(e=e||{})&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]),"zoomMin"in e&&(r[0]=e.zoomMin),"zoomMax"in e&&(r[1]=e.zoomMax);var l=n({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,c=t.clientWidth,d=t.clientHeight,p={keyBindingMode:"rotate",enableWheel:!0,view:l,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:l.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=i(),r=this.delay;l.idle(e-r),l.recalcMatrix(e-2*r),l.flush(e-(100+2*r));for(var n=!0,o=l.computedMatrix,a=0;a<16;++a)n=n&&h[a]===o[a],h[a]=o[a];var s=t.clientWidth===c&&t.clientHeight===d;return(c=t.clientWidth,d=t.clientHeight,n)?!s:(f=Math.exp(l.computedRadius[0]),!0)},lookAt:function(t,e,r){l.lookAt(l.lastT(),t,e,r)},rotate:function(t,e,r){l.rotate(l.lastT(),t,e,r)},pan:function(t,e,r){l.pan(l.lastT(),t,e,r)},translate:function(t,e,r){l.translate(l.lastT(),t,e,r)}};return Object.defineProperties(p,{matrix:{get:function(){return l.computedMatrix},set:function(t){return l.setMatrix(l.lastT(),t),l.computedMatrix},enumerable:!0},mode:{get:function(){return l.getMode()},set:function(t){var e=l.computedUp.slice(),r=l.computedEye.slice(),n=l.computedCenter.slice();if(l.setMode(t),"turntable"===t){var o=i();l._active.lookAt(o,r,n,e),l._active.lookAt(o+500,r,n,[0,0,1]),l._active.flush(o)}return l.getMode()},enumerable:!0},center:{get:function(){return l.computedCenter},set:function(t){return l.lookAt(l.lastT(),null,t),l.computedCenter},enumerable:!0},eye:{get:function(){return l.computedEye},set:function(t){return l.lookAt(l.lastT(),t),l.computedEye},enumerable:!0},up:{get:function(){return l.computedUp},set:function(t){return l.lookAt(l.lastT(),null,null,t),l.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(t){return l.setDistance(l.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return l.getDistanceLimits(r)},set:function(t){return l.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),p._lastX=-1,p._lastY=-1,p._lastMods={shift:!1,control:!1,alt:!1,meta:!1},p.enableMouseListeners=function(){function e(e,r,n,o){var a=p.keyBindingMode;if(!1!==a){var s=!!o.control,u=!!o.alt,h=!!o.shift,c=!!(1&e),d=1/t.clientHeight,v=d*(r-p._lastX),g=d*(n-p._lastY),m=p.flipX?1:-1,b=p.flipY?1:-1,y=Math.PI*p.rotateSpeed,x=i();if(-1!==p._lastX&&-1!==p._lastY&&(("rotate"!==a||!c||s||u||h)&&(!c||s||u||!h)||l.rotate(x,m*y*v,-b*y*g,0),("pan"!==a||!c||s||u||h)&&!(2&e)&&(!c||!s||u||h)||l.pan(x,-p.translateSpeed*v*f,p.translateSpeed*g*f,0),"zoom"===a&&c&&!s&&!u&&!h||4&e||c&&!s&&u&&!h)){var _=-p.zoomSpeed*g/window.innerHeight*(x-l.lastT())*100;l.pan(x,0,0,f*(Math.exp(_)-1))}return p._lastX=r,p._lastY=n,p._lastMods=o,!0}}p.mouseListener=o(t,e),t.addEventListener("touchstart",function(r){var i=s(r.changedTouches[0],t);e(0,i[0],i[1],p._lastMods),e(1,i[0],i[1],p._lastMods)},!!u&&{passive:!0}),t.addEventListener("touchmove",function(r){var i=s(r.changedTouches[0],t);e(1,i[0],i[1],p._lastMods),r.preventDefault()},!!u&&{passive:!1}),t.addEventListener("touchend",function(t){e(0,p._lastX,p._lastY,p._lastMods)},!!u&&{passive:!0}),p.wheelListener=a(t,function(t,e){if(!1!==p.keyBindingMode&&p.enableWheel){var r=p.flipX?1:-1,n=p.flipY?1:-1,o=i();if(Math.abs(t)>Math.abs(e))l.rotate(o,0,0,-t*r*Math.PI*p.rotateSpeed/window.innerWidth);else if(!p._ortho){var a=-p.zoomSpeed*n*e/window.innerHeight*(o-l.lastT())/20;l.pan(o,0,0,f*(Math.exp(a)-1))}}},!0)},p.enableMouseListeners(),p};var i=t("right-now"),n=t("3d-view"),o=t("mouse-change"),a=t("mouse-wheel"),s=t("mouse-event-offset"),u=t("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(t,e,r){var i=t("glslify"),n=t("gl-shader"),o=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(t){return n(t,o,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(t,e,r){"use strict";var i=t("./camera.js"),n=t("gl-axes3d"),o=t("gl-axes3d/properties"),a=t("gl-spikes3d"),s=t("gl-select-static"),u=t("gl-fbo"),l=t("a-big-triangle"),h=t("mouse-change"),f=t("gl-mat4/perspective"),c=t("gl-mat4/ortho"),d=t("./lib/shader"),p=t("is-mobile")({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(t){return"boolean"!=typeof t||t}e.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;e||(e=document.createElement("canvas"),t.container?t.container.appendChild(e):document.body.appendChild(e));var r=t.gl;if(r||(t.glOptions&&(p=!!t.glOptions.preserveDrawingBuffer),r=function(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!r)throw Error("webgl not supported");var m=t.bounds||[[-10,-10,-10],[10,10,10]],b=new v,y=u(r,r.drawingBufferWidth,r.drawingBufferHeight,{preferFloat:!p}),x=d(r),_=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,w={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:_},M=t.axes||{},E=n(r,M);E.enable=!M.disable;var A=a(r,t.spikes||{}),T=[],R=[],k=[],S=[],O=!0,C=!0,L={view:null,projection:Array(16),model:Array(16),_ortho:!1},C=!0,I=[r.drawingBufferWidth,r.drawingBufferHeight],P=t.cameraObject||i(e,w),B={gl:r,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:b,camera:P,axes:E,axesPixels:null,spikes:A,bounds:m,objects:T,shape:I,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:g(t.autoResize),autoBounds:g(t.autoBounds),autoScale:!!t.autoScale,autoCenter:g(t.autoCenter),clipToBounds:g(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:L,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,C=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},N=[r.drawingBufferWidth/B.pixelRatio|0,r.drawingBufferHeight/B.pixelRatio|0];function F(){if(!B._stopped&&B.autoResize){var t=e.parentNode,r=1,i=1;t&&t!==document.body?(r=t.clientWidth,i=t.clientHeight):(r=window.innerWidth,i=window.innerHeight);var n=0|Math.ceil(r*B.pixelRatio),o=0|Math.ceil(i*B.pixelRatio);if(n!==e.width||o!==e.height){e.width=n,e.height=o;var a=e.style;a.position=a.position||"absolute",a.left="0px",a.top="0px",a.width=r+"px",a.height=i+"px",O=!0}}}function z(){for(var t=T.length,e=S.length,i=0;i<e;++i)k[i]=0;n:for(var i=0;i<t;++i){var n=T[i],o=n.pickSlots;if(!o){R[i]=-1;continue}for(var a=0;a<e;++a)if(k[a]+o<255){R[i]=a,n.setPickBase(k[a]+1),k[a]+=o;continue n}var u=s(r,I);R[i]=e,S.push(u),k.push(o),n.setPickBase(1),e+=1}for(;e>0&&0===k[e-1];)k.pop(),S.pop().dispose()}function D(){if(B.contextLost)return!0;r.isContextLost()&&(B.contextLost=!0,B.mouseListener.enabled=!1,B.selection.object=null,B.oncontextloss&&B.oncontextloss())}B.autoResize&&F(),window.addEventListener("resize",F),B.update=function(t){B._stopped||(t=t||{},O=!0,C=!0)},B.add=function(t){B._stopped||(t.axes=E,T.push(t),R.push(-1),O=!0,C=!0,z())},B.remove=function(t){if(!B._stopped){var e=T.indexOf(t);e<0||(T.splice(e,1),R.pop(),O=!0,C=!0,z())}},B.dispose=function(){if(!B._stopped&&(B._stopped=!0,window.removeEventListener("resize",F),e.removeEventListener("webglcontextlost",D),B.mouseListener.enabled=!1,!B.contextLost)){E.dispose(),A.dispose();for(var t=0;t<T.length;++t)T[t].dispose();y.dispose();for(var t=0;t<S.length;++t)S[t].dispose();x.dispose(),r=null,E=null,A=null,T=[]}},B._mouseRotating=!1,B._prevButtons=0,B.enableMouseListeners=function(){B.mouseListener=h(e,function(t,e,r){if(!B._stopped){var i=S.length,n=T.length,o=b.object;b.distance=1/0,b.mouse[0]=e,b.mouse[1]=r,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var a=!1;if(t&&B._prevButtons)B._mouseRotating=!0;else{B._mouseRotating&&(C=!0),B._mouseRotating=!1;for(var s=0;s<i;++s){var u=S[s].query(e,N[1]-r-1,B.pickRadius);if(u){if(u.distance>b.distance)continue;for(var l=0;l<n;++l){var h=T[l];if(R[l]===s){var f=h.pick(u);f&&(b.buttons=t,b.screen=u.coord,b.distance=u.distance,b.object=h,b.index=f.distance,b.dataPosition=f.position,b.dataCoordinate=f.dataCoordinate,b.data=f,a=!0)}}}}}o&&o!==b.object&&(o.highlight&&o.highlight(null),O=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),O=!0),(a=a||b.object!==o)&&B.onselect&&B.onselect(b),1&t&&!(1&B._prevButtons)&&B.onclick&&B.onclick(b),B._prevButtons=t}})},e.addEventListener("webglcontextlost",D);var U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=[U[0].slice(),U[1].slice()];function G(){if(!D()){F();var t=B.camera.tick();L.view=B.camera.matrix,O=O||t,C=C||t,E.pixelRatio=B.pixelRatio,A.pixelRatio=B.pixelRatio;var e=T.length,i=U[0],n=U[1];i[0]=i[1]=i[2]=1/0,n[0]=n[1]=n[2]=-1/0;for(var a=0;a<e;++a){var s=T[a];s.pixelRatio=B.pixelRatio,s.axes=B.axes,O=O||!!s.dirty,C=C||!!s.dirty;var u=s.bounds;if(u)for(var h=u[0],d=u[1],p=0;p<3;++p)i[p]=Math.min(i[p],h[p]),n[p]=Math.max(n[p],d[p])}var v=B.bounds;if(B.autoBounds)for(var p=0;p<3;++p){if(n[p]<i[p])i[p]=-1,n[p]=1;else{i[p]===n[p]&&(i[p]-=1,n[p]+=1);var g=.05*(n[p]-i[p]);i[p]=i[p]-g,n[p]=n[p]+g}v[0][p]=i[p],v[1][p]=n[p]}for(var m=!1,p=0;p<3;++p)m=m||j[0][p]!==v[0][p]||j[1][p]!==v[1][p],j[0][p]=v[0][p],j[1][p]=v[1][p];if(C=C||m,O=O||m){if(m){for(var w=[0,0,0],a=0;a<3;++a)w[a]=function(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}if(e>0){var r=Math.round(Math.pow(10,e));return Math.ceil(t/r)*r}return Math.ceil(t)}((v[1][a]-v[0][a])/10);E.autoTicks?E.update({bounds:v,tickSpacing:w}):E.update({bounds:v})}var M=r.drawingBufferWidth,k=r.drawingBufferHeight;I[0]=M,I[1]=k,N[0]=0|Math.max(M/B.pixelRatio,1),N[1]=0|Math.max(k/B.pixelRatio,1),function(t,e){var r=t.bounds,i=t.cameraParams,n=i.projection,o=i.model,a=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,u=t.zNear,l=t.zFar,h=t.fovy,d=a/s;e?(c(n,-d,d,-1,1,u,l),i._ortho=!0):(f(n,h,d,u,l),i._ortho=!1);for(var p=0;p<16;++p)o[p]=0;o[15]=1;for(var v=0,p=0;p<3;++p)v=Math.max(v,r[1][p]-r[0][p]);for(var p=0;p<3;++p)t.autoScale?o[5*p]=t.aspect[p]/(r[1][p]-r[0][p]):o[5*p]=1/v,t.autoCenter&&(o[12+p]=-(.5*o[5*p])*(r[0][p]+r[1][p]))}(B,_);for(var a=0;a<e;++a){var s=T[a];s.axesBounds=v,B.clipToBounds&&(s.clipBounds=v)}b.object&&(B.snapToData?A.position=b.dataCoordinate:A.position=b.dataPosition,A.bounds=v),C&&(C=!1,function(){if(!D()){r.colorMask(!0,!0,!0,!0),r.depthMask(!0),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);for(var t=T.length,e=S.length,i=0;i<e;++i){var n=S[i];n.shape=N,n.begin();for(var o=0;o<t;++o)if(R[o]===i){var a=T[o];a.drawPick&&(a.pixelRatio=1,a.drawPick(L))}n.end()}}}()),B.axesPixels=o(B.axes,L,M,k),B.onrender&&B.onrender(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,M,k),B.clearRGBA(),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.disable(r.BLEND),r.disable(r.CULL_FACE);var P=!1;E.enable&&(P=P||E.isTransparent(),E.draw(L)),A.axes=E,b.object&&A.draw(L),r.disable(r.CULL_FACE);for(var a=0;a<e;++a){var s=T[a];s.axes=E,s.pixelRatio=B.pixelRatio,s.isOpaque&&s.isOpaque()&&s.draw(L),s.isTransparent&&s.isTransparent()&&(P=!0)}if(P){y.shape=I,y.bind(),r.clear(r.DEPTH_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.depthMask(!0),r.depthFunc(r.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(L);for(var a=0;a<e;++a){var s=T[a];s.isOpaque&&s.isOpaque()&&s.draw(L)}r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.colorMask(!0,!0,!0,!0),r.depthMask(!1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(L);for(var a=0;a<e;++a){var s=T[a];s.isTransparent&&s.isTransparent()&&s.drawTransparent(L)}r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),x.bind(),y.color[0].bind(0),x.uniforms.accumBuffer=0,l(r),r.disable(r.BLEND)}O=!1;for(var a=0;a<e;++a)T[a].dirty=!1}}}return B.enableMouseListeners(),function t(){B._stopped||B.contextLost||(G(),requestAnimationFrame(t))}(),B.redraw=function(){B._stopped||(O=!0,G())},B},createCamera:i}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(t,e,r){var i=t("glslify");r.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),r.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),r.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),r.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(t,e,r){"use strict";var i,n,o=t("gl-shader"),a=t("gl-buffer"),s=t("typedarray-pool"),u=t("./lib/shader");function l(t,e,r,i,n){this.plot=t,this.offsetBuffer=e,this.pickBuffer=r,this.shader=i,this.pickShader=n,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=function(t,e){var r=t.gl,i=a(r),n=a(r),s=o(r,u.pointVertex,u.pointFragment),h=o(r,u.pickVertex,u.pickFragment),f=new l(t,i,n,s,h);return f.update(e),t.addObject(f),f};var h=l.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(t){function e(e,r){return e in t?t[e]:r}t=t||{},this.sizeMin=e("sizeMin",.5),this.sizeMax=e("sizeMax",20),this.color=e("color",[1,0,0,1]).slice(),this.areaRatio=e("areaRatio",1),this.borderColor=e("borderColor",[0,0,0,1]).slice(),this.blend=e("blend",!1);var r,i=t.positions.length>>>1,n=t.positions instanceof Float32Array,o=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=i,a=t.positions,u=n?a:s.mallocFloat32(a.length),l=o?t.idToIndex:s.mallocInt32(i);if(n||u.set(a),!o)for(u.set(a),r=0;r<i;r++)l[r]=r;this.points=a,this.offsetBuffer.update(u),this.pickBuffer.update(l),n||s.free(u),o||s.free(l),this.pointCount=i,this.pickOffset=0},h.unifiedDraw=(i=[1,0,0,0,1,0,0,0,1],n=[0,0,0,0],function(t){var e=void 0!==t,r=e?this.pickShader:this.shader,o=this.plot.gl,a=this.plot.dataBox;if(0===this.pointCount)return t;var s=a[2]-a[0],u=a[3]-a[1],l=function(t,e){var r,i=0,n=t.length>>>1;for(r=0;r<n;r++){var o=t[2*r],a=t[2*r+1];o>=e[0]&&o<=e[2]&&a>=e[1]&&a<=e[3]&&i++}return i}(this.points,a),h=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(l,.33333)));i[0]=2/s,i[4]=2/u,i[6]=-2*a[0]/s-1,i[7]=-2*a[1]/u-1,this.offsetBuffer.bind(),r.bind(),r.attributes.position.pointer(),r.uniforms.matrix=i,r.uniforms.color=this.color,r.uniforms.borderColor=this.borderColor,r.uniforms.pointCloud=h<5,r.uniforms.pointSize=h,r.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),e&&(n[0]=255&t,n[1]=t>>8&255,n[2]=t>>16&255,n[3]=t>>24&255,this.pickBuffer.bind(),r.attributes.pickId.pointer(o.UNSIGNED_BYTE),r.uniforms.pickOffset=n,this.pickOffset=t);var f=o.getParameter(o.BLEND),c=o.getParameter(o.DITHER);return f&&!this.blend&&o.disable(o.BLEND),c&&o.disable(o.DITHER),o.drawArrays(o.POINTS,0,this.pointCount),f&&!this.blend&&o.enable(o.BLEND),c&&o.enable(o.DITHER),t+this.pointCount}),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(t,e,r){var i=this.pickOffset,n=this.pointCount;if(r<i||r>=i+n)return null;var o=r-i,a=this.points;return{object:this,pointId:o,dataCoord:[a[2*o],a[2*o+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(t,e,r){e.exports=function(t,e,r,i){var n,o,a,s,u,l=e[0],h=e[1],f=e[2],c=e[3],d=r[0],p=r[1],v=r[2],g=r[3];return(o=l*d+h*p+f*v+c*g)<0&&(o=-o,d=-d,p=-p,v=-v,g=-g),1-o>1e-6?(a=Math.sin(n=Math.acos(o)),s=Math.sin((1-i)*n)/a,u=Math.sin(i*n)/a):(s=1-i,u=i),t[0]=s*l+u*d,t[1]=s*h+u*p,t[2]=s*f+u*v,t[3]=s*c+u*g,t}},{}],125:[function(t,e,r){"use strict";e.exports=function(t){return t||0===t?t.toString():""}},{}],126:[function(t,e,r){"use strict";var i=t("vectorize-text");e.exports=function(t,e,r){var o,a,s=n[e];if(s||(s=n[e]={}),t in s)return s[t];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};u.triangles=!0;var l=i(t,u);u.triangles=!1;var h=i(t,u);if(r&&1!==r){for(o=0;o<l.positions.length;++o)for(a=0;a<l.positions[o].length;++a)l.positions[o][a]/=r;for(o=0;o<h.positions.length;++o)for(a=0;a<h.positions[o].length;++a)h.positions[o][a]/=r}var f=[[1/0,1/0],[-1/0,-1/0]],c=h.positions.length;for(o=0;o<c;++o){var d=h.positions[o];for(a=0;a<2;++a)f[0][a]=Math.min(f[0][a],d[a]),f[1][a]=Math.max(f[1][a],d[a])}return s[t]=[l,h,f]};var n={}},{"vectorize-text":311}],127:[function(t,e,r){var i=t("gl-shader"),n=t("glslify"),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:o,fragment:u,attributes:h},c={vertex:a,fragment:u,attributes:h},d={vertex:s,fragment:u,attributes:h},p={vertex:o,fragment:l,attributes:h},v={vertex:a,fragment:l,attributes:h},g={vertex:s,fragment:l,attributes:h};function m(t,e){var r=i(t,e),n=r.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,r}r.createPerspective=function(t){return m(t,f)},r.createOrtho=function(t){return m(t,c)},r.createProject=function(t){return m(t,d)},r.createPickPerspective=function(t){return m(t,p)},r.createPickOrtho=function(t){return m(t,v)},r.createPickProject=function(t){return m(t,g)}},{"gl-shader":132,glslify:231}],128:[function(t,e,r){"use strict";var i=t("is-string-blank"),n=t("gl-buffer"),o=t("gl-vao"),a=t("typedarray-pool"),s=t("gl-mat4/multiply"),u=t("./lib/shaders"),l=t("./lib/glyphs"),h=t("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(t,e){var r=t[0],i=t[1],n=t[2],o=t[3];return t[0]=e[0]*r+e[4]*i+e[8]*n+e[12]*o,t[1]=e[1]*r+e[5]*i+e[9]*n+e[13]*o,t[2]=e[2]*r+e[6]*i+e[10]*n+e[14]*o,t[3]=e[3]*r+e[7]*i+e[11]*n+e[15]*o,t}function d(t,e,r,i){return c(i,i,r),c(i,i,e),c(i,i,t)}function p(t,e){this.index=t,this.dataCoordinate=this.position=e}function v(t){return!0===t||t>1?1:t}function g(t,e,r,i,n,o,a,s,u,l,h,f){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=i,this.pointBuffer=n,this.colorBuffer=o,this.glyphBuffer=a,this.idBuffer=s,this.vao=u,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=l,this.pickOrthoShader=h,this.pickProjectShader=f,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(t){var e=t.gl,r=u.createPerspective(e),i=u.createOrtho(e),a=u.createProject(e),s=u.createPickPerspective(e),l=u.createPickOrtho(e),h=u.createPickProject(e),f=n(e),c=n(e),d=n(e),p=n(e),v=o(e,[{buffer:f,size:3,type:e.FLOAT},{buffer:c,size:4,type:e.FLOAT},{buffer:d,size:2,type:e.FLOAT},{buffer:p,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),m=new g(e,r,i,a,f,c,d,p,v,s,l,h);return m.update(t),m};var m=g.prototype;m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],y=[0,0,0],x=[0,0,0],_=[0,0,0,1],w=[0,0,0,1],M=f.slice(),E=[0,0,0],A=[[0,0,0],[0,0,0]];function T(t){return t[0]=t[1]=t[2]=0,t}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function k(t,e,r,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=i,t}var S=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function O(t,e,r,i,n,o,a){var u=r.gl;if((o===r.projectHasAlpha||a)&&function(t,e,r,i){var n,o=e.axesProject,a=e.gl,u=t.uniforms,l=r.model||f,h=r.view||f,c=r.projection||f,p=e.axesBounds,v=function(t){for(var e=A,r=0;r<2;++r)for(var i=0;i<3;++i)e[r][i]=Math.max(Math.min(t[r][i],1e8),-1e8);return e}(e.clipBounds);n=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],b[0]=2/a.drawingBufferWidth,b[1]=2/a.drawingBufferHeight,t.bind(),u.view=h,u.projection=c,u.screenSize=b,u.highlightId=e.highlightId,u.highlightScale=e.highlightScale,u.clipBounds=v,u.pickGroup=e.pickId/255,u.pixelRatio=i;for(var g=0;g<3;++g)if(o[g]){u.scale=e.projectScale[g],u.opacity=e.projectOpacity[g];for(var m=M,S=0;S<16;++S)m[S]=0;for(var S=0;S<4;++S)m[5*S]=1;m[5*g]=0,n[g]<0?m[12+g]=p[0][g]:m[12+g]=p[1][g],s(m,l,m),u.model=m;var O=(g+1)%3,C=(g+2)%3,L=T(y),I=T(x);L[O]=1,I[C]=1;var P=d(c,h,l,R(_,L)),B=d(c,h,l,R(w,I));if(Math.abs(P[1])>Math.abs(B[1])){var N=P;P=B,B=N,N=L,L=I,I=N;var F=O;O=C,C=F}P[0]<0&&(L[O]=-1),B[1]>0&&(I[C]=-1);for(var z=0,D=0,S=0;S<4;++S)z+=Math.pow(l[4*O+S],2),D+=Math.pow(l[4*C+S],2);L[O]/=Math.sqrt(z),I[C]/=Math.sqrt(D),u.axes[0]=L,u.axes[1]=I,u.fragClipBounds[0]=k(E,v[0],g,-1e8),u.fragClipBounds[1]=k(E,v[1],g,1e8),e.vao.bind(),e.vao.draw(a.TRIANGLES,e.vertexCount),e.lineWidth>0&&(a.lineWidth(e.lineWidth*i),e.vao.draw(a.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}(e,r,i,n),o===r.hasAlpha||a){t.bind();var l=t.uniforms;l.model=i.model||f,l.view=i.view||f,l.projection=i.projection||f,b[0]=2/u.drawingBufferWidth,b[1]=2/u.drawingBufferHeight,l.screenSize=b,l.highlightId=r.highlightId,l.highlightScale=r.highlightScale,l.fragClipBounds=S,l.clipBounds=r.axes.bounds,l.opacity=r.opacity,l.pickGroup=r.pickId/255,l.pixelRatio=n,r.vao.bind(),r.vao.draw(u.TRIANGLES,r.vertexCount),r.lineWidth>0&&(u.lineWidth(r.lineWidth*n),r.vao.draw(u.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function C(t,e,r,n){o=h(o=Array.isArray(t)?e<t.length?t[e]:void 0:t);var o,a=!0;i(o)&&(o="",a=!1);var s=l(o,r,n);return{mesh:s[0],lines:s[1],bounds:s[2],visible:a}}m.draw=function(t){O(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},m.drawTransparent=function(t){O(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},m.drawPick=function(t){O(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},m.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],i=this._selectResult;i.index=e;for(var n=0;n<3;++n)i.position[n]=i.dataCoordinate[n]=r[n];return i},m.highlight=function(t){if(t){var e=t.index;this.highlightId=[(255&e)/255,(e>>8&255)/255,(e>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t){if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}}if("projectScale"in t){if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{var r=+t.projectOpacity;this.projectOpacity=[r,r,r]}for(var i=0;i<3;++i)this.projectOpacity[i]=v(this.projectOpacity[i]),this.projectOpacity[i]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=v(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var n=t.position,o=t.font||"normal",s=t.alignment||[0,0];if(2===s.length)z=s[0],D=s[1];else{z=[],D=[];for(var i=0;i<s.length;++i)z[i]=s[i][0],D[i]=s[i][1]}var u=[1/0,1/0,1/0],l=[-1/0,-1/0,-1/0],h=t.glyph,f=t.color,c=t.size,d=t.angle,p=t.lineColor,g=-1,m=0,b=0,y=0;if(n.length){y=n.length;o:for(var i=0;i<y;++i){for(var x=n[i],_=0;_<3;++_)if(isNaN(x[_])||!isFinite(x[_]))continue o;var w=C(h,i,o,this.pixelRatio),M=w.mesh,E=w.lines,A=w.bounds;m+=3*M.cells.length,b+=2*E.edges.length}}var T=m+b,R=a.mallocFloat(3*T),k=a.mallocFloat(4*T),S=a.mallocFloat(2*T),O=a.mallocUint32(T);if(T>0){var L=0,I=m,P=[0,0,0,1],B=[0,0,0,1],N=Array.isArray(f)&&Array.isArray(f[0]),F=Array.isArray(p)&&Array.isArray(p[0]);i:for(var i=0;i<y;++i){g+=1;for(var z,D,U,x=n[i],_=0;_<3;++_){if(isNaN(x[_])||!isFinite(x[_]))continue i;l[_]=Math.max(l[_],x[_]),u[_]=Math.min(u[_],x[_])}var w=C(h,i,o,this.pixelRatio),M=w.mesh,E=w.lines,A=w.bounds,j=w.visible;if(j){if(Array.isArray(f)){if(3===(U=N?i<f.length?f[i]:[0,0,0,0]:f).length){for(var _=0;_<3;++_)P[_]=U[_];P[3]=1}else if(4===U.length){for(var _=0;_<4;++_)P[_]=U[_];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else P[0]=P[1]=P[2]=0,P[3]=1}else P=[1,1,1,0];if(j){if(Array.isArray(p)){if(3===(U=F?i<p.length?p[i]:[0,0,0,0]:p).length){for(var _=0;_<3;++_)B[_]=U[_];B[_]=1}else if(4===U.length){for(var _=0;_<4;++_)B[_]=U[_];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else B[0]=B[1]=B[2]=0,B[3]=1}else B=[1,1,1,0];var G=.5;j?Array.isArray(c)?G=i<c.length?+c[i]:12:c?G=+c:this.useOrtho&&(G=12):G=0;var V=0;Array.isArray(d)?V=i<d.length?+d[i]:0:d&&(V=+d);for(var H=Math.cos(V),W=Math.sin(V),x=n[i],_=0;_<3;++_)l[_]=Math.max(l[_],x[_]),u[_]=Math.min(u[_],x[_]);var X=D,Y=0;Array.isArray(z)?Y=i<z.length?z[i]:0:z&&(Y=z);var X=0;Array.isArray(D)?X=i<D.length?D[i]:0:D&&(X=D),Y*=Y>0?1-A[0][0]:Y<0?1+A[1][0]:1,X*=X>0?1-A[0][1]:X<0?1+A[1][1]:1;for(var q=[Y,X],Z=M.cells||[],K=M.positions||[],_=0;_<Z.length;++_)for(var Q=Z[_],J=0;J<3;++J){for(var $=0;$<3;++$)R[3*L+$]=x[$];for(var $=0;$<4;++$)k[4*L+$]=P[$];O[L]=g;var tt=K[Q[J]];S[2*L]=G*(H*tt[0]-W*tt[1]+q[0]),S[2*L+1]=G*(W*tt[0]+H*tt[1]+q[1]),L+=1}for(var Z=E.edges,K=E.positions,_=0;_<Z.length;++_)for(var Q=Z[_],J=0;J<2;++J){for(var $=0;$<3;++$)R[3*I+$]=x[$];for(var $=0;$<4;++$)k[4*I+$]=B[$];O[I]=g;var tt=K[Q[J]];S[2*I]=G*(H*tt[0]-W*tt[1]+q[0]),S[2*I+1]=G*(W*tt[0]+H*tt[1]+q[1]),I+=1}}}this.bounds=[u,l],this.points=n,this.pointCount=n.length,this.vertexCount=m,this.lineVertexCount=b,this.pointBuffer.update(R),this.colorBuffer.update(k),this.glyphBuffer.update(S),this.idBuffer.update(O),a.free(R),a.free(k),a.free(S),a.free(O)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(t,e,r){"use strict";var i=t("glslify");r.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),r.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(t,e,r){"use strict";var i=t("gl-shader"),n=t("gl-buffer"),o=t("./lib/shaders");function a(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}e.exports=function(t,e){var r=t.gl,s=n(r,[0,0,0,1,1,0,1,1]),u=i(r,o.boxVertex,o.boxFragment),l=new a(t,s,u);return l.update(e),t.addOverlay(l),l};var s=a.prototype;s.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth;this.innerFill;var i=this.innerColor;this.outerFill;var n=this.outerColor,o=this.borderColor,a=t.box,s=t.screenBox,u=t.dataBox,l=t.viewBox,h=t.pixelRatio,f=(e[0]-u[0])*(l[2]-l[0])/(u[2]-u[0])+l[0],c=(e[1]-u[1])*(l[3]-l[1])/(u[3]-u[1])+l[1],d=(e[2]-u[0])*(l[2]-l[0])/(u[2]-u[0])+l[0],p=(e[3]-u[1])*(l[3]-l[1])/(u[3]-u[1])+l[1];if(f=Math.max(f,l[0]),c=Math.max(c,l[1]),d=Math.min(d,l[2]),p=Math.min(p,l[3]),!(d<f)&&!(p<c)){a.bind();var v=s[2]-s[0],g=s[3]-s[1];if(this.outerFill&&(a.drawBox(0,0,v,c,n),a.drawBox(0,c,f,p,n),a.drawBox(0,p,v,g,n),a.drawBox(d,c,v,p,n)),this.innerFill&&a.drawBox(f,c,d,p,i),r>0){var m=r*h;a.drawBox(f-m,c-m,d+m,c+m,o),a.drawBox(f-m,p-m,d+m,p+m,o),a.drawBox(f-m,c-m,f+m,p+m,o),a.drawBox(d-m,c-m,d+m,p+m,o)}}}},s.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(t,e,r){"use strict";e.exports=function(t,e){var r=e[0],o=e[1],a=i(t,r,o,{}),s=n.mallocUint8(r*o*4);return new l(t,a,s)};var i=t("gl-fbo"),n=t("typedarray-pool"),o=t("ndarray"),a=t("bit-twiddle").nextPow2,s=function(t,e,r){for(var i=1e8,n=-1,o=-1,a=t.shape[0],s=t.shape[1],u=0;u<a;u++)for(var l=0;l<s;l++){var h=t.get(u,l,0),f=t.get(u,l,1),c=t.get(u,l,2),d=t.get(u,l,3);if(h<255||f<255||c<255||d<255){var p=e-u,v=r-l,g=p*p+v*v;g<i&&(i=g,n=u,o=l)}}return[n,o,i]};function u(t,e,r,i,n){this.coord=[t,e],this.id=r,this.value=i,this.distance=n}function l(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var i=this;this._readCallback=function(){i.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,i.buffer),i._readTimeout=null)}}var h=l.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){n.free(this.buffer);for(var i=this.buffer=n.mallocUint8(a(r*e*4)),o=0;o<r*e*4;++o)i[o]=255}return t}}}),h.begin=function(){var t=this.gl;this.shape,t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},h.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(t,e,r){if(!this.gl)return null;var i=this.fbo.shape.slice();e|=0,"number"!=typeof r&&(r=1);var n=0|Math.min(Math.max((t|=0)-r,0),i[0]),a=0|Math.min(Math.max(t+r,0),i[0]),l=0|Math.min(Math.max(e-r,0),i[1]),h=0|Math.min(Math.max(e+r,0),i[1]);if(a<=n||h<=l)return null;var f=[a-n,h-l],c=o(this.buffer,[f[0],f[1],4],[4,4*i[0],1],4*(n+i[0]*l)),d=s(c.hi(f[0],f[1],1),r,r),p=d[0],v=d[1];if(p<0||Math.pow(this.radius,2)<d[2])return null;var g=c.get(p,v,0),m=c.get(p,v,1),b=c.get(p,v,2),y=c.get(p,v,3);return new u(p+n|0,v+l|0,g,[m,b,y],Math.sqrt(d[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(t,e,r){"use strict";var i=t("./lib/create-uniforms"),n=t("./lib/create-attributes"),o=t("./lib/reflect"),a=t("./lib/shader-cache"),s=t("./lib/runtime-reflect"),u=t("./lib/GLError");function l(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=l.prototype;function f(t,e){return t.name<e.name?-1:1}h.bind=function(){this.program||this._relink();var t,e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},h.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(t,e,r,l){if(!e||1==arguments.length){var h,c=t;t=c.vertex,e=c.fragment,r=c.uniforms,l=c.attributes}var d=this,p=d.gl,v=d._vref;d._vref=a.shader(p,p.VERTEX_SHADER,t),v&&v.dispose(),d.vertShader=d._vref.shader;var g=this._fref;if(d._fref=a.shader(p,p.FRAGMENT_SHADER,e),g&&g.dispose(),d.fragShader=d._fref.shader,!r||!l){var m=p.createProgram();if(p.attachShader(m,d.fragShader),p.attachShader(m,d.vertShader),p.linkProgram(m),!p.getProgramParameter(m,p.LINK_STATUS)){var b=p.getProgramInfoLog(m);throw new u(b,"Error linking program:"+b)}r=r||s.uniforms(p,m),l=l||s.attributes(p,m),p.deleteProgram(m)}(l=l.slice()).sort(f);var y=[],x=[],_=[];for(h=0;h<l.length;++h){var w=l[h];if(w.type.indexOf("mat")>=0){for(var M=0|w.type.charAt(w.type.length-1),E=Array(M),A=0;A<M;++A)E[A]=_.length,x.push(w.name+"["+A+"]"),"number"==typeof w.location?_.push(w.location+A):Array.isArray(w.location)&&w.location.length===M&&"number"==typeof w.location[A]?_.push(0|w.location[A]):_.push(-1);y.push({name:w.name,type:w.type,locations:E})}else y.push({name:w.name,type:w.type,locations:[_.length]}),x.push(w.name),"number"==typeof w.location?_.push(0|w.location):_.push(-1)}var T=0;for(h=0;h<_.length;++h)if(_[h]<0){for(;_.indexOf(T)>=0;)T+=1;_[h]=T}var R=Array(r.length);function k(){d.program=a.program(p,d._vref,d._fref,x,_);for(var t=0;t<r.length;++t)R[t]=p.getUniformLocation(d.program,r[t].name)}k(),d._relink=k,d.types={uniforms:o(r),attributes:o(l)},d.attributes=n(p,d,y,_),Object.defineProperty(d,"uniforms",i(p,d,r,R))},e.exports=function(t,e,r,i,n){var o=new l(t);return o.update(e,r,i,n),o}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(t,e,r){function i(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=Error().stack}i.prototype=Error(),i.prototype.name="GLError",i.prototype.constructor=i,e.exports=i},{}],134:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var o={},a=0,u=r.length;a<u;++a){var l=r[a],h=l.name,f=l.type,c=l.locations;switch(f){case"bool":case"int":case"float":s(t,e,c[0],n,1,o,h);break;default:if(f.indexOf("vec")>=0){var d=f.charCodeAt(f.length-1)-48;if(d<2||d>4)throw new i("","Invalid data type for attribute "+h+": "+f);s(t,e,c[0],n,d,o,h)}else if(f.indexOf("mat")>=0){var d=f.charCodeAt(f.length-1)-48;if(d<2||d>4)throw new i("","Invalid data type for attribute "+h+": "+f);!function(t,e,r,i,n,o,a){for(var u=Array(n),l=Array(n),h=0;h<n;++h)s(t,e,r[h],i,n,u,h),l[h]=u[h];Object.defineProperty(u,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<n;++e)l[e].location=t[e];else for(var e=0;e<n;++e)l[e].location=t+e;return t},get:function(){for(var t=Array(n),e=0;e<n;++e)t[e]=i[r[e]];return t},enumerable:!0}),u.pointer=function(e,o,a,s){e=e||t.FLOAT,o=!!o,a=a||n*n,s=s||0;for(var u=0;u<n;++u){var l=i[r[u]];t.vertexAttribPointer(l,n,e,o,a,s+u*n),t.enableVertexAttribArray(l)}};var f=Array(n),c=t["vertexAttrib"+n+"fv"];Object.defineProperty(o,a,{set:function(e){for(var o=0;o<n;++o){var a=i[r[o]];if(t.disableVertexAttribArray(a),Array.isArray(e[0]))c.call(t,a,e[o]);else{for(var s=0;s<n;++s)f[s]=e[n*o+s];c.call(t,a,f)}}return e},get:function(){return u},enumerable:!0})}(t,e,c,n,d,o,h)}else throw new i("","Unknown data type for attribute "+h+": "+f)}}return o};var i=t("./GLError");function n(t,e,r,i,n,o){this._gl=t,this._wrapper=e,this._index=r,this._locations=i,this._dimension=n,this._constFunc=o}var o=n.prototype;o.pointer=function(t,e,r,i){var n=this._gl,o=this._locations[this._index];n.vertexAttribPointer(o,this._dimension,t||n.FLOAT,!!e,r||0,i||0),n.enableVertexAttribArray(o)},o.set=function(t,e,r,i){return this._constFunc(this._locations[this._index],t,e,r,i)},Object.defineProperty(o,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var a=[function(t,e,r){return void 0===r.length?t.vertexAttrib1f(e,r):t.vertexAttrib1fv(e,r)},function(t,e,r,i){return void 0===r.length?t.vertexAttrib2f(e,r,i):t.vertexAttrib2fv(e,r)},function(t,e,r,i,n){return void 0===r.length?t.vertexAttrib3f(e,r,i,n):t.vertexAttrib3fv(e,r)},function(t,e,r,i,n,o){return void 0===r.length?t.vertexAttrib4f(e,r,i,n,o):t.vertexAttrib4fv(e,r)}];function s(t,e,r,i,o,s,u){var l=a[o],h=new n(t,e,r,i,o,l);Object.defineProperty(s,u,{set:function(e){return t.disableVertexAttribArray(i[r]),l(t,i[r],e),e},get:function(){return h},enumerable:!0})}},{"./GLError":133}],135:[function(t,e,r){"use strict";var i=t("./reflect"),n=t("./GLError");function o(t){return function(){return t}}function a(t,e){for(var r=Array(t),i=0;i<t;++i)r[i]=e;return r}e.exports=function(t,e,r,s){function u(e){return function(i){for(var o=function t(e,r){if("object"!=typeof r)return[[e,r]];var i=[];for(var n in r){var o=r[n],a=e;parseInt(n)+""===n?a+="["+n+"]":a+="."+n,"object"==typeof o?i.push.apply(i,t(a,o)):i.push([a,o])}return i}("",e),a=0;a<o.length;++a){var u=o[a],l=u[0],h=u[1];if(s[h]){var f,c=i;if("string"==typeof l&&(0===l.indexOf(".")||0===l.indexOf("["))){var d=l;if(0===l.indexOf(".")&&(d=l.slice(1)),d.indexOf("]")===d.length-1){var p=d.indexOf("["),v=d.slice(0,p),g=d.slice(p+1,d.length-1);c=v?i[v][g]:i[g]}else c=i[d]}var m=r[h].type;switch(m){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(s[h],c);break;case"float":t.uniform1f(s[h],c);break;default:var b=m.indexOf("vec");if(0<=b&&b<=1&&m.length===4+b){if((f=m.charCodeAt(m.length-1)-48)<2||f>4)throw new n("","Invalid data type");switch(m.charAt(0)){case"b":case"i":t["uniform"+f+"iv"](s[h],c);break;case"v":t["uniform"+f+"fv"](s[h],c);break;default:throw new n("","Unrecognized data type for vector "+name+": "+m)}}else if(0===m.indexOf("mat")&&4===m.length){if((f=m.charCodeAt(m.length-1)-48)<2||f>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+m);t["uniformMatrix"+f+"fv"](s[h],!1,c);break}else throw new n("","Unknown uniform data type for "+name+": "+m)}}}}}function l(t,e,i){"object"==typeof i?Object.defineProperty(t,e,{get:o(h(i)),set:u(i),enumerable:!0,configurable:!1}):s[i]?Object.defineProperty(t,e,{get:function(t,e,r){return t.getUniform(e.program,r[i])},set:u(i),enumerable:!0,configurable:!1}):t[e]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new n("","Invalid data type");if("b"===t.charAt(0))return a(r,!1);return a(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+t);return a(r*r,0)}throw new n("","Unknown uniform data type for "+name+": "+t)}}(r[i].type)}function h(t){var e;if(Array.isArray(t)){e=Array(t.length);for(var r=0;r<t.length;++r)l(e,r,t[r])}else for(var i in e={},t)l(e,i,t[i]);return e}var f=i(r,!0);return{get:o(h(f)),set:u(f),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r={},i=0;i<t.length;++i)for(var n=t[i].name.split("."),o=r,a=0;a<n.length;++a){var s=n[a].split("[");if(s.length>1){s[0]in o||(o[s[0]]=[]),o=o[s[0]];for(var u=1;u<s.length;++u){var l=parseInt(s[u]);u<s.length-1||a<n.length-1?(l in o||(u<s.length-1?o[l]=[]:o[l]={}),o=o[l]):e?o[l]=i:o[l]=t[i].type}}else a<n.length-1?(s[0]in o||(o[s[0]]={}),o=o[s[0]]):e?o[s[0]]=i:o[s[0]]=t[i].type}return r}},{}],137:[function(t,e,r){"use strict";r.uniforms=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=[],n=0;n<r;++n){var a=t.getActiveUniform(e,n);if(a){var s=o(t,a.type);if(a.size>1)for(var u=0;u<a.size;++u)i.push({name:a.name.replace("[0]","["+u+"]"),type:s});else i.push({name:a.name,type:s})}}return i},r.attributes=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=[],n=0;n<r;++n){var a=t.getActiveAttrib(e,n);a&&i.push({name:a.name,type:o(t,a.type)})}return i};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function o(t,e){if(!n){var r=Object.keys(i);n={};for(var o=0;o<r.length;++o){var a=r[o];n[t[a]]=i[a]}}return n[e]}},{}],138:[function(t,e,r){"use strict";r.shader=function(t,e,r){return h(t).getShaderReference(e,r)},r.program=function(t,e,r,i,n){return h(t).getProgram(e,r,i,n)};var i=t("./GLError"),n=t("gl-format-compiler-error"),o=new("undefined"==typeof WeakMap?t("weakmap-shim"):WeakMap),a=0;function s(t,e,r,i,n,o,a){this.id=t,this.src=e,this.type=r,this.shader=i,this.count=o,this.programs=[],this.cache=a}function u(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,i=0,n=r.length;i<n;++i){var o=t.programs[r[i]];o&&(delete t.programs[i],e.deleteProgram(o))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var l=u.prototype;function h(t){var e=o.get(t);return e||(e=new u(t),o.set(t,e)),e}l.getShaderReference=function(t,e){var r=this.gl,o=this.shaders[t===r.FRAGMENT_SHADER|0],u=o[e];if(u&&r.isShader(u.shader))u.count+=1;else{var l=function(t,e,r){var o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);try{var s=n(a,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new i(a,"Error compiling shader:\n"+a)}throw new i(a,s.short,s.long)}return o}(r,t,e);u=o[e]=new s(a++,e,t,l,[],1,this)}return u},l.getProgram=function(t,e,r,n){var o=[t.id,e.id,r.join(":"),n.join(":")].join("@"),a=this.programs[o];return a&&this.gl.isProgram(a)||(this.programs[o]=a=function(t,e,r,n,o){var a=t.createProgram();t.attachShader(a,e),t.attachShader(a,r);for(var s=0;s<n.length;++s)t.bindAttribLocation(a,o[s],n[s]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var u=t.getProgramInfoLog(a);throw new i(u,"Error linking program: "+u)}return a}(this.gl,t.shader,e.shader,r,n),t.programs.push(o),e.programs.push(o)),a}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(t,e,r){"use strict";function i(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}e.exports=function(t,e){var r=new i(t);return r.update(e),t.addOverlay(r),r};var n=i.prototype;n.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var t=this.enable,e=this.width,r=this.color,i=this.center,n=this.plot,o=n.line,a=n.dataBox,s=n.viewBox;if(o.bind(),a[0]<=i[0]&&i[0]<=a[2]&&a[1]<=i[1]&&i[1]<=a[3]){var u=s[0]+(i[0]-a[0])/(a[2]-a[0])*(s[2]-s[0]),l=s[1]+(i[1]-a[1])/(a[3]-a[1])*(s[3]-s[1]);t[0]&&o.drawLine(u,l,s[0],l,e[0],r[0]),t[1]&&o.drawLine(u,l,u,s[1],e[1],r[1]),t[2]&&o.drawLine(u,l,s[2],l,e[2],r[2]),t[3]&&o.drawLine(u,l,u,s[3],e[3],r[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(t,e,r){"use strict";var i=t("glslify"),n=t("gl-shader"),o=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(t){return n(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(t,e,r){"use strict";var i=t("gl-buffer"),n=t("gl-vao"),o=t("./shaders/index");e.exports=function(t,e){var r=[];function a(t,e,i,n,o,a){var s=[t,e,i,0,0,0,1];s[n+3]=1,s[n]=o,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[n]=a,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[n]=o,r.push.apply(r,s)}a(0,0,0,0,0,1),a(0,0,0,1,0,1),a(0,0,0,2,0,1),a(1,0,0,1,-1,1),a(1,0,0,2,-1,1),a(0,1,0,0,-1,1),a(0,1,0,2,-1,1),a(0,0,1,0,-1,1),a(0,0,1,1,-1,1);var u=i(t,r),l=n(t,[{type:t.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:u,size:1,offset:24,stride:28}]),h=o(t);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var f=new s(t,u,l,h);return f.update(e),f};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,i){this.gl=t,this.buffer=e,this.vao=r,this.shader=i,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=s.prototype,l=[0,0,0],h=[0,0,0],f=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(t){},u.draw=function(t){var e,r=this.gl,i=this.vao,n=this.shader;i.bind(),n.bind();var o=t.model||a,s=t.view||a,u=t.projection||a;this.axes&&(e=this.axes.lastCubeProps.axis);for(var c=l,d=h,p=0;p<3;++p)e&&e[p]<0?(c[p]=this.bounds[0][p],d[p]=this.bounds[1][p]):(c[p]=this.bounds[1][p],d[p]=this.bounds[0][p]);f[0]=r.drawingBufferWidth,f[1]=r.drawingBufferHeight,n.uniforms.model=o,n.uniforms.view=s,n.uniforms.projection=u,n.uniforms.coordinates=[this.position,c,d],n.uniforms.colors=this.colors,n.uniforms.screenShape=f;for(var p=0;p<3;++p)n.uniforms.lineWidth=this.lineWidth[p]*this.pixelRatio,this.enabled[p]&&(i.draw(r.TRIANGLES,6,6*p),this.drawSides[p]&&i.draw(r.TRIANGLES,12,18+12*p));i.unbind()},u.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(t,e,r){var i=t("glslify"),n=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);r.meshShader={vertex:n,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},r.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(t,e,r){"use strict";var i=t("gl-vec3"),n=t("gl-vec4"),o=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(t,e,r,o){for(var a=t.points,s=t.velocities,u=t.divergences,l=[],h=[],f=[],c=[],d=[],p=[],v=0,g=0,m=n.create(),b=n.create(),y=0;y<a.length;y++){var x=a[y],_=s[y],w=u[y];0===e&&(w=.05*r),g=i.length(_)/o,m=n.create(),i.copy(m,_),m[3]=w;for(var M=0;M<8;M++)d[M]=[x[0],x[1],x[2],M];if(c.length>0)for(var M=0;M<8;M++){var E=(M+1)%8;l.push(c[M],d[M],d[E],d[E],c[E],c[M]),f.push(b,m,m,m,b,b),p.push(v,g,g,g,v,v);var A=l.length;h.push([A-6,A-5,A-4],[A-3,A-2,A-1])}var T=c;c=d,d=T;var R=b;b=m,m=R;var k=v;v=g,g=k}return{positions:l,cells:h,vectors:f,vertexIntensity:p}},s=function(t,e,r,n){for(var o=0,s=0;s<t.length;s++)for(var u=t[s].velocities,l=0;l<u.length;l++)o=Math.max(o,i.length(u[l]));for(var h=t.map(function(t){return a(t,r,n,o)}),f=[],c=[],d=[],p=[],s=0;s<h.length;s++){var v=h[s],g=f.length;f=f.concat(v.positions),d=d.concat(v.vectors),p=p.concat(v.vertexIntensity);for(var l=0;l<v.cells.length;l++){var m=v.cells[l],b=[];c.push(b);for(var y=0;y<m.length;y++)b.push(m[y]+g)}}return{positions:f,cells:c,vectors:d,vertexIntensity:p,colormap:e}},u=function(t,e){var r,i=t.length;for(r=0;r<i;r++){var n=t[r];if(n===e)break;if(n>e)return r-1}return r},l=function(t,e,r){return t<e?e:t>r?r:t},h=function(t,e,r){var n,o,a,s,h,f,c=e.vectors,d=e.meshgrid,p=t[0],v=t[1],g=t[2],m=d[0].length,b=d[1].length,y=d[2].length,x=u(d[0],p),_=u(d[1],v),w=u(d[2],g),M=x+1,E=_+1,A=w+1;if(x=l(x,0,m-1),M=l(M,0,m-1),_=l(_,0,b-1),E=l(E,0,b-1),w=l(w,0,y-1),A=l(A,0,y-1),x<0||_<0||w<0||M>m-1||E>b-1||A>y-1)return i.create();var T=d[0][x],R=d[0][M],k=d[1][_],S=d[1][E],O=d[2][w],C=d[2][A],L=(p-T)/(R-T),I=(v-k)/(S-k),P=(g-O)/(C-O);switch(isFinite(L)||(L=.5),isFinite(I)||(I=.5),isFinite(P)||(P=.5),r.reversedX&&(x=m-1-x,M=m-1-M),r.reversedY&&(_=b-1-_,E=b-1-E),r.reversedZ&&(w=y-1-w,A=y-1-A),r.filled){case 5:h=w,f=A,a=_*y,s=E*y,n=x*y*b,o=M*y*b;break;case 4:h=w,f=A,n=x*y,o=M*y,a=_*y*m,s=E*y*m;break;case 3:a=_,s=E,h=w*b,f=A*b,n=x*b*y,o=M*b*y;break;case 2:a=_,s=E,n=x*b,o=M*b,h=w*b*m,f=A*b*m;break;case 1:n=x,o=M,h=w*m,f=A*m,a=_*m*y,s=E*m*y;break;default:n=x,o=M,a=_*m,s=E*m,h=w*m*b,f=A*m*b}var B=c[n+a+h],N=c[n+a+f],F=c[n+s+h],z=c[n+s+f],D=c[o+a+h],U=c[o+a+f],j=c[o+s+h],G=c[o+s+f],V=i.create(),H=i.create(),W=i.create(),X=i.create();i.lerp(V,B,D,L),i.lerp(H,N,U,L),i.lerp(W,F,j,L),i.lerp(X,z,G,L);var Y=i.create(),q=i.create();i.lerp(Y,V,W,I),i.lerp(q,H,X,I);var Z=i.create();return i.lerp(Z,Y,q,P),Z},f=function(t){var e=1/0;t.sort(function(t,e){return t-e});for(var r=t.length,i=1;i<r;i++){var n=Math.abs(t[i]-t[i-1]);n<e&&(e=n)}return e},c=function(t){for(var e=[],r=[],i=[],n={},o={},a={},s=t.length,u=0;u<s;u++){var l=t[u],h=l[0],c=l[1],d=l[2];n[h]||(e.push(h),n[h]=!0),o[c]||(r.push(c),o[c]=!0),a[d]||(i.push(d),a[d]=!0)}var p=Math.min(f(e),f(r),f(i));return isFinite(p)?p:1};e.exports=function(t,e){var r=t.startingPositions,n=t.maxLength||1e3,a=t.tubeSize||1,u=t.absoluteTubeSize,l=t.gridFill||"+x+y+z",f={};-1!==l.indexOf("-x")&&(f.reversedX=!0),-1!==l.indexOf("-y")&&(f.reversedY=!0),-1!==l.indexOf("-z")&&(f.reversedZ=!0),f.filled=o.indexOf(l.replace(/-/g,"").replace(/\+/g,""));var d=t.getVelocity||function(e){return h(e,t,f)},p=t.getDivergence||function(t,e){var r=i.create();i.add(r,t,[1e-4,0,0]);var n=d(r);i.subtract(n,n,e),i.scale(n,n,1e4),i.add(r,t,[0,1e-4,0]);var o=d(r);i.subtract(o,o,e),i.scale(o,o,1e4),i.add(r,t,[0,0,1e-4]);var a=d(r);return i.subtract(a,a,e),i.scale(a,a,1e4),i.add(r,n,o),i.add(r,r,a),r},v=[],g=e[0][0],m=e[0][1],b=e[0][2],y=e[1][0],x=e[1][1],_=e[1][2],w=10*i.distance(e[0],e[1])/n,M=w*w,E=1,A=0,T=r.length;T>1&&(E=c(r));for(var R=0;R<T;R++){var k=i.create();i.copy(k,r[R]);var S=[k],O=[],C=d(k),L=k;O.push(C);var I=[],P=p(k,C),B=i.length(P);isFinite(B)&&B>A&&(A=B),I.push(B),v.push({points:S,velocities:O,divergences:I});for(var N=0;N<100*n&&S.length<n&&function(t){var e=t[0],r=t[1],i=t[2];return!(e<g||e>y||r<m||r>x||i<b||i>_)}(k);){N++;var F=i.clone(C),z=i.squaredLength(F);if(0===z)break;if(z>M&&i.scale(F,F,w/Math.sqrt(z)),i.add(F,F,k),C=d(F),i.squaredDistance(L,F)-M>-.0001*M){S.push(F),L=F,O.push(C);var P=p(F,C),B=i.length(P);isFinite(B)&&B>A&&(A=B),I.push(B)}k=F}}var D=s(v,t.colormap,A,E);return u?D.tubeScale=u:(0===A&&(A=1),D.tubeScale=.5*a*E/A),D};var d=t("./lib/shaders"),p=t("gl-cone3d").createMesh;e.exports.createTubeMesh=function(t,e){return p(t,e,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(t,e,r){var i=t("gl-shader"),n=t("glslify"),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);r.createShader=function(t){var e=i(t,o,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},r.createPickShader=function(t){var e=i(t,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},r.createContourShader=function(t){var e=i(t,s,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},r.createPickContourShader=function(t){var e=i(t,s,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},{"gl-shader":132,glslify:231}],145:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=b(e),i=x(e),s=y(e),u=_(e),l=n(e),h=o(e,[{buffer:l,size:4,stride:40,offset:0},{buffer:l,size:3,stride:40,offset:16},{buffer:l,size:3,stride:40,offset:28}]),f=n(e),c=o(e,[{buffer:f,size:4,stride:20,offset:0},{buffer:f,size:1,stride:20,offset:16}]),d=n(e),p=o(e,[{buffer:d,size:2,type:e.FLOAT}]),v=a(e,1,256,e.RGBA,e.UNSIGNED_BYTE);v.minFilter=e.LINEAR,v.magFilter=e.LINEAR;var g=new T(e,[0,0],[[0,0,0],[0,0,0]],r,i,l,h,v,s,u,f,c,d,p,[0,0,0]),m={levels:[[],[],[]]};for(var w in t)m[w]=t[w];return m.colormap=m.colormap||"jet",g.update(m),g};var i=t("bit-twiddle"),n=t("gl-buffer"),o=t("gl-vao"),a=t("gl-texture2d"),s=t("typedarray-pool"),u=t("colormap"),l=t("ndarray-ops"),h=t("ndarray-pack"),f=t("ndarray"),c=t("surface-nets"),d=t("gl-mat4/multiply"),p=t("gl-mat4/invert"),v=t("binary-search-bounds"),g=t("ndarray-gradient"),m=t("./lib/shaders"),b=m.createShader,y=m.createContourShader,x=m.createPickShader,_=m.createPickContourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],E=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function A(t,e,r,i,n){this.position=t,this.index=e,this.uv=r,this.level=i,this.dataCoordinate=n}function T(t,e,r,i,n,o,a,u,l,h,c,d,p,v,g){this.gl=t,this.shape=e,this.bounds=r,this.objectOffset=g,this.intensityBounds=[],this._shader=i,this._pickShader=n,this._coordinateBuffer=o,this._vao=a,this._colorMap=u,this._contourShader=l,this._contourPickShader=h,this._contourBuffer=c,this._contourVAO=d,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new A([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=p,this._dynamicVAO=v,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0]),f(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var t=0;t<3;++t){var e=E[t],r=(t+1)%3,i=(t+2)%3;e[r+0]=1,e[i+3]=1,e[t+6]=1}}();var R=T.prototype;R.genColormap=function(t,e){var r=!1,i=h([u({colormap:t,nshades:256,format:"rgba"}).map(function(t,i){var n=e?function(t,e){if(!e||!e.length)return 1;for(var r=0;r<e.length&&!(e.length<2);++r){if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}(i/255,e):t[3];return n<1&&(r=!0),[t[0],t[1],t[2],255*n]})]);return l.divseq(i,255),this.hasAlphaScale=r,i},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(t){this.pickId=t};var k=[0,0,0],S={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function O(t,e){var r,i,n,o=e.axes&&e.axes.lastCubeProps.axis||k,a=e.showSurface,s=e.showContour;for(r=0;r<3;++r)for(i=0,a=a||e.surfaceProject[r];i<3;++i)s=s||e.contourProject[r][i];for(r=0;r<3;++r){var u=S.projections[r];for(i=0;i<16;++i)u[i]=0;for(i=0;i<4;++i)u[5*i]=1;u[5*r]=0,u[12+r]=e.axesBounds[+(o[r]>0)][r],d(u,t.model,u);var l=S.clipBounds[r];for(n=0;n<2;++n)for(i=0;i<3;++i)l[n][i]=t.clipBounds[n][i];l[0][r]=-1e8,l[1][r]=1e8}return S.showSurface=a,S.showContour=s,S}var C={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},L=w.slice(),I=[1,0,0,0,1,0,0,0,1];function P(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var i=C;i.model=t.model||w,i.view=t.view||w,i.projection=t.projection||w,i.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],i.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],i.objectOffset=this.objectOffset,i.contourColor=this.contourColor[0],i.inverseModel=p(i.inverseModel,i.model);for(var n=0;n<2;++n)for(var o=i.clipBounds[n],a=0;a<3;++a)o[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);for(i.kambient=this.ambientLight,i.kdiffuse=this.diffuseLight,i.kspecular=this.specularLight,i.roughness=this.roughness,i.fresnel=this.fresnel,i.opacity=this.opacity,i.height=0,i.permutation=I,i.vertexColor=this.vertexColor,d(L,i.view,i.model),d(L,i.projection,L),p(L,L),n=0;n<3;++n)i.eyePosition[n]=L[12+n]/L[15];var s=L[15];for(n=0;n<3;++n)s+=this.lightPosition[n]*L[4*n+3];for(n=0;n<3;++n){var u=L[12+n];for(a=0;a<3;++a)u+=L[4*a+n]*this.lightPosition[a];i.lightPosition[n]=u/s}var l=O(i,this);if(l.showSurface){for(this._shader.bind(),this._shader.uniforms=i,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&this.vertexCount&&(this._shader.uniforms.model=l.projections[n],this._shader.uniforms.clipBounds=l.clipBounds[n],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(l.showContour){var h=this._contourShader;i.kambient=1,i.kdiffuse=0,i.kspecular=0,i.opacity=1,h.bind(),h.uniforms=i;var f=this._contourVAO;for(f.bind(),n=0;n<3;++n)for(h.uniforms.permutation=E[n],r.lineWidth(this.contourWidth[n]*this.pixelRatio),a=0;a<this.contourLevels[n].length;++a)a===this.highlightLevel[n]?(h.uniforms.contourColor=this.highlightColor[n],h.uniforms.contourTint=this.highlightTint[n]):(0===a||a-1===this.highlightLevel[n])&&(h.uniforms.contourColor=this.contourColor[n],h.uniforms.contourTint=this.contourTint[n]),this._contourCounts[n][a]&&(h.uniforms.height=this.contourLevels[n][a],f.draw(r.LINES,this._contourCounts[n][a],this._contourOffsets[n][a]));for(n=0;n<3;++n)for(a=0,h.uniforms.model=l.projections[n],h.uniforms.clipBounds=l.clipBounds[n];a<3;++a)if(this.contourProject[n][a]){h.uniforms.permutation=E[a],r.lineWidth(this.contourWidth[a]*this.pixelRatio);for(var c=0;c<this.contourLevels[a].length;++c)c===this.highlightLevel[a]?(h.uniforms.contourColor=this.highlightColor[a],h.uniforms.contourTint=this.highlightTint[a]):(0===c||c-1===this.highlightLevel[a])&&(h.uniforms.contourColor=this.contourColor[a],h.uniforms.contourTint=this.contourTint[a]),this._contourCounts[a][c]&&(h.uniforms.height=this.contourLevels[a][c],f.draw(r.LINES,this._contourCounts[a][c],this._contourOffsets[a][c]))}for(f.unbind(),(f=this._dynamicVAO).bind(),n=0;n<3;++n)if(0!==this._dynamicCounts[n])for(h.uniforms.model=i.model,h.uniforms.clipBounds=i.clipBounds,h.uniforms.permutation=E[n],r.lineWidth(this.dynamicWidth[n]*this.pixelRatio),h.uniforms.contourColor=this.dynamicColor[n],h.uniforms.contourTint=this.dynamicTint[n],h.uniforms.height=this.dynamicLevel[n],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]),a=0;a<3;++a)this.contourProject[a][n]&&(h.uniforms.model=l.projections[a],h.uniforms.clipBounds=l.clipBounds[a],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]));f.unbind()}}R.draw=function(t){return P.call(this,t,!1)},R.drawTransparent=function(t){return P.call(this,t,!0)};var B={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function N(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function F(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function z(t){if(Array.isArray(t)){if(Array.isArray(t))return[F(t[0]),F(t[1]),F(t[2])];var e=F(t);return[e.slice(),e.slice(),e.slice()]}}R.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var r=B;r.model=t.model||w,r.view=t.view||w,r.projection=t.projection||w,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=I;for(var i=0;i<2;++i)for(var n=r.clipBounds[i],o=0;o<3;++o)n[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);var a=O(r,this);if(a.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=a.projections[i],this._pickShader.uniforms.clipBounds=a.clipBounds[i],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(a.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var u=this._contourVAO;for(u.bind(),o=0;o<3;++o)for(e.lineWidth(this.contourWidth[o]*this.pixelRatio),s.uniforms.permutation=E[o],i=0;i<this.contourLevels[o].length;++i)this._contourCounts[o][i]&&(s.uniforms.height=this.contourLevels[o][i],u.draw(e.LINES,this._contourCounts[o][i],this._contourOffsets[o][i]));for(i=0;i<3;++i)for(o=0,s.uniforms.model=a.projections[i],s.uniforms.clipBounds=a.clipBounds[i];o<3;++o)if(this.contourProject[i][o]){s.uniforms.permutation=E[o],e.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var l=0;l<this.contourLevels[o].length;++l)this._contourCounts[o][l]&&(s.uniforms.height=this.contourLevels[o][l],u.draw(e.LINES,this._contourCounts[o][l],this._contourOffsets[o][l]))}u.unbind()}},R.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,i=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,n=Math.floor(i),o=i-n,a=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(a),u=a-s;n+=1,s+=1;var l=r.position;l[0]=l[1]=l[2]=0;for(var h=0;h<2;++h)for(var f=h?o:1-o,c=0;c<2;++c)for(var d=c?u:1-u,p=n+h,g=s+c,m=f*d,b=0;b<3;++b)l[b]+=this._field[b].get(p,g)*m;for(var y=this._pickResult.level,x=0;x<3;++x)if(y[x]=v.le(this.contourLevels[x],l[x]),y[x]<0)this.contourLevels[x].length>0&&(y[x]=0);else if(y[x]<this.contourLevels[x].length-1){var _=this.contourLevels[x][y[x]],w=this.contourLevels[x][y[x]+1];Math.abs(_-l[x])>Math.abs(w-l[x])&&(y[x]+=1)}for(b=0,r.index[0]=o<.5?n:n+1,r.index[1]=u<.5?s:s+1,r.uv[0]=i/e[0],r.uv[1]=a/e[1];b<3;++b)r.dataCoordinate[b]=this._field[b].get(r.index[0],r.index[1]);return r},R.padField=function(t,e){var r=e.shape.slice(),i=t.shape.slice();l.assign(t.lo(1,1).hi(r[0],r[1]),e),l.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),l.assign(t.lo(1,i[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),l.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),l.assign(t.lo(i[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,i[1]-1,e.get(0,r[1]-1)),t.set(i[0]-1,0,e.get(r[0]-1,0)),t.set(i[0]-1,i[1]-1,e.get(r[0]-1,r[1]-1))},R.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=N(t.contourWidth,Number)),"showContour"in t&&(this.showContour=N(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=N(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=z(t.contourColor)),"contourProject"in t&&(this.contourProject=N(t.contourProject,function(t){return N(t,Boolean)})),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=z(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=N(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=N(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var n=(e.shape[0]+2)*(e.shape[1]+2);n>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(i.nextPow2(n))),this._field[2]=f(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var o=this.shape,a=0;a<2;++a)this._field[2].size>this._field[a].data.length&&(s.freeFloat(this._field[a].data),this._field[a].data=s.mallocFloat(this._field[2].size)),this._field[a]=f(this._field[a].data,[o[0]+2,o[1]+2]);if(t.coords){var u=t.coords;if(!Array.isArray(u)||3!==u.length)throw Error("gl-surface: invalid coordinates for x/y");for(a=0;a<2;++a){var l=u[a];for(m=0;m<2;++m)if(l.shape[m]!==o[m])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[a],l)}}else if(t.ticks){var h=t.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(a=0;a<2;++a){var d=h[a];if((Array.isArray(d)||d.length)&&(d=f(d)),d.shape[0]!==o[a])throw Error("gl-surface: invalid tick length");var p=f(d.data,o);p.stride[a]=d.stride[0],p.stride[1^a]=0,this.padField(this._field[a],p)}}else{for(a=0;a<2;++a){var v=[0,0];v[a]=1,this._field[a]=f(this._field[a].data,[o[0]+2,o[1]+2],v,0)}this._field[0].set(0,0,0);for(var m=0;m<o[0];++m)this._field[0].set(m+1,0,m);for(this._field[0].set(o[0]+1,0,o[0]-1),this._field[1].set(0,0,0),m=0;m<o[1];++m)this._field[1].set(0,m+1,m);this._field[1].set(0,o[1]+1,o[1]-1)}var b=this._field,y=f(s.mallocFloat(6*b[2].size),[3,o[0]+2,o[1]+2,2]);for(a=0;a<3;++a)g(y.pick(a),b[a],"mirror");var x=f(s.mallocFloat(3*b[2].size),[o[0]+2,o[1]+2,3]);for(a=0;a<o[0]+2;++a)for(m=0;m<o[1]+2;++m){var _=y.get(0,a,m,0),w=y.get(0,a,m,1),E=y.get(1,a,m,0),A=y.get(1,a,m,1),T=y.get(2,a,m,0),R=y.get(2,a,m,1),k=E*R-A*T,S=T*w-R*_,O=_*A-w*E,C=Math.sqrt(k*k+S*S+O*O);C<1e-8?(C=Math.max(Math.abs(k),Math.abs(S),Math.abs(O)))<1e-8?(O=1,S=k=0,C=1):C=1/C:C=1/Math.sqrt(C),x.set(a,m,0,k*C),x.set(a,m,1,S*C),x.set(a,m,2,O*C)}s.free(y.data);var L=[1/0,1/0,1/0],I=[-1/0,-1/0,-1/0],P=1/0,B=-1/0,F=(o[0]-1)*(o[1]-1)*6,D=s.mallocFloat(i.nextPow2(10*F)),U=0,j=0;for(a=0;a<o[0]-1;++a)a:for(m=0;m<o[1]-1;++m){for(var G=0;G<2;++G)for(var V=0;V<2;++V)for(var H=0;H<3;++H){var W=this._field[H].get(1+a+G,1+m+V);if(isNaN(W)||!isFinite(W))continue a}for(H=0;H<6;++H){var X=a+M[H][0],Y=m+M[H][1],q=this._field[0].get(X+1,Y+1),Z=this._field[1].get(X+1,Y+1);W=this._field[2].get(X+1,Y+1),k=x.get(X+1,Y+1,0),S=x.get(X+1,Y+1,1),O=x.get(X+1,Y+1,2),t.intensity&&(K=t.intensity.get(X,Y));var K=t.intensity?t.intensity.get(X,Y):W+this.objectOffset[2];D[U++]=X,D[U++]=Y,D[U++]=q,D[U++]=Z,D[U++]=W,D[U++]=0,D[U++]=K,D[U++]=k,D[U++]=S,D[U++]=O,L[0]=Math.min(L[0],q+this.objectOffset[0]),L[1]=Math.min(L[1],Z+this.objectOffset[1]),L[2]=Math.min(L[2],W+this.objectOffset[2]),P=Math.min(P,K),I[0]=Math.max(I[0],q+this.objectOffset[0]),I[1]=Math.max(I[1],Z+this.objectOffset[1]),I[2]=Math.max(I[2],W+this.objectOffset[2]),B=Math.max(B,K),j+=1}}for(t.intensityBounds&&(P=+t.intensityBounds[0],B=+t.intensityBounds[1]),a=6;a<U;a+=10)D[a]=(D[a]-P)/(B-P);this._vertexCount=j,this._coordinateBuffer.update(D.subarray(0,U)),s.freeFloat(D),s.free(x.data),this.bounds=[L,I],this.intensity=t.intensity||this._field[2],(this.intensityBounds[0]!==P||this.intensityBounds[1]!==B)&&(r=!0),this.intensityBounds=[P,B]}if("levels"in t){var Q=t.levels;for(a=0,Q=Array.isArray(Q[0])?Q.slice():[[],[],Q];a<3;++a)Q[a]=Q[a].slice(),Q[a].sort(function(t,e){return t-e});for(a=0;a<3;++a)for(m=0;m<Q[a].length;++m)Q[a][m]-=this.objectOffset[a];s:for(a=0;a<3;++a){if(Q[a].length!==this.contourLevels[a].length){r=!0;break}for(m=0;m<Q[a].length;++m)if(Q[a][m]!==this.contourLevels[a][m]){r=!0;break s}}this.contourLevels=Q}if(r){b=this._field,o=this.shape;for(var J=[],$=0;$<3;++$){var tt=this.contourLevels[$],te=[],tr=[],ti=[0,0,0];for(a=0;a<tt.length;++a){var tn=c(this._field[$],tt[a]);te.push(J.length/5|0),j=0;u:for(m=0;m<tn.cells.length;++m){var to=tn.cells[m];for(H=0;H<2;++H){var ta=tn.positions[to[H]],ts=ta[0],tu=0|Math.floor(ts),tl=ts-tu,th=ta[1],tf=0|Math.floor(th),tc=th-tf,td=!1;l:for(var tp=0;tp<3;++tp){ti[tp]=0;var tv=($+tp+1)%3;for(G=0;G<2;++G){var tg=G?tl:1-tl;for(V=0,X=0|Math.min(Math.max(tu+G,0),o[0]);V<2;++V){var tm=V?tc:1-tc;if(Y=0|Math.min(Math.max(tf+V,0),o[1]),!isFinite(W=tp<2?this._field[tv].get(X,Y):(this.intensity.get(X,Y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(W)){td=!0;break l}var tb=tg*tm;ti[tp]+=tb*W}}}if(td){if(H>0){for(var ty=0;ty<5;++ty)J.pop();j-=1}continue u}J.push(ti[0],ti[1],ta[0],ta[1],ti[2]),j+=1}}tr.push(j)}this._contourOffsets[$]=te,this._contourCounts[$]=tr}var tx=s.mallocFloat(J.length);for(a=0;a<J.length;++a)tx[a]=J[a];this._contourBuffer.update(tx),s.freeFloat(tx)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)s.freeFloat(this._field[t].data)},R.highlight=function(t){if(!t){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(e=0,r=this.snapToData?t.dataCoordinate:t.position;e<3;++e)r[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var e,r,i=0,n=this.shape,o=s.mallocFloat(12*n[0]*n[1]),a=0;a<3;++a){if(!this.enableDynamic[a]){this.dynamicLevel[a]=NaN,this._dynamicCounts[a]=0;continue}this.dynamicLevel[a]=r[a];var u=(a+1)%3,l=(a+2)%3,h=this._field[a],f=this._field[u],d=this._field[l],p=c(h,r[a]),v=p.cells,g=p.positions;for(e=0,this._dynamicOffsets[a]=i;e<v.length;++e)for(var m=v[e],b=0;b<2;++b){var y=g[m[b]],x=+y[0],_=0|x,w=0|Math.min(_+1,n[0]),M=x-_,E=1-M,A=+y[1],T=0|A,R=0|Math.min(T+1,n[1]),k=A-T,S=1-k,O=E*S,C=E*k,L=M*S,I=M*k,P=O*f.get(_,T)+C*f.get(_,R)+L*f.get(w,T)+I*f.get(w,R),B=O*d.get(_,T)+C*d.get(_,R)+L*d.get(w,T)+I*d.get(w,R);if(isNaN(P)||isNaN(B)){b&&(i-=1);break}o[2*i+0]=P,o[2*i+1]=B,i+=1}this._dynamicCounts[a]=i-this._dynamicOffsets[a]}this._dynamicBuffer.update(o.subarray(0,2*i)),s.freeFloat(o)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(t,e,r){"use strict";var i=t("ndarray"),n=t("ndarray-ops"),o=t("typedarray-pool");e.exports=function(t){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(!a&&(a=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],u=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]),"number"==typeof arguments[1])return g(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e,r,f,d,m,b=arguments[1],y=l(b)?b:b.raw;if(y)return e=0|b.width,r=0|b.height,f=arguments[2]||t.RGBA,d=arguments[3]||t.UNSIGNED_BYTE,m=v(t),t.texImage2D(t.TEXTURE_2D,0,f,f,d,y),new c(t,m,e,r,f,d);if(b.shape&&b.data&&b.stride)return function(t,e){var r,a,s=e.dtype,u=e.shape.slice(),l=t.getParameter(t.MAX_TEXTURE_SIZE);if(u[0]<0||u[0]>l||u[1]<0||u[1]>l)throw Error("gl-texture2d: Invalid texture size");var f=p(u,e.stride.slice()),d=0;"float32"===s?d=t.FLOAT:"float64"===s?(d=t.FLOAT,f=!1,s="float32"):"uint8"===s?d=t.UNSIGNED_BYTE:(d=t.UNSIGNED_BYTE,f=!1,s="uint8");var g=0;if(2===u.length)g=t.LUMINANCE,u=[u[0],u[1],1],e=i(e.data,u,[e.stride[0],e.stride[1],1],e.offset);else if(3===u.length){if(1===u[2])g=t.ALPHA;else if(2===u[2])g=t.LUMINANCE_ALPHA;else if(3===u[2])g=t.RGB;else if(4===u[2])g=t.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords")}else throw Error("gl-texture2d: Invalid shape for texture");d!==t.FLOAT||t.getExtension("OES_texture_float")||(d=t.UNSIGNED_BYTE,f=!1);var m=e.size;if(f)r=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var b=[u[2],u[2]*u[0],1],y=i(a=o.malloc(m,s),u,b,0);("float32"===s||"float64"===s)&&d===t.UNSIGNED_BYTE?h(y,e):n.assign(y,e),r=a.subarray(0,m)}var x=v(t);return t.texImage2D(t.TEXTURE_2D,0,g,u[0],u[1],0,g,d,r),f||o.free(a),new c(t,x,u[0],u[1],g,d)}(t,b)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,u=null;function l(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var h=function(t,e){n.muls(t,e,255)};function f(t,e,r){var i=t.gl,n=i.getParameter(i.MAX_TEXTURE_SIZE);if(e<0||e>n||r<0||r>n)throw Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),i.texImage2D(i.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function c(t,e,r,i,n,o){this.gl=t,this.handle=e,this.format=n,this.type=o,this._shape=[r,i],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(t){return a.wrapS=t}},{get:function(){return a._wrapT},set:function(t){return a.wrapT=t}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(t){return a.width=t}},{get:function(){return a._shape[1]},set:function(t){return a.height=t}}]),this._shapeVector=u}var d=c.prototype;function p(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function v(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function g(t,e,r,i,n){var o=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>o||r<0||r>o)throw Error("gl-texture2d: Invalid texture shape");if(n===t.FLOAT&&!t.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var a=v(t);return t.texImage2D(t.TEXTURE_2D,0,i,e,r,0,i,n,null),new c(t,a,e,r,i,n)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&!e.getExtension("OES_texture_float_linear")&&(t=e.NEAREST),0>s.indexOf(t))throw Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&!e.getExtension("OES_texture_float_linear")&&(t=e.NEAREST),0>s.indexOf(t))throw Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),0>u.indexOf(t))throw Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),0>u.indexOf(t))throw Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(0>u.indexOf(t[e]))throw Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return f(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return f(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,f(this,this._shape[0],t),t}}}),d.bind=function(t){var e=this.gl;return(void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t)?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)0>this._mipLevels.indexOf(e)&&this._mipLevels.push(e)},d.setPixels=function(t,e,r,a){var s=this.gl;this.bind(),Array.isArray(e)?(a=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),a=a||0;var u=l(t)?t:t.raw;if(u)0>this._mipLevels.indexOf(a)?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,u),this._mipLevels.push(a)):s.texSubImage2D(s.TEXTURE_2D,a,e,r,this.format,this.type,u);else if(t.shape&&t.stride&&t.data){if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>a||r+t.shape[0]>this._shape[0]>>>a||e<0||r<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");(function(t,e,r,a,s,u,l,f){var c=f.dtype,d=f.shape.slice();if(d.length<2||d.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=0,g=0,m=p(d,f.stride.slice());if("float32"===c?v=t.FLOAT:"float64"===c?(v=t.FLOAT,m=!1,c="float32"):"uint8"===c?v=t.UNSIGNED_BYTE:(v=t.UNSIGNED_BYTE,m=!1,c="uint8"),2===d.length)g=t.LUMINANCE,d=[d[0],d[1],1],f=i(f.data,d,[f.stride[0],f.stride[1],1],f.offset);else if(3===d.length){if(1===d[2])g=t.ALPHA;else if(2===d[2])g=t.LUMINANCE_ALPHA;else if(3===d[2])g=t.RGB;else if(4===d[2])g=t.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");d[2]}else throw Error("gl-texture2d: Invalid shape for texture");if((g===t.LUMINANCE||g===t.ALPHA)&&(s===t.LUMINANCE||s===t.ALPHA)&&(g=s),g!==s)throw Error("gl-texture2d: Incompatible texture format for setPixels");var b=f.size,y=0>l.indexOf(a);if(y&&l.push(a),v===u&&m)0===f.offset&&f.data.length===b?y?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,u,f.data):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,u,f.data):y?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,u,f.data.subarray(f.offset,f.offset+b)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,u,f.data.subarray(f.offset,f.offset+b));else{var x,_=i(x=u===t.FLOAT?o.mallocFloat32(b):o.mallocUint8(b),d,[d[2],d[2]*d[0],1]);v===t.FLOAT&&u===t.UNSIGNED_BYTE?h(_,f):n.assign(_,f),y?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,u,x.subarray(0,b)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,u,x.subarray(0,b)),u===t.FLOAT?o.freeFloat32(x):o.freeUint8(x)}})(s,e,r,a,this.format,this.type,this._mipLevels,t)}else throw Error("gl-texture2d: Unsupported data type")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(t,e,r){"use strict";e.exports=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var i=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>i)throw Error("gl-vao: Too many vertex attributes");for(var n=0;n<r.length;++n){var o=r[n];if(o.buffer){var a=o.buffer,s=o.size||4,u=o.type||t.FLOAT,l=!!o.normalized,h=o.stride||0,f=o.offset||0;a.bind(),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,s,u,l,h,f)}else{if("number"==typeof o)t.vertexAttrib1f(n,o);else if(1===o.length)t.vertexAttrib1f(n,o[0]);else if(2===o.length)t.vertexAttrib2f(n,o[0],o[1]);else if(3===o.length)t.vertexAttrib3f(n,o[0],o[1],o[2]);else if(4===o.length)t.vertexAttrib4f(n,o[0],o[1],o[2],o[3]);else throw Error("gl-vao: Invalid vertex attribute");t.disableVertexAttribArray(n)}}for(;n<i;++n)t.disableVertexAttribArray(n)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(var n=0;n<i;++n)t.disableVertexAttribArray(n)}}},{}],148:[function(t,e,r){"use strict";var i=t("./do-bind.js");function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._elements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},e.exports=function(t){return new n(t)}},{"./do-bind.js":147}],149:[function(t,e,r){"use strict";var i=t("./do-bind.js");function n(t,e,r,i,n,o){this.location=t,this.dimension=e,this.a=r,this.b=i,this.c=n,this.d=o}function o(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},o.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},o.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},o.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},o.prototype.update=function(t,e,r){if(this.bind(),i(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var a=t[o];"number"==typeof a?this._attribs.push(new n(o,1,a)):Array.isArray(a)&&this._attribs.push(new n(o,a.length,a[0],a[1],a[2],a[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},o.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._useElements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},e.exports=function(t,e){return new o(t,e,e.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(t,e,r){"use strict";var i=t("./lib/vao-native.js"),n=t("./lib/vao-emulated.js");function o(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}e.exports=function(t,e,r,a){var s,u=t.createVertexArray?new o(t):t.getExtension("OES_vertex_array_object");return(s=u?i(t,u):n(t)).update(e,r,a),s}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}},{}],152:[function(t,e,r){e.exports=function(t,e){var r=i(t[0],t[1],t[2]),a=i(e[0],e[1],e[2]);n(r,r),n(a,a);var s=o(r,a);return s>1?0:Math.acos(s)};var i=t("./fromValues"),n=t("./normalize"),o=t("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(t,e,r){e.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},{}],154:[function(t,e,r){e.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],155:[function(t,e,r){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],156:[function(t,e,r){e.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},{}],157:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=n*u-o*s,t[1]=o*a-i*u,t[2]=i*s-n*a,t}},{}],158:[function(t,e,r){e.exports=t("./distance")},{"./distance":159}],159:[function(t,e,r){e.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}},{}],160:[function(t,e,r){e.exports=t("./divide")},{"./divide":161}],161:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}},{}],162:[function(t,e,r){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],163:[function(t,e,r){e.exports=1e-6},{}],164:[function(t,e,r){e.exports=function(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=i*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=i*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=i*Math.max(1,Math.abs(o),Math.abs(u))};var i=t("./epsilon")},{"./epsilon":163}],165:[function(t,e,r){e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},{}],166:[function(t,e,r){e.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},{}],167:[function(t,e,r){e.exports=function(t,e,r,n,o,a){var s,u;for(e||(e=3),r||(r=0),u=n?Math.min(n*e+r,t.length):t.length,s=r;s<u;s+=e)i[0]=t[s],i[1]=t[s+1],i[2]=t[s+2],o(i,i,a),t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2];return t};var i=t("./create")()},{"./create":156}],168:[function(t,e,r){e.exports=function(t,e,r){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=r,i}},{}],169:[function(t,e,r){e.exports={EPSILON:t("./epsilon"),create:t("./create"),clone:t("./clone"),angle:t("./angle"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),equals:t("./equals"),exactEquals:t("./exactEquals"),add:t("./add"),subtract:t("./subtract"),sub:t("./sub"),multiply:t("./multiply"),mul:t("./mul"),divide:t("./divide"),div:t("./div"),min:t("./min"),max:t("./max"),floor:t("./floor"),ceil:t("./ceil"),round:t("./round"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),dist:t("./dist"),squaredDistance:t("./squaredDistance"),sqrDist:t("./sqrDist"),length:t("./length"),len:t("./len"),squaredLength:t("./squaredLength"),sqrLen:t("./sqrLen"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformMat3:t("./transformMat3"),transformQuat:t("./transformQuat"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),forEach:t("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(t,e,r){e.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},{}],171:[function(t,e,r){e.exports=t("./length")},{"./length":172}],172:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}},{}],173:[function(t,e,r){e.exports=function(t,e,r,i){var n=e[0],o=e[1],a=e[2];return t[0]=n+i*(r[0]-n),t[1]=o+i*(r[1]-o),t[2]=a+i*(r[2]-a),t}},{}],174:[function(t,e,r){e.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}},{}],175:[function(t,e,r){e.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}},{}],176:[function(t,e,r){e.exports=t("./multiply")},{"./multiply":177}],177:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}},{}],178:[function(t,e,r){e.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},{}],179:[function(t,e,r){e.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}},{}],180:[function(t,e,r){e.exports=function(t,e){var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*(e=e||1);return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=i*e,t}},{}],181:[function(t,e,r){e.exports=function(t,e,r,i){var n=r[1],o=r[2],a=e[1]-n,s=e[2]-o,u=Math.sin(i),l=Math.cos(i);return t[0]=e[0],t[1]=n+a*l-s*u,t[2]=o+a*u+s*l,t}},{}],182:[function(t,e,r){e.exports=function(t,e,r,i){var n=r[0],o=r[2],a=e[0]-n,s=e[2]-o,u=Math.sin(i),l=Math.cos(i);return t[0]=n+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}},{}],183:[function(t,e,r){e.exports=function(t,e,r,i){var n=r[0],o=r[1],a=e[0]-n,s=e[1]-o,u=Math.sin(i),l=Math.cos(i);return t[0]=n+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}},{}],184:[function(t,e,r){e.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},{}],185:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}},{}],186:[function(t,e,r){e.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}},{}],187:[function(t,e,r){e.exports=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}},{}],188:[function(t,e,r){e.exports=t("./squaredDistance")},{"./squaredDistance":190}],189:[function(t,e,r){e.exports=t("./squaredLength")},{"./squaredLength":191}],190:[function(t,e,r){e.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}},{}],191:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}},{}],192:[function(t,e,r){e.exports=t("./subtract")},{"./subtract":193}],193:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},{}],194:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2];return t[0]=i*r[0]+n*r[3]+o*r[6],t[1]=i*r[1]+n*r[4]+o*r[7],t[2]=i*r[2]+n*r[5]+o*r[8],t}},{}],195:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=r[3]*i+r[7]*n+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*o+r[12])/a,t[1]=(r[1]*i+r[5]*n+r[9]*o+r[13])/a,t[2]=(r[2]*i+r[6]*n+r[10]*o+r[14])/a,t}},{}],196:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=r[0],s=r[1],u=r[2],l=r[3],h=l*i+s*o-u*n,f=l*n+u*i-a*o,c=l*o+a*n-s*i,d=-a*i-s*n-u*o;return t[0]=h*l+-(d*a)+-(f*u)- -(c*s),t[1]=f*l+-(d*s)+-(c*a)- -(h*u),t[2]=c*l+-(d*u)+-(h*s)- -(f*a),t}},{}],197:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}},{}],198:[function(t,e,r){e.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},{}],199:[function(t,e,r){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},{}],200:[function(t,e,r){e.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},{}],201:[function(t,e,r){e.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+i*i+n*n+o*o)}},{}],202:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}},{}],203:[function(t,e,r){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},{}],204:[function(t,e,r){e.exports=function(t,e,r,i){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}},{}],205:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),add:t("./add"),subtract:t("./subtract"),multiply:t("./multiply"),divide:t("./divide"),min:t("./min"),max:t("./max"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),squaredDistance:t("./squaredDistance"),length:t("./length"),squaredLength:t("./squaredLength"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformQuat:t("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(t,e,r){e.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},{}],207:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+r*r+i*i+n*n)}},{}],208:[function(t,e,r){e.exports=function(t,e,r,i){var n=e[0],o=e[1],a=e[2],s=e[3];return t[0]=n+i*(r[0]-n),t[1]=o+i*(r[1]-o),t[2]=a+i*(r[2]-a),t[3]=s+i*(r[3]-s),t}},{}],209:[function(t,e,r){e.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}},{}],210:[function(t,e,r){e.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}},{}],211:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}},{}],212:[function(t,e,r){e.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},{}],213:[function(t,e,r){e.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=r*r+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=i*a,t[2]=n*a,t[3]=o*a),t}},{}],214:[function(t,e,r){var i=t("./normalize"),n=t("./scale");e.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),n(t,t,e),t}},{"./normalize":213,"./scale":215}],215:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}},{}],216:[function(t,e,r){e.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}},{}],217:[function(t,e,r){e.exports=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t}},{}],218:[function(t,e,r){e.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return r*r+i*i+n*n+o*o}},{}],219:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n}},{}],220:[function(t,e,r){e.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}},{}],221:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,t[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,t[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,t[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,t}},{}],222:[function(t,e,r){e.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=r[0],s=r[1],u=r[2],l=r[3],h=l*i+s*o-u*n,f=l*n+u*i-a*o,c=l*o+a*n-s*i,d=-a*i-s*n-u*o;return t[0]=h*l+-(d*a)+-(f*u)- -(c*s),t[1]=f*l+-(d*s)+-(c*a)- -(h*u),t[2]=c*l+-(d*u)+-(h*s)- -(f*a),t[3]=e[3],t}},{}],223:[function(t,e,r){var i=t("glsl-tokenizer"),n=t("atob-lite");e.exports=function(t){for(var e=Array.isArray(t)?t:i(t),r=0;r<e.length;r++){var o=e[r];if("preprocessor"===o.type){var a=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[1],u=a[2];return(s?n(u):u).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(t,e,r){e.exports=function(t){var e,r,l,h=0,f=0,c=999,d=[],p=[],v=1,g=0,m=0,b=!1,y=!1,x="",_=o,w=i;"300 es"===(t=t||{}).version&&(_=s,w=a);for(var M={},E={},h=0;h<_.length;h++)M[_[h]]=!0;for(var h=0;h<w.length;h++)E[w[h]]=!0;return function(t){return(p=[],null!==t)?function(t){var i;for(h=0,t.toString&&(t=t.toString()),x+=t.replace(/\r\n/g,"\n"),l=x.length;e=x[h],h<l;){switch(i=h,c){case 0:h="/"===e&&"*"===r?(d.push(e),A(d.join("")),c=999,h+1):(d.push(e),r=e,h+1);break;case 1:case 2:h=function(){return("\r"===e||"\n"===e)&&"\\"!==r?(A(d.join("")),c=999,h):(d.push(e),r=e,h+1)}();break;case 3:h=function(){if("."===r&&/\d/.test(e))return c=5,h;if("/"===r&&"*"===e)return c=0,h;if("/"===r&&"/"===e)return c=1,h;if("."===e&&d.length){for(;T(d););return c=5,h}if(";"===e||")"===e||"("===e){if(d.length)for(;T(d););return A(e),c=999,h+1}var t=2===d.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;T(d););return c=999,h}return d.push(e),r=e,h+1}();break;case 4:h="."===e||/[eE]/.test(e)?(d.push(e),c=5,r=e,h+1):"x"===e&&1===d.length&&"0"===d[0]?(c=11,d.push(e),r=e,h+1):/[^\d]/.test(e)?(A(d.join("")),c=999,h):(d.push(e),r=e,h+1);break;case 11:h=/[^a-fA-F0-9]/.test(e)?(A(d.join("")),c=999,h):(d.push(e),r=e,h+1);break;case 5:"f"===e&&(d.push(e),r=e,h+=1),h=/[eE]/.test(e)||("-"===e||"+"===e)&&/[eE]/.test(r)?(d.push(e),r=e,h+1):/[^\d]/.test(e)?(A(d.join("")),c=999,h):(d.push(e),r=e,h+1);break;case 9999:h=function(){if(/[^\d\w_]/.test(e)){var t=d.join("");return c=E[t]?8:M[t]?7:6,A(d.join("")),c=999,h}return d.push(e),r=e,h+1}();break;case 9:h=/[^\s]/g.test(e)?(A(d.join("")),c=999,h):(d.push(e),r=e,h+1);break;case 999:d=d.length?[]:d,h="/"===r&&"*"===e?(m=f+h-1,c=0,r=e,h+1):"/"===r&&"/"===e?(m=f+h-1,c=1,r=e,h+1):"#"===e?(c=2,m=f+h,h):/\s/.test(e)?(c=9,m=f+h,h):(b=/\d/.test(e),y=/[^\w_]/.test(e),m=f+h,c=b?4:y?3:9999,h)}i!==h&&("\n"===x[i]?(g=0,++v):++g)}return f+=h,x=x.slice(h),p}(t):(d.length&&A(d.join("")),c=10,A("(eof)"),p)};function A(t){t.length&&p.push({type:u[c],data:t,position:m,line:v,column:g})}function T(t){for(var e,r,i=0;;){if(e=n.indexOf(t.slice(0,t.length+i).join("")),r=n[e],-1===e){if(i--+t.length>0)continue;r=t.slice(0,1).join("")}return A(r),m+=r.length,(d=d.slice(r.length)).length}}};var i=t("./lib/literals"),n=t("./lib/operators"),o=t("./lib/builtins"),a=t("./lib/literals-300es"),s=t("./lib/builtins-300es"),u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(t,e,r){var i=t("./builtins");i=i.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),e.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(t,e,r){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(t,e,r){var i=t("./literals");e.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(t,e,r){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(t,e,r){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(t,e,r){var i=t("./index");e.exports=function(t,e){var r=i(e),n=[];return(n=n.concat(r(t))).concat(r(null))}},{"./index":224}],231:[function(t,e,r){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],i=0;i<t.length-1;i++)r.push(t[i],e[i]||"");return r.push(t[i]),r.join("")}},{}],232:[function(t,e,r){"use strict";var i=t("is-browser");e.exports=i&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":236}],233:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.length;if(0===r)throw Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw Error("Must input at least d+1 points");var a=t.slice(0,n+1),s=i.apply(void 0,a);if(0===s)throw Error("Input not in general position");for(var u=Array(n+1),h=0;h<=n;++h)u[h]=h;s<0&&(u[0]=1,u[1]=0);for(var f=new o(u,Array(n+1),!1),c=f.adjacent,d=Array(n+2),h=0;h<=n;++h){for(var p=u.slice(),v=0;v<=n;++v)v===h&&(p[v]=-1);var g=p[0];p[0]=p[1],p[1]=g;var m=new o(p,Array(n+1),!0);c[h]=m,d[h]=m}d[n+1]=f;for(var h=0;h<=n;++h)for(var p=c[h].vertices,b=c[h].adjacent,v=0;v<=n;++v){var y=p[v];if(y<0){b[v]=f;continue}for(var x=0;x<=n;++x)0>c[x].vertices.indexOf(y)&&(b[v]=c[x])}for(var _=new l(n,a,d),w=!!e,h=n+1;h<r;++h)_.insert(t[h],w);return _.boundary()};var i=t("robust-orientation"),n=t("simplicial-complex").compareCells;function o(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function a(t,e,r){this.vertices=t,this.cell=e,this.index=r}function s(t,e){return n(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function l(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter(function(t){return!t.boundary}),this.tuple=Array(t+1);for(var n,o,a=0;a<=t;++a)this.tuple[a]=this.vertices[a];var s=u[t];s||(s=u[t]=((n=i[t+1])||(n=i),o=n,function(){var t=this.tuple;return o.apply(this,t)})),this.orient=s}var h=l.prototype;h.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,i=this.vertices.length-1,n=this.tuple,o=this.vertices,a=[t];for(t.lastVisited=-i;a.length>0;)for(var s=(t=a.pop()).adjacent,u=0;u<=r;++u){var l=s[u];if(l.boundary&&!(l.lastVisited<=-i)){for(var h=l.vertices,f=0;f<=r;++f){var c=h[f];c<0?n[f]=e:n[f]=o[c]}var d=this.orient();if(d>0)return l;l.lastVisited=-i,0===d&&a.push(l)}}return null},h.walk=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,o=this.tuple,a=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[a];h:for(;!s.boundary;){for(var u=s.vertices,l=s.adjacent,h=0;h<=i;++h)o[h]=n[u[h]];s.lastVisited=r;for(var h=0;h<=i;++h){var f=l[h];if(!(f.lastVisited>=r)){var c=o[h];o[h]=t;var d=this.orient();if(o[h]=c,d<0){s=f;continue h}f.boundary?f.lastVisited=-r:f.lastVisited=r}}return}return s},h.addPeaks=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,u=this.tuple,l=this.interior,h=this.simplices,f=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,l.push(e);for(var c=[];f.length>0;){var e=f.pop(),d=e.vertices,p=e.adjacent,v=d.indexOf(r);if(!(v<0))for(var g=0;g<=i;++g){if(g!==v){var m=p[g];if(m.boundary&&!(m.lastVisited>=r)){var b=m.vertices;if(m.lastVisited!==-r){for(var y=0,x=0;x<=i;++x)b[x]<0?(y=x,u[x]=t):u[x]=n[b[x]];if(this.orient()>0){b[y]=r,m.boundary=!1,l.push(m),f.push(m),m.lastVisited=r;continue}m.lastVisited=-r}var _=m.adjacent,w=d.slice(),M=p.slice(),E=new o(w,M,!0);h.push(E);var A=_.indexOf(e);if(!(A<0)){_[A]=E,M[v]=m,w[g]=-1,M[g]=e,p[g]=E,E.flip();for(var x=0;x<=i;++x){var T=w[x];if(!(T<0)&&T!==r){for(var R=Array(i-1),k=0,S=0;S<=i;++S){var O=w[S];O<0||S===x||(R[k++]=O)}c.push(new a(R,E,x))}}}}}}}c.sort(s);for(var g=0;g+1<c.length;g+=2){var C=c[g],L=c[g+1],I=C.index,P=L.index;I<0||P<0||(C.cell.adjacent[C.index]=L.cell,L.cell.adjacent[L.index]=C.cell)}},h.insert=function(t,e){var r=this.vertices;r.push(t);var i=this.walk(t,e);if(i){for(var n=this.dimension,o=this.tuple,a=0;a<=n;++a){var s=i.vertices[a];s<0?o[a]=t:o[a]=r[s]}var u=this.orient(o);!(u<0)&&(0!==u||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},h.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,i=r.length,n=0;n<i;++n){var o=r[n];if(o.boundary){for(var a=Array(t),s=o.vertices,u=0,l=0,h=0;h<=t;++h)s[h]>=0?a[u++]=s[h]:l=1&h;if(l===(1&t)){var f=a[0];a[0]=a[1],a[1]=f}e.push(a)}}return e}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(t,e,r){"use strict";var i=t("binary-search-bounds");function n(t,e,r,i,n){this.mid=t,this.left=e,this.right=r,this.leftPoints=i,this.rightPoints=n,this.count=(e?e.count:0)+(r?r.count:0)+i.length}e.exports=function(t){return new m(t&&0!==t.length?g(t):null)};var o=n.prototype;function a(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function s(t,e){var r=g(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function u(t,e){var r=t.intervals([]);r.push(e),s(t,r)}function l(t,e){var r=t.intervals([]),i=r.indexOf(e);return i<0?0:(r.splice(i,1),s(t,r),1)}function h(t,e,r){for(var i=0;i<t.length&&t[i][0]<=e;++i){var n=r(t[i]);if(n)return n}}function f(t,e,r){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var n=r(t[i]);if(n)return n}}function c(t,e){for(var r=0;r<t.length;++r){var i=e(t[r]);if(i)return i}}function d(t,e){return t-e}function p(t,e){return t[0]-e[0]||t[1]-e[1]}function v(t,e){return t[1]-e[1]||t[0]-e[0]}function g(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(d);for(var i=e[e.length>>1],o=[],a=[],s=[],r=0;r<t.length;++r){var u=t[r];u[1]<i?o.push(u):i<u[0]?a.push(u):s.push(u)}var l=s.slice();return s.sort(p),l.sort(v),new n(i,g(o),g(a),s,l)}function m(t){this.root=t}o.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},o.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?u(this,t):this.left.insert(t):this.left=g([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?u(this,t):this.right.insert(t):this.right=g([t]);else{var r=i.ge(this.leftPoints,t,p),n=i.ge(this.rightPoints,t,v);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},o.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return l(this,t);var r=this.left.remove(t);return 2===r?(this.left=null,this.count-=1,1):(1===r&&(this.count-=1),r)}if(t[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return l(this,t);var r=this.right.remove(t);return 2===r?(this.right=null,this.count-=1,1):(1===r&&(this.count-=1),r)}if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var n=this,o=this.left;o.right;)n=o,o=o.right;if(n===this)o.right=this.right;else{var s=this.left,r=this.right;n.count-=o.count,n.right=o.left,o.left=s,o.right=r}a(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(var s=i.ge(this.leftPoints,t,p);s<this.leftPoints.length&&this.leftPoints[s][0]===t[0];++s)if(this.leftPoints[s]===t){this.count-=1,this.leftPoints.splice(s,1);for(var r=i.ge(this.rightPoints,t,v);r<this.rightPoints.length&&this.rightPoints[r][1]===t[1];++r)if(this.rightPoints[r]===t)return this.rightPoints.splice(r,1),1}return 0},o.queryPoint=function(t,e){if(t<this.mid){if(this.left){var r=this.left.queryPoint(t,e);if(r)return r}return h(this.leftPoints,t,e)}if(!(t>this.mid))return c(this.leftPoints,e);if(this.right){var r=this.right.queryPoint(t,e);if(r)return r}return f(this.rightPoints,t,e)},o.queryInterval=function(t,e,r){if(t<this.mid&&this.left){var i=this.left.queryInterval(t,e,r);if(i)return i}if(e>this.mid&&this.right){var i=this.right.queryInterval(t,e,r);if(i)return i}return e<this.mid?h(this.leftPoints,e,r):t>this.mid?f(this.rightPoints,t,r):c(this.leftPoints,r)};var b=m.prototype;b.insert=function(t){this.root?this.root.insert(t):this.root=new n(t[0],null,null,[t],[t])},b.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},b.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},b.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(t,e,r){"use strict";e.exports=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=r;return e}},{}],236:[function(t,e,r){e.exports=!0},{}],237:[function(t,e,r){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */e.exports=function(t){return null!=t&&(i(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))||!!t._isBuffer)}},{}],238:[function(t,e,r){"use strict";e.exports=o,e.exports.isMobile=o,e.exports.default=o;var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=t.tablet?n.test(e):i.test(e);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],239:[function(t,e,r){"use strict";e.exports=function(t){for(var e,r=t.length,i=0;i<r;i++)if(((e=t.charCodeAt(i))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],240:[function(t,e,r){e.exports=function(t,e,r){return t*(1-r)+e*r}},{}],241:[function(t,e,r){var i=t("./normalize"),n=t("gl-mat4/create"),o=t("gl-mat4/clone"),a=t("gl-mat4/determinant"),s=t("gl-mat4/invert"),u=t("gl-mat4/transpose"),l={length:t("gl-vec3/length"),normalize:t("gl-vec3/normalize"),dot:t("gl-vec3/dot"),cross:t("gl-vec3/cross")},h=n(),f=n(),c=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function v(t,e,r,i,n){t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n}e.exports=function(t,e,r,n,g,m){if(e||(e=[0,0,0]),r||(r=[0,0,0]),n||(n=[0,0,0]),g||(g=[0,0,0,1]),m||(m=[0,0,0,1]),!i(h,t)||(o(f,h),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(1e-8>a(f))))return!1;var b,y,x,_,w,M,E=h[3],A=h[7],T=h[11],R=h[12],k=h[13],S=h[14],O=h[15];if(0!==E||0!==A||0!==T){if(c[0]=E,c[1]=A,c[2]=T,c[3]=O,!s(f,f))return!1;u(f,f),b=g,y=c[0],x=c[1],_=c[2],w=c[3],b[0]=f[0]*y+f[4]*x+f[8]*_+f[12]*w,b[1]=f[1]*y+f[5]*x+f[9]*_+f[13]*w,b[2]=f[2]*y+f[6]*x+f[10]*_+f[14]*w,b[3]=f[3]*y+f[7]*x+f[11]*_+f[15]*w}else g[0]=g[1]=g[2]=0,g[3]=1;if(e[0]=R,e[1]=k,e[2]=S,(M=d)[0][0]=h[0],M[0][1]=h[1],M[0][2]=h[2],M[1][0]=h[4],M[1][1]=h[5],M[1][2]=h[6],M[2][0]=h[8],M[2][1]=h[9],M[2][2]=h[10],r[0]=l.length(d[0]),l.normalize(d[0],d[0]),n[0]=l.dot(d[0],d[1]),v(d[1],d[1],d[0],1,-n[0]),r[1]=l.length(d[1]),l.normalize(d[1],d[1]),n[0]/=r[1],n[1]=l.dot(d[0],d[2]),v(d[2],d[2],d[0],1,-n[1]),n[2]=l.dot(d[1],d[2]),v(d[2],d[2],d[1],1,-n[2]),r[2]=l.length(d[2]),l.normalize(d[2],d[2]),n[1]/=r[2],n[2]/=r[2],l.cross(p,d[1],d[2]),0>l.dot(d[0],p))for(var C=0;C<3;C++)r[C]*=-1,d[C][0]*=-1,d[C][1]*=-1,d[C][2]*=-1;return m[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(m[0]=-m[0]),d[0][2]>d[2][0]&&(m[1]=-m[1]),d[1][0]>d[0][1]&&(m[2]=-m[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(t,e,r){e.exports=function(t,e){var r=e[15];if(0===r)return!1;for(var i=1/r,n=0;n<16;n++)t[n]=e[n]*i;return!0}},{}],243:[function(t,e,r){var i=t("gl-vec3/lerp"),n=t("mat4-recompose"),o=t("mat4-decompose"),a=t("gl-mat4/determinant"),s=t("quat-slerp"),u=f(),l=f(),h=f();function f(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(t){return[t||0,t||0,t||0]}e.exports=function(t,e,r,f){if(0===a(e)||0===a(r))return!1;var c=o(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=o(r,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!!c&&!!d&&(i(h.translate,u.translate,l.translate,f),i(h.skew,u.skew,l.skew,f),i(h.scale,u.scale,l.scale,f),i(h.perspective,u.perspective,l.perspective,f),s(h.quaternion,u.quaternion,l.quaternion,f),n(t,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(t,e,r){var i={identity:t("gl-mat4/identity"),translate:t("gl-mat4/translate"),multiply:t("gl-mat4/multiply"),create:t("gl-mat4/create"),scale:t("gl-mat4/scale"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")};i.create();var n=i.create();e.exports=function(t,e,r,o,a,s){return i.identity(t),i.fromRotationTranslation(t,s,e),t[3]=a[0],t[7]=a[1],t[11]=a[2],t[15]=a[3],i.identity(n),0!==o[2]&&(n[9]=o[2],i.multiply(t,t,n)),0!==o[1]&&(n[9]=0,n[8]=o[1],i.multiply(t,t,n)),0!==o[0]&&(n[8]=0,n[4]=o[0],i.multiply(t,t,n)),i.scale(t,t,r),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(t,e,r){"use strict";var i=t("binary-search-bounds"),n=t("mat4-interpolate"),o=t("gl-mat4/invert"),a=t("gl-mat4/rotateX"),s=t("gl-mat4/rotateY"),u=t("gl-mat4/rotateZ"),l=t("gl-mat4/lookAt"),h=t("gl-mat4/translate");t("gl-mat4/scale");var f=t("gl-vec3/normalize"),c=[0,0,0];function d(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(t){var e=(t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(e)};var p=d.prototype;p.recalcMatrix=function(t){var e=this._time,r=i.le(e,t),a=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===e.length-1)for(var u=16*r,l=0;l<16;++l)a[l]=s[u++];else{for(var h=e[r+1]-e[r],u=16*r,c=this.prevMatrix,d=!0,l=0;l<16;++l)c[l]=s[u++];for(var p=this.nextMatrix,l=0;l<16;++l)p[l]=s[u++],d=d&&c[l]===p[l];if(h<1e-6||d)for(var l=0;l<16;++l)a[l]=c[l];else n(a,c,p,(t-e[r])/h)}var v=this.computedUp;v[0]=a[1],v[1]=a[5],v[2]=a[9],f(v,v);var g=this.computedInverse;o(g,a);var m=this.computedEye,b=g[15];m[0]=g[12]/b,m[1]=g[13]/b,m[2]=g[14]/b;for(var y=this.computedCenter,x=Math.exp(this.computedRadius[0]),l=0;l<3;++l)y[l]=m[l]-a[2+4*l]*x}},p.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,i=0;i<16;++i)e.push(e[r++]);this._time.push(t)}},p.flush=function(t){var e=i.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(t,e,r,i){this.recalcMatrix(t),e=e||this.computedEye,r=r||c,i=i||this.computedUp,this.setMatrix(t,l(this.computedMatrix,e,r,i));for(var n=0,o=0;o<3;++o)n+=Math.pow(r[o]-e[o],2);n=Math.log(Math.sqrt(n)),this.computedRadius[0]=n},p.rotate=function(t,e,r,i){this.recalcMatrix(t);var n=this.computedInverse;e&&s(n,n,e),r&&a(n,n,r),i&&u(n,n,i),this.setMatrix(t,o(this.computedMatrix,n))};var v=[0,0,0];p.pan=function(t,e,r,i){v[0]=-(e||0),v[1]=-(r||0),v[2]=-(i||0),this.recalcMatrix(t);var n=this.computedInverse;h(n,n,v),this.setMatrix(t,o(n,n))},p.translate=function(t,e,r,i){v[0]=e||0,v[1]=r||0,v[2]=i||0,this.recalcMatrix(t);var n=this.computedMatrix;h(n,n,v),this.setMatrix(t,n)},p.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},p.setDistance=function(t,e){this.computedRadius[0]=e},p.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},p.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(t,e,r){"use strict";e.exports=function(t){var e=t.length;if(e<3){for(var r=Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}for(var o=Array(e),n=0;n<e;++n)o[n]=n;o.sort(function(e,r){return t[e][0]-t[r][0]||t[e][1]-t[r][1]});for(var a=[o[0],o[1]],s=[o[0],o[1]],n=2;n<e;++n){for(var u=o[n],l=t[u],h=a.length;h>1&&0>=i(t[a[h-2]],t[a[h-1]],l);)h-=1,a.pop();for(a.push(u),h=s.length;h>1&&i(t[s[h-2]],t[s[h-1]],l)>=0;)h-=1,s.pop();s.push(u)}for(var r=Array(s.length+a.length-2),f=0,n=0,c=a.length;n<c;++n)r[f++]=a[n];for(var d=s.length-2;d>0;--d)r[f++]=s[d];return r};var i=t("robust-orientation")[3]},{"robust-orientation":284}],247:[function(t,e,r){"use strict";e.exports=function(t,e){e||(e=t,t=window);var r=0,n=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function u(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==a.alt,a.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==a.shift,a.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==a.control,a.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==a.meta,a.meta=!!t.metaKey),e}function l(t,s){var l=i.x(s),h=i.y(s);"buttons"in s&&(t=0|s.buttons),(t!==r||l!==n||h!==o||u(s))&&(r=0|t,n=l||0,o=h||0,e&&e(r,n,o,a))}function h(t){l(0,t)}function f(){(r||n||o||a.shift||a.alt||a.meta||a.control)&&(n=o=0,r=0,a.shift=a.alt=a.control=a.meta=!1,e&&e(0,0,0,a))}function c(t){u(t)&&e&&e(r,n,o,a)}function d(t){0===i.buttons(t)?l(0,t):l(r,t)}function p(t){l(r|i.buttons(t),t)}function v(t){l(r&~i.buttons(t),t)}function g(){s||(s=!0,t.addEventListener("mousemove",d),t.addEventListener("mousedown",p),t.addEventListener("mouseup",v),t.addEventListener("mouseleave",h),t.addEventListener("mouseenter",h),t.addEventListener("mouseout",h),t.addEventListener("mouseover",h),t.addEventListener("blur",f),t.addEventListener("keyup",c),t.addEventListener("keydown",c),t.addEventListener("keypress",c),t!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}g();var m={element:t};return Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){e?g():s&&(s=!1,t.removeEventListener("mousemove",d),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",v),t.removeEventListener("mouseleave",h),t.removeEventListener("mouseenter",h),t.removeEventListener("mouseout",h),t.removeEventListener("mouseover",h),t.removeEventListener("blur",f),t.removeEventListener("keyup",c),t.removeEventListener("keydown",c),t.removeEventListener("keypress",c),t!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),m};var i=t("mouse-event")},{"mouse-event":249}],248:[function(t,e,r){var i={left:0,top:0};e.exports=function(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,o=t.clientX||0,a=t.clientY||0,s=(n=e)===window||n===document||n===document.body?i:n.getBoundingClientRect();return r[0]=o-s.left,r[1]=a-s.top,r}},{}],249:[function(t,e,r){"use strict";function i(t){return t.target||t.srcElement||window}r.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(2===e)return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(1===e)return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},r.element=i,r.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0},r.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}},{}],250:[function(t,e,r){"use strict";var i=t("to-px");e.exports=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=i("ex",t),o=function(t){r&&t.preventDefault();var i=t.deltaX||0,o=t.deltaY||0,a=t.deltaZ||0,s=t.deltaMode,u=1;switch(s){case 1:u=n;break;case 2:u=window.innerHeight}if(i*=u,o*=u,a*=u,i||o||a)return e(i,o,a,t)};return t.addEventListener("wheel",o),o}},{"to-px":304}],251:[function(t,e,r){"use strict";var i=t("typedarray-pool");e.exports=function(t){function e(t){throw Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r,o,a,s=t.order;Array.isArray(s)||e("Must specify order");var u=t.arrayArguments||1;u<1&&e("Must have at least one array argument"),0>(t.scalarArguments||0)&&e("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&e("Must specify vertex creation function"),"function"!=typeof t.cell&&e("Must specify cell creation function"),"function"!=typeof t.phase&&e("Must specify phase function");for(var l=t.getters||[],h=Array(u),f=0;f<u;++f)l.indexOf(f)>=0?h[f]=!0:h[f]=!1;return r=t.vertex,o=t.cell,a=t.phase,(0,n[[h,s].join(",")])(r,o,a,i.mallocUint32,i.freeUint32)};var n={"false,0,1":function(t,e,r,i,n){return function(o,a,s,u){var l,h=0|o.shape[0],f=0|o.shape[1],c=o.data,d=0|o.offset,p=0|o.stride[0],v=0|o.stride[1],g=d,m=0|-p,b=0,y=0|-v,x=0,_=-p-v|0,w=0,M=0|p,E=v-p*h|0,A=0,T=0,R=0,k=2*h|0,S=i(k),O=i(k),C=0,L=0,I=-1,P=-1,B=0,N=0|-h,F=0|h,z=0,D=-h-1|0,U=h-1|0,j=0,G=0,V=0;for(A=0;A<h;++A)S[C++]=r(c[g],a,s,u),g+=M;if(g+=E,f>0){if(T=1,S[C++]=r(c[g],a,s,u),g+=M,h>0)for(A=1,l=c[g],L=S[C]=r(l,a,s,u),B=S[C+I],z=S[C+N],j=S[C+D],(L!==B||L!==z||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,B,z,j,a,s,u),G=O[C]=R++),C+=1,g+=M,A=2;A<h;++A)l=c[g],L=S[C]=r(l,a,s,u),B=S[C+I],z=S[C+N],j=S[C+D],(L!==B||L!==z||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,B,z,j,a,s,u),G=O[C]=R++,j!==B&&e(O[C+I],G,w,b,j,B,a,s,u)),C+=1,g+=M;for(g+=E,C=0,V=I,I=P,P=V,V=N,N=F,F=V,V=D,D=U,U=V,T=2;T<f;++T){if(S[C++]=r(c[g],a,s,u),g+=M,h>0)for(A=1,l=c[g],L=S[C]=r(l,a,s,u),B=S[C+I],z=S[C+N],j=S[C+D],(L!==B||L!==z||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,B,z,j,a,s,u),G=O[C]=R++,j!==z&&e(O[C+N],G,x,w,z,j,a,s,u)),C+=1,g+=M,A=2;A<h;++A)l=c[g],L=S[C]=r(l,a,s,u),B=S[C+I],z=S[C+N],j=S[C+D],(L!==B||L!==z||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,B,z,j,a,s,u),G=O[C]=R++,j!==z&&e(O[C+N],G,x,w,z,j,a,s,u),j!==B&&e(O[C+I],G,w,b,j,B,a,s,u)),C+=1,g+=M;1&T&&(C=0),V=I,I=P,P=V,V=N,N=F,F=V,V=D,D=U,U=V,g+=E}}n(O),n(S)}},"false,1,0":function(t,e,r,i,n){return function(o,a,s,u){var l,h=0|o.shape[0],f=0|o.shape[1],c=o.data,d=0|o.offset,p=0|o.stride[0],v=0|o.stride[1],g=d,m=0|-p,b=0,y=0|-v,x=0,_=-p-v|0,w=0,M=0|v,E=p-v*f|0,A=0,T=0,R=0,k=2*f|0,S=i(k),O=i(k),C=0,L=0,I=-1,P=-1,B=0,N=0|-f,F=0|f,z=0,D=-f-1|0,U=f-1|0,j=0,G=0,V=0;for(T=0;T<f;++T)S[C++]=r(c[g],a,s,u),g+=M;if(g+=E,h>0){if(A=1,S[C++]=r(c[g],a,s,u),g+=M,f>0)for(T=1,l=c[g],L=S[C]=r(l,a,s,u),z=S[C+N],B=S[C+I],j=S[C+D],(L!==z||L!==B||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,z,B,j,a,s,u),G=O[C]=R++),C+=1,g+=M,T=2;T<f;++T)l=c[g],L=S[C]=r(l,a,s,u),z=S[C+N],B=S[C+I],j=S[C+D],(L!==z||L!==B||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,z,B,j,a,s,u),G=O[C]=R++,j!==B&&e(O[C+I],G,x,w,B,j,a,s,u)),C+=1,g+=M;for(g+=E,C=0,V=N,N=F,F=V,V=I,I=P,P=V,V=D,D=U,U=V,A=2;A<h;++A){if(S[C++]=r(c[g],a,s,u),g+=M,f>0)for(T=1,l=c[g],L=S[C]=r(l,a,s,u),z=S[C+N],B=S[C+I],j=S[C+D],(L!==z||L!==B||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,z,B,j,a,s,u),G=O[C]=R++,j!==z&&e(O[C+N],G,w,b,j,z,a,s,u)),C+=1,g+=M,T=2;T<f;++T)l=c[g],L=S[C]=r(l,a,s,u),z=S[C+N],B=S[C+I],j=S[C+D],(L!==z||L!==B||L!==j)&&(t(A,T,l,b=c[g+m],x=c[g+y],w=c[g+_],L,z,B,j,a,s,u),G=O[C]=R++,j!==B&&e(O[C+I],G,x,w,B,j,a,s,u),j!==z&&e(O[C+N],G,w,b,j,z,a,s,u)),C+=1,g+=M;1&A&&(C=0),V=N,N=F,F=V,V=I,I=P,P=V,V=D,D=U,U=V,g+=E}}n(O),n(S)}}}},{"typedarray-pool":308}],252:[function(t,e,r){"use strict";var i=t("dup"),n={zero:function(t,e,r,i){var n=t[0],o=r[0];i|=0;var a=0;for(a=0;a<n;++a)e[i]=0,i+=o},fdTemplate1:function(t,e,r,i,n,o,a){var s=t[0],u=r[0],l=o[0],h=-1*u;i|=0,a|=0;var f=0;for(f=0;f<s;++f)n[a]=.5*(e[i+h]-e[i+u]),i+=u,a+=l},fdTemplate2:function(t,e,r,i,n,o,a,s,u,l){var h=t[0],f=t[1],c=r[0],d=r[1],p=o[0],v=o[1],g=u[0],m=u[1],b=-1*c,y=-1*d;i|=0,a|=0,l|=0;var x=0,_=0,w=c-f*d,M=p-f*v,E=g-f*m;for(_=0;_<h;++_){for(x=0;x<f;++x)n[a]=.5*(e[i+b]-e[i+c]),s[l]=.5*(e[i+y]-e[i+d]),i+=d,a+=v,l+=m;i+=w,a+=M,l+=E}}},o={cdiff:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=n.dtype,h=n.order,f=[o,a.join(),s,u.join(),l,h.join()].join(),c=e[f];return c||(e[f]=c=t([o,a,s,u,l,h])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}},zero:function(t){var e={};return function(r){var i=r.dtype,n=r.order,o=[i,n.join()].join(),a=e[o];return a||(e[o]=a=t([i,n])),a(r.shape.slice(0),r.data,r.stride,0|r.offset)}},fdTemplate1:function(t){var e={};return function(r,i){var n=r.dtype,o=r.order,a=i.dtype,s=i.order,u=[n,o.join(),a,s.join()].join(),l=e[u];return l||(e[u]=l=t([n,o,a,s])),l(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}},fdTemplate2:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=n.dtype,h=n.order,f=[o,a.join(),s,u.join(),l,h.join()].join(),c=e[f];return c||(e[f]=c=t([o,a,s,u,l,h])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}}};function a(t){return n[t.funcName]}function s(t){var e;return(0,o[(e={funcName:t.funcName}).funcName])(a.bind(void 0,e))}var u={},l={},h=s({funcName:"cdiff"}),f=s({funcName:"zero"});function c(t,e,r,i){return function(t,n){var o=n.shape.slice();return o[0]>2&&o[1]>2&&i(n.pick(-1,-1).lo(1,1).hi(o[0]-2,o[1]-2),t.pick(-1,-1,0).lo(1,1).hi(o[0]-2,o[1]-2),t.pick(-1,-1,1).lo(1,1).hi(o[0]-2,o[1]-2)),o[1]>2&&(r(n.pick(0,-1).lo(1).hi(o[1]-2),t.pick(0,-1,1).lo(1).hi(o[1]-2)),e(t.pick(0,-1,0).lo(1).hi(o[1]-2))),o[1]>2&&(r(n.pick(o[0]-1,-1).lo(1).hi(o[1]-2),t.pick(o[0]-1,-1,1).lo(1).hi(o[1]-2)),e(t.pick(o[0]-1,-1,0).lo(1).hi(o[1]-2))),o[0]>2&&(r(n.pick(-1,0).lo(1).hi(o[0]-2),t.pick(-1,0,0).lo(1).hi(o[0]-2)),e(t.pick(-1,0,1).lo(1).hi(o[0]-2))),o[0]>2&&(r(n.pick(-1,o[1]-1).lo(1).hi(o[0]-2),t.pick(-1,o[1]-1,0).lo(1).hi(o[0]-2)),e(t.pick(-1,o[1]-1,1).lo(1).hi(o[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(o[0]-1,0,0,0),t.set(o[0]-1,0,1,0),t.set(0,o[1]-1,0,0),t.set(0,o[1]-1,1,0),t.set(o[0]-1,o[1]-1,0,0),t.set(o[0]-1,o[1]-1,1,0),t}}e.exports=function(t,e,r){return(Array.isArray(r)||(r="string"==typeof r?i(e.dimension,r):i(e.dimension,"clamp")),0===e.size)?t:0===e.dimension?(t.set(0),t):(function(t){var e,r=t.join(),i=l[r];if(i)return i;for(var n=t.length,o=[h,f],a=1;a<=n;++a)o.push((e=a)in u?u[e]:u[e]=s({funcName:"fdTemplate"+e}));var i=c.apply(void 0,o);return l[r]=i,i})(r)(t,e)}},{dup:65}],253:[function(t,e,r){"use strict";function i(t,e){var r=Math.floor(e),i=e-r,n=0<=r&&r<t.shape[0],o=0<=r+1&&r+1<t.shape[0];return(1-i)*(n?+t.get(r):0)+i*(o?+t.get(r+1):0)}function n(t,e,r){var i=Math.floor(e),n=e-i,o=0<=i&&i<t.shape[0],a=0<=i+1&&i+1<t.shape[0],s=Math.floor(r),u=r-s,l=0<=s&&s<t.shape[1],h=0<=s+1&&s+1<t.shape[1],f=o&&l?t.get(i,s):0,c=o&&h?t.get(i,s+1):0;return(1-u)*((1-n)*f+n*(a&&l?t.get(i+1,s):0))+u*((1-n)*c+n*(a&&h?t.get(i+1,s+1):0))}function o(t,e,r,i){var n=Math.floor(e),o=e-n,a=0<=n&&n<t.shape[0],s=0<=n+1&&n+1<t.shape[0],u=Math.floor(r),l=r-u,h=0<=u&&u<t.shape[1],f=0<=u+1&&u+1<t.shape[1],c=Math.floor(i),d=i-c,p=0<=c&&c<t.shape[2],v=0<=c+1&&c+1<t.shape[2],g=a&&h&&p?t.get(n,u,c):0,m=a&&f&&p?t.get(n,u+1,c):0,b=s&&h&&p?t.get(n+1,u,c):0,y=s&&f&&p?t.get(n+1,u+1,c):0,x=a&&h&&v?t.get(n,u,c+1):0,_=a&&f&&v?t.get(n,u+1,c+1):0;return(1-d)*((1-l)*((1-o)*g+o*b)+l*((1-o)*m+o*y))+d*((1-l)*((1-o)*x+o*(s&&h&&v?t.get(n+1,u,c+1):0))+l*((1-o)*_+o*(s&&f&&v?t.get(n+1,u+1,c+1):0)))}function a(t){var e,r,i=0|t.shape.length,n=Array(i),o=Array(i),a=Array(i),s=Array(i);for(e=0;e<i;++e)r=+arguments[e+1],n[e]=Math.floor(r),o[e]=r-n[e],a[e]=0<=n[e]&&n[e]<t.shape[e],s[e]=0<=n[e]+1&&n[e]+1<t.shape[e];var u,l,h,f=0;r:for(e=0;e<1<<i;++e){for(u=0,l=1,h=t.offset;u<i;++u)if(e&1<<u){if(!s[u])continue r;l*=o[u],h+=t.stride[u]*(n[u]+1)}else{if(!a[u])continue r;l*=1-o[u],h+=t.stride[u]*n[u]}f+=l*t.data[h]}return f}e.exports=function(t,e,r,s){switch(t.shape.length){case 0:return 0;case 1:return i(t,e);case 2:return n(t,e,r);case 3:return o(t,e,r,s);default:return a.apply(void 0,arguments)}},e.exports.d1=i,e.exports.d2=n,e.exports.d3=o},{}],254:[function(t,e,r){"use strict";var i={"float64,2,1,0":function(){return function(t,e,r,i,n){var o=t[0],a=t[1],s=t[2],u=r[0],l=r[1],h=r[2];i|=0;var f=0,c=0,d=0,p=l-s*h,v=u-a*l;for(d=0;d<o;++d){for(c=0;c<a;++c){for(f=0;f<s;++f)e[i]/=n,i+=h;i+=p}i+=v}}},"uint8,2,0,1,float64,2,1,0":function(){return function(t,e,r,i,n,o,a,s){for(var u=t[0],l=t[1],h=t[2],f=r[0],c=r[1],d=r[2],p=o[0],v=o[1],g=o[2],m=i|=0,b=a|=0,y=0|t[0];y>0;){y<64?(u=y,y=0):(u=64,y-=64);for(var x=0|t[1];x>0;){x<64?(l=x,x=0):(l=64,x-=64),i=m+y*f+x*c,a=b+y*p+x*v;var _=0,w=0,M=0,E=f-h*d,A=c-u*f,T=p-h*g,R=v-u*p;for(M=0;M<l;++M){for(w=0;w<u;++w){for(_=0;_<h;++_)e[i]=n[a]*s,i+=d,a+=g;i+=E,a+=T}i+=A,a+=R}}}}},"float32,1,0,float32,1,0":function(){return function(t,e,r,i,n,o,a){var s=t[0],u=t[1],l=r[0],h=r[1],f=o[0],c=o[1];i|=0,a|=0;var d=0,p=0,v=l-u*h,g=f-u*c;for(p=0;p<s;++p){for(d=0;d<u;++d)e[i]=n[a],i+=h,a+=c;i+=v,a+=g}}},"float32,1,0,float32,0,1":function(){return function(t,e,r,i,n,o,a){for(var s=t[0],u=t[1],l=r[0],h=r[1],f=o[0],c=o[1],d=i|=0,p=a|=0,v=0|t[1];v>0;){v<64?(u=v,v=0):(u=64,v-=64);for(var g=0|t[0];g>0;){g<64?(s=g,g=0):(s=64,g-=64),i=d+v*h+g*l,a=p+v*c+g*f;var m=0,b=0,y=l-u*h,x=f-u*c;for(b=0;b<s;++b){for(m=0;m<u;++m)e[i]=n[a],i+=h,a+=c;i+=y,a+=x}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(t,e,r,i,n,o,a){for(var s=t[0],u=t[1],l=t[2],h=r[0],f=r[1],c=r[2],d=o[0],p=o[1],v=o[2],g=i|=0,m=a|=0,b=0|t[2];b>0;){b<64?(l=b,b=0):(l=64,b-=64);for(var y=0|t[0];y>0;){y<64?(s=y,y=0):(s=64,y-=64);for(var x=0|t[1];x>0;){x<64?(u=x,x=0):(u=64,x-=64),i=g+b*c+y*h+x*f,a=m+b*v+y*d+x*p;var _=0,w=0,M=0,E=h-l*c,A=f-s*h,T=d-l*v,R=p-s*d;for(M=0;M<u;++M){for(w=0;w<s;++w){for(_=0;_<l;++_)e[i]=n[a],i+=c,a+=v;i+=E,a+=T}i+=A,a+=R}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(t,e,r,i,n,o,a){var s=t[0],u=t[1],l=t[2],h=r[0],f=r[1],c=r[2],d=o[0],p=o[1],v=o[2];i|=0,a|=0;var g=0,m=0,b=0,y=h-l*c,x=f-s*h,_=d-l*v,w=p-s*d;for(b=0;b<u;++b){for(m=0;m<s;++m){for(g=0;g<l;++g)e[i]=n[a],i+=c,a+=v;i+=y,a+=_}i+=x,a+=w}}}},n=function(t,e){return(0,i[e.join(",")])()},o={mul:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=n.dtype,h=n.order,f=[o,a.join(),s,u.join(),l,h.join()].join(),c=e[f];return c||(e[f]=c=t([o,a,s,u,l,h])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}},muls:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=[o,a.join(),s,u.join()].join(),h=e[l];return h||(e[l]=h=t([o,a,s,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n)}},mulseq:function(t){var e={};return function(r,i){var n=r.dtype,o=r.order,a=[n,o.join()].join(),s=e[a];return s||(e[a]=s=t([n,o])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,i)}},div:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=n.dtype,h=n.order,f=[o,a.join(),s,u.join(),l,h.join()].join(),c=e[f];return c||(e[f]=c=t([o,a,s,u,l,h])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n.data,n.stride,0|n.offset)}},divs:function(t){var e={};return function(r,i,n){var o=r.dtype,a=r.order,s=i.dtype,u=i.order,l=[o,a.join(),s,u.join()].join(),h=e[l];return h||(e[l]=h=t([o,a,s,u])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset,n)}},divseq:function(t){var e={};return function(r,i){var n=r.dtype,o=r.order,a=[n,o.join()].join(),s=e[a];return s||(e[a]=s=t([n,o])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,i)}},assign:function(t){var e={};return function(r,i){var n=r.dtype,o=r.order,a=i.dtype,s=i.order,u=[n,o.join(),a,s.join()].join(),l=e[u];return l||(e[u]=l=t([n,o,a,s])),l(r.shape.slice(0),r.data,r.stride,0|r.offset,i.data,i.stride,0|i.offset)}}};function a(t){var e;return(0,o[(e={funcName:t.funcName}).funcName])(n.bind(void 0,e))}var s={mul:"*",div:"/"};(function(){for(var t in s)r[t]=a({funcName:t}),r[t+"s"]=a({funcName:t+"s"}),r[t+"seq"]=a({funcName:t+"seq"})})(),r.assign=a({funcName:"assign"})},{}],255:[function(t,e,r){"use strict";var i=t("ndarray"),n=t("./doConvert.js");e.exports=function(t,e){for(var r=[],o=t,a=1;Array.isArray(o);)r.push(o.length),a*=o.length,o=o[0];return 0===r.length?i():(e||(e=i(new Float64Array(a),r)),n(e,t),e)}},{"./doConvert.js":256,ndarray:259}],256:[function(t,e,r){"use strict";var i,n;e.exports=(i=(function(){return function(t,e,r,i,n){var o=t[0],a=t[1],s=t[2],u=r[0],l=r[1],h=r[2],f=[0,0,0];i|=0;var c=0,d=0,p=0,v=l-s*h,g=u-a*l;for(p=0;p<o;++p){for(d=0;d<a;++d){for(c=0;c<s;++c){var m,b=n;for(m=0;m<f.length-1;++m)b=b[f[m]];e[i]=b[f[f.length-1]],i+=h,++f[2]}i+=v,f[2]-=s,++f[1]}i+=g,f[1]-=a,++f[0]}}}).bind(void 0,{funcName:"convert"}),n={},function(t,e){var r=t.dtype,o=t.order,a=[r,o.join()].join(),s=n[a];return s||(n[a]=s=i([r,o])),s(t.shape.slice(0),t.data,t.stride,0|t.offset,e)})},{}],257:[function(t,e,r){"use strict";var i=t("typedarray-pool");function n(t){return"uint32"===t?[i.mallocUint32,i.freeUint32]:null}var o={"uint32,1,0":function(t,e){return function(r,i,n,o,a,s,u,l,h,f,c){var d,p,v,g,m,b,y,x,_=r*a+o,w=t(l);for(d=r+1;d<=i;++d){for(p=d,_+=a,v=_,m=0,b=_,g=0;g<l;++g)w[m++]=n[b],b+=h;f:for(;p-- >r;){m=0,b=v-a;c:for(g=0;g<l;++g){if((y=n[b])<(x=w[m]))break f;if(y>x)break c;b+=f,m+=c}for(g=0,m=v,b=v-a;g<l;++g)n[m]=n[b],m+=h,b+=h;v-=a}for(g=0,m=v,b=0;g<l;++g)n[m]=w[b++],m+=h}e(w)}}},a={"uint32,1,0":function(t,e,r){return function i(n,o,a,s,u,l,h,f,c,d,p){var v,g,m,b,y,x,_,w,M,E,A,T,R,k,S,O,C,L,I,P,B,N,F,z,D,U=(o-n+1)/6|0,j=n+U,G=o-U,V=n+o>>1,H=V-U,W=V+U,X=j,Y=H,q=V,Z=W,K=G,Q=n+1,J=o-1,$=!0,tt=0,te=0,tr=0,ti=e(f),tn=e(f);A=u*X,T=u*Y,D=s;d:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=X,X=Y,Y=g;break d}if(tr<0)break d;D+=d}A=u*Z,T=u*K,D=s;p:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=Z,Z=K,K=g;break p}if(tr<0)break p;D+=d}A=u*X,T=u*q,D=s;v:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=X,X=q,q=g;break v}if(tr<0)break v;D+=d}A=u*Y,T=u*q,D=s;g:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=Y,Y=q,q=g;break g}if(tr<0)break g;D+=d}A=u*X,T=u*Z,D=s;m:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=X,X=Z,Z=g;break m}if(tr<0)break m;D+=d}A=u*q,T=u*Z,D=s;b:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=q,q=Z,Z=g;break b}if(tr<0)break b;D+=d}A=u*Y,T=u*K,D=s;y:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=Y,Y=K,K=g;break y}if(tr<0)break y;D+=d}A=u*Y,T=u*q,D=s;x:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=Y,Y=q,q=g;break x}if(tr<0)break x;D+=d}A=u*Z,T=u*K,D=s;_:for(E=0;E<f;++E){if(_=A+D,w=T+D,(tr=a[_]-a[w])>0){g=Z,Z=K,K=g;break _}if(tr<0)break _;D+=d}for(E=0,A=u*X,T=u*Y,R=u*q,k=u*Z,S=u*K,O=u*j,C=u*V,L=u*G,z=0,D=s;E<f;++E)_=A+D,w=T+D,M=R+D,I=k+D,P=S+D,B=O+D,N=C+D,F=L+D,ti[z]=a[w],tn[z]=a[I],$=$&&ti[z]===tn[z],m=a[_],b=a[M],y=a[P],a[B]=m,a[N]=b,a[F]=y,++z,D+=c;for(E=0,A=u*H,T=u*n,D=s;E<f;++E)_=A+D,w=T+D,a[_]=a[w],D+=c;for(E=0,A=u*W,T=u*o,D=s;E<f;++E)_=A+D,w=T+D,a[_]=a[w],D+=c;if($)for(x=Q;x<=J;++x){_=s+x*u,z=0;w:for(E=0;E<f;++E){if(0!=(tr=a[_]-ti[z]))break w;z+=p,_+=d}if(0!==tr){if(tr<0){if(x!==Q)for(E=0,A=u*x,T=u*Q,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;++Q}else for(;;){_=s+J*u,z=0;M:for(E=0;E<f;++E){if(0!=(tr=a[_]-ti[z]))break M;z+=p,_+=d}if(tr>0)J--;else if(tr<0){for(E=0,A=u*x,T=u*Q,R=u*J,D=s;E<f;++E)_=A+D,w=T+D,M=R+D,v=a[_],a[_]=a[w],a[w]=a[M],a[M]=v,D+=c;++Q,--J;break}else{for(E=0,A=u*x,T=u*J,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;--J;break}}}}else for(x=Q;x<=J;++x){_=s+x*u,z=0;E:for(E=0;E<f;++E){if(0!=(tt=a[_]-ti[z]))break E;z+=p,_+=d}if(tt<0){if(x!==Q)for(E=0,A=u*x,T=u*Q,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;++Q}else{_=s+x*u,z=0;A:for(E=0;E<f;++E){if(0!=(te=a[_]-tn[z]))break A;z+=p,_+=d}if(te>0)for(;;){_=s+J*u,z=0;T:for(E=0;E<f;++E){if(0!=(tr=a[_]-tn[z]))break T;z+=p,_+=d}if(tr>0){if(--J<x)break;continue}_=s+J*u,z=0;R:for(E=0;E<f;++E){if(0!=(tr=a[_]-ti[z]))break R;z+=p,_+=d}if(tr<0){for(E=0,A=u*x,T=u*Q,R=u*J,D=s;E<f;++E)_=A+D,w=T+D,M=R+D,v=a[_],a[_]=a[w],a[w]=a[M],a[M]=v,D+=c;++Q,--J}else{for(E=0,A=u*x,T=u*J,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;--J}break}}}for(E=0,A=u*n,T=u*(Q-1),z=0,D=s;E<f;++E)_=A+D,w=T+D,a[_]=a[w],a[w]=ti[z],++z,D+=c;for(E=0,A=u*o,T=u*(J+1),z=0,D=s;E<f;++E)_=A+D,w=T+D,a[_]=a[w],a[w]=tn[z],++z,D+=c;if(Q-2-n<=32?t(n,Q-2,a,s,u,l,h,f,c,d,p):i(n,Q-2,a,s,u,l,h,f,c,d,p),o-(J+2)<=32?t(J+2,o,a,s,u,l,h,f,c,d,p):i(J+2,o,a,s,u,l,h,f,c,d,p),$){r(ti),r(tn);return}if(Q<j&&J>G){k:for(;;){for(E=0,_=s+Q*u,z=0,D=s;E<f;++E){if(a[_]!==ti[z])break k;++z,_+=c}++Q}S:for(;;){for(E=0,_=s+J*u,z=0,D=s;E<f;++E){if(a[_]!==tn[z])break S;++z,_+=c}--J}for(x=Q;x<=J;++x){_=s+x*u,z=0;O:for(E=0;E<f;++E){if(0!=(tt=a[_]-ti[z]))break O;z+=p,_+=d}if(0===tt){if(x!==Q)for(E=0,A=u*x,T=u*Q,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;++Q}else{_=s+x*u,z=0;C:for(E=0;E<f;++E){if(0!=(te=a[_]-tn[z]))break C;z+=p,_+=d}if(0===te)for(;;){_=s+J*u,z=0;L:for(E=0;E<f;++E){if(0!=(tr=a[_]-tn[z]))break L;z+=p,_+=d}if(0===tr){if(--J<x)break;continue}_=s+J*u,z=0;I:for(E=0;E<f;++E){if(0!=(tr=a[_]-ti[z]))break I;z+=p,_+=d}if(tr<0){for(E=0,A=u*x,T=u*Q,R=u*J,D=s;E<f;++E)_=A+D,w=T+D,M=R+D,v=a[_],a[_]=a[w],a[w]=a[M],a[M]=v,D+=c;++Q,--J}else{for(E=0,A=u*x,T=u*J,D=s;E<f;++E)_=A+D,w=T+D,v=a[_],a[_]=a[w],a[w]=v,D+=c;--J}break}}}}r(ti),r(tn),J-Q<=32?t(Q,J,a,s,u,l,h,f,c,d,p):i(Q,J,a,s,u,l,h,f,c,d,p)}}},s={"uint32,1,0":function(t,e){return function(r){var i=r.data,n=0|r.offset,o=r.shape,a=r.stride,s=0|a[0],u=0|o[0],l=0|a[1],h=0|o[1];u<=32?t(0,u-1,i,n,s,l,u,h,l,l,1):e(0,u-1,i,n,s,l,u,h,l,l,1)}}};e.exports=function(t,e){var r,i,u,l,h=s[[e,t].join(",")],f=(r=n(e),i=o[[e,t].join(",")],r?i(r[0],r[1]):i()),c=(u=n(e),l=a[[e,t].join(",")],t.length>1&&u?l(f,u[0],u[1]):l(f));return h(f,c)}},{"typedarray-pool":308}],258:[function(t,e,r){"use strict";var i=t("./lib/compile_sort.js"),n={};e.exports=function(t){var e=t.order,r=t.dtype,o=[e,r].join(":"),a=n[o];return a||(n[o]=a=i(e,r)),a(t),t}},{"./lib/compile_sort.js":257}],259:[function(t,e,r){var i=t("is-buffer"),n="undefined"!=typeof Float64Array;function o(t,e){return t[0]-e[0]}function a(){var t,e=this.stride,r=Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(o);var i=Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}var s={T:function(t){function e(t){this.data=t}var r=e.prototype;return r.dtype=t,r.index=function(){return -1},r.size=0,r.dimension=-1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new e(this.data)},r.get=r.set=function(){},r.pick=function(){return null},function(t){return new e(t)}},0:function(t,e){function r(t,e){this.data=t,this.offset=e}var i=r.prototype;return i.dtype=t,i.index=function(){return this.offset},i.dimension=0,i.size=1,i.shape=i.stride=i.order=[],i.lo=i.hi=i.transpose=i.step=function(){return new r(this.data,this.offset)},i.pick=function(){return e(this.data)},i.valueOf=i.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},i.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(t,e,i,n){return new r(t,n)}},1:function(t,e,r){function i(t,e,r,i){this.data=t,this.shape=[e],this.stride=[r],this.offset=0|i}var n=i.prototype;return n.dtype=t,n.dimension=1,Object.defineProperty(n,"size",{get:function(){return this.shape[0]}}),n.order=[0],n.set=function(e,r){return"generic"===t?this.data.set(this.offset+this.stride[0]*e,r):this.data[this.offset+this.stride[0]*e]=r},n.get=function(e){return"generic"===t?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},n.index=function(t){return this.offset+this.stride[0]*t},n.hi=function(t){return new i(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,this.stride[0],this.offset)},n.lo=function(t){var e=this.offset,r=0,n=this.shape[0],o=this.stride[0];return"number"==typeof t&&t>=0&&(e+=o*(r=0|t),n-=r),new i(this.data,n,o,e)},n.step=function(t){var e=this.shape[0],r=this.stride[0],n=this.offset,o=0,a=Math.ceil;return"number"==typeof t&&((o=0|t)<0?(n+=r*(e-1),e=a(-e/o)):e=a(e/o),r*=o),new i(this.data,e,r,n)},n.transpose=function(t){t=void 0===t?0:0|t;var e=this.shape,r=this.stride;return new i(this.data,e[t],r[t],this.offset)},n.pick=function(t){var r=[],i=[],n=this.offset;return"number"==typeof t&&t>=0?n=n+this.stride[0]*t|0:(r.push(this.shape[0]),i.push(this.stride[0])),(0,e[r.length+1])(this.data,r,i,n)},function(t,e,r,n){return new i(t,e[0],r[0],n)}},2:function(t,e,r){function i(t,e,r,i,n,o){this.data=t,this.shape=[e,r],this.stride=[i,n],this.offset=0|o}var n=i.prototype;return n.dtype=t,n.dimension=2,Object.defineProperty(n,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(n,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),n.set=function(e,r,i){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r,i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]=i},n.get=function(e,r){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]},n.index=function(t,e){return this.offset+this.stride[0]*t+this.stride[1]*e},n.hi=function(t,e){return new i(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,this.stride[0],this.stride[1],this.offset)},n.lo=function(t,e){var r=this.offset,n=0,o=this.shape[0],a=this.shape[1],s=this.stride[0],u=this.stride[1];return"number"==typeof t&&t>=0&&(r+=s*(n=0|t),o-=n),"number"==typeof e&&e>=0&&(r+=u*(n=0|e),a-=n),new i(this.data,o,a,s,u,r)},n.step=function(t,e){var r=this.shape[0],n=this.shape[1],o=this.stride[0],a=this.stride[1],s=this.offset,u=0,l=Math.ceil;return"number"==typeof t&&((u=0|t)<0?(s+=o*(r-1),r=l(-r/u)):r=l(r/u),o*=u),"number"==typeof e&&((u=0|e)<0?(s+=a*(n-1),n=l(-n/u)):n=l(n/u),a*=u),new i(this.data,r,n,o,a,s)},n.transpose=function(t,e){t=void 0===t?0:0|t,e=void 0===e?1:0|e;var r=this.shape,n=this.stride;return new i(this.data,r[t],r[e],n[t],n[e],this.offset)},n.pick=function(t,r){var i=[],n=[],o=this.offset;return"number"==typeof t&&t>=0?o=o+this.stride[0]*t|0:(i.push(this.shape[0]),n.push(this.stride[0])),"number"==typeof r&&r>=0?o=o+this.stride[1]*r|0:(i.push(this.shape[1]),n.push(this.stride[1])),(0,e[i.length+1])(this.data,i,n,o)},function(t,e,r,n){return new i(t,e[0],e[1],r[0],r[1],n)}},3:function(t,e,r){function i(t,e,r,i,n,o,a,s){this.data=t,this.shape=[e,r,i],this.stride=[n,o,a],this.offset=0|s}var n=i.prototype;return n.dtype=t,n.dimension=3,Object.defineProperty(n,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(n,"order",{get:function(){var t=Math.abs(this.stride[0]),e=Math.abs(this.stride[1]),r=Math.abs(this.stride[2]);return t>e?e>r?[2,1,0]:t>r?[1,2,0]:[1,0,2]:t>r?[2,0,1]:r>e?[0,1,2]:[0,2,1]}}),n.set=function(e,r,i,n){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i,n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i]=n},n.get=function(e,r,i){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i]},n.index=function(t,e,r){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r},n.hi=function(t,e,r){return new i(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,this.stride[0],this.stride[1],this.stride[2],this.offset)},n.lo=function(t,e,r){var n=this.offset,o=0,a=this.shape[0],s=this.shape[1],u=this.shape[2],l=this.stride[0],h=this.stride[1],f=this.stride[2];return"number"==typeof t&&t>=0&&(n+=l*(o=0|t),a-=o),"number"==typeof e&&e>=0&&(n+=h*(o=0|e),s-=o),"number"==typeof r&&r>=0&&(n+=f*(o=0|r),u-=o),new i(this.data,a,s,u,l,h,f,n)},n.step=function(t,e,r){var n=this.shape[0],o=this.shape[1],a=this.shape[2],s=this.stride[0],u=this.stride[1],l=this.stride[2],h=this.offset,f=0,c=Math.ceil;return"number"==typeof t&&((f=0|t)<0?(h+=s*(n-1),n=c(-n/f)):n=c(n/f),s*=f),"number"==typeof e&&((f=0|e)<0?(h+=u*(o-1),o=c(-o/f)):o=c(o/f),u*=f),"number"==typeof r&&((f=0|r)<0?(h+=l*(a-1),a=c(-a/f)):a=c(a/f),l*=f),new i(this.data,n,o,a,s,u,l,h)},n.transpose=function(t,e,r){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r;var n=this.shape,o=this.stride;return new i(this.data,n[t],n[e],n[r],o[t],o[e],o[r],this.offset)},n.pick=function(t,r,i){var n=[],o=[],a=this.offset;return"number"==typeof t&&t>=0?a=a+this.stride[0]*t|0:(n.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof r&&r>=0?a=a+this.stride[1]*r|0:(n.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof i&&i>=0?a=a+this.stride[2]*i|0:(n.push(this.shape[2]),o.push(this.stride[2])),(0,e[n.length+1])(this.data,n,o,a)},function(t,e,r,n){return new i(t,e[0],e[1],e[2],r[0],r[1],r[2],n)}},4:function(t,e,r){function i(t,e,r,i,n,o,a,s,u,l){this.data=t,this.shape=[e,r,i,n],this.stride=[o,a,s,u],this.offset=0|l}var n=i.prototype;return n.dtype=t,n.dimension=4,Object.defineProperty(n,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(n,"order",{get:r}),n.set=function(e,r,i,n,o){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n,o):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n]=o},n.get=function(e,r,i,n){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n]},n.index=function(t,e,r,i){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*i},n.hi=function(t,e,r,n){return new i(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof n||n<0?this.shape[3]:0|n,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},n.lo=function(t,e,r,n){var o=this.offset,a=0,s=this.shape[0],u=this.shape[1],l=this.shape[2],h=this.shape[3],f=this.stride[0],c=this.stride[1],d=this.stride[2],p=this.stride[3];return"number"==typeof t&&t>=0&&(o+=f*(a=0|t),s-=a),"number"==typeof e&&e>=0&&(o+=c*(a=0|e),u-=a),"number"==typeof r&&r>=0&&(o+=d*(a=0|r),l-=a),"number"==typeof n&&n>=0&&(o+=p*(a=0|n),h-=a),new i(this.data,s,u,l,h,f,c,d,p,o)},n.step=function(t,e,r,n){var o=this.shape[0],a=this.shape[1],s=this.shape[2],u=this.shape[3],l=this.stride[0],h=this.stride[1],f=this.stride[2],c=this.stride[3],d=this.offset,p=0,v=Math.ceil;return"number"==typeof t&&((p=0|t)<0?(d+=l*(o-1),o=v(-o/p)):o=v(o/p),l*=p),"number"==typeof e&&((p=0|e)<0?(d+=h*(a-1),a=v(-a/p)):a=v(a/p),h*=p),"number"==typeof r&&((p=0|r)<0?(d+=f*(s-1),s=v(-s/p)):s=v(s/p),f*=p),"number"==typeof n&&((p=0|n)<0?(d+=c*(u-1),u=v(-u/p)):u=v(u/p),c*=p),new i(this.data,o,a,s,u,l,h,f,c,d)},n.transpose=function(t,e,r,n){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,n=void 0===n?3:0|n;var o=this.shape,a=this.stride;return new i(this.data,o[t],o[e],o[r],o[n],a[t],a[e],a[r],a[n],this.offset)},n.pick=function(t,r,i,n){var o=[],a=[],s=this.offset;return"number"==typeof t&&t>=0?s=s+this.stride[0]*t|0:(o.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof r&&r>=0?s=s+this.stride[1]*r|0:(o.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof i&&i>=0?s=s+this.stride[2]*i|0:(o.push(this.shape[2]),a.push(this.stride[2])),"number"==typeof n&&n>=0?s=s+this.stride[3]*n|0:(o.push(this.shape[3]),a.push(this.stride[3])),(0,e[o.length+1])(this.data,o,a,s)},function(t,e,r,n){return new i(t,e[0],e[1],e[2],e[3],r[0],r[1],r[2],r[3],n)}},5:function(t,e,r){function i(t,e,r,i,n,o,a,s,u,l,h,f){this.data=t,this.shape=[e,r,i,n,o],this.stride=[a,s,u,l,h],this.offset=0|f}var n=i.prototype;return n.dtype=t,n.dimension=5,Object.defineProperty(n,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(n,"order",{get:r}),n.set=function(e,r,i,n,o,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n+this.stride[4]*o,a):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n+this.stride[4]*o]=a},n.get=function(e,r,i,n,o){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n+this.stride[4]*o):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*i+this.stride[3]*n+this.stride[4]*o]},n.index=function(t,e,r,i,n){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*i+this.stride[4]*n},n.hi=function(t,e,r,n,o){return new i(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof n||n<0?this.shape[3]:0|n,"number"!=typeof o||o<0?this.shape[4]:0|o,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},n.lo=function(t,e,r,n,o){var a=this.offset,s=0,u=this.shape[0],l=this.shape[1],h=this.shape[2],f=this.shape[3],c=this.shape[4],d=this.stride[0],p=this.stride[1],v=this.stride[2],g=this.stride[3],m=this.stride[4];return"number"==typeof t&&t>=0&&(a+=d*(s=0|t),u-=s),"number"==typeof e&&e>=0&&(a+=p*(s=0|e),l-=s),"number"==typeof r&&r>=0&&(a+=v*(s=0|r),h-=s),"number"==typeof n&&n>=0&&(a+=g*(s=0|n),f-=s),"number"==typeof o&&o>=0&&(a+=m*(s=0|o),c-=s),new i(this.data,u,l,h,f,c,d,p,v,g,m,a)},n.step=function(t,e,r,n,o){var a=this.shape[0],s=this.shape[1],u=this.shape[2],l=this.shape[3],h=this.shape[4],f=this.stride[0],c=this.stride[1],d=this.stride[2],p=this.stride[3],v=this.stride[4],g=this.offset,m=0,b=Math.ceil;return"number"==typeof t&&((m=0|t)<0?(g+=f*(a-1),a=b(-a/m)):a=b(a/m),f*=m),"number"==typeof e&&((m=0|e)<0?(g+=c*(s-1),s=b(-s/m)):s=b(s/m),c*=m),"number"==typeof r&&((m=0|r)<0?(g+=d*(u-1),u=b(-u/m)):u=b(u/m),d*=m),"number"==typeof n&&((m=0|n)<0?(g+=p*(l-1),l=b(-l/m)):l=b(l/m),p*=m),"number"==typeof o&&((m=0|o)<0?(g+=v*(h-1),h=b(-h/m)):h=b(h/m),v*=m),new i(this.data,a,s,u,l,h,f,c,d,p,v,g)},n.transpose=function(t,e,r,n,o){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,n=void 0===n?3:0|n,o=void 0===o?4:0|o;var a=this.shape,s=this.stride;return new i(this.data,a[t],a[e],a[r],a[n],a[o],s[t],s[e],s[r],s[n],s[o],this.offset)},n.pick=function(t,r,i,n,o){var a=[],s=[],u=this.offset;return"number"==typeof t&&t>=0?u=u+this.stride[0]*t|0:(a.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof r&&r>=0?u=u+this.stride[1]*r|0:(a.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof i&&i>=0?u=u+this.stride[2]*i|0:(a.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof n&&n>=0?u=u+this.stride[3]*n|0:(a.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof o&&o>=0?u=u+this.stride[4]*o|0:(a.push(this.shape[4]),s.push(this.stride[4])),(0,e[a.length+1])(this.data,a,s,u)},function(t,e,r,n){return new i(t,e[0],e[1],e[2],e[3],e[4],r[0],r[1],r[2],r[3],r[4],n)}}},u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};e.exports=function(t,e,r,o){if(void 0===t){var l=u.array[0];return l([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var h=e.length;if(void 0===r){r=Array(h);for(var f=h-1,c=1;f>=0;--f)r[f]=c,c*=e[f]}if(void 0===o){o=0;for(var f=0;f<h;++f)r[f]<0&&(o-=(e[f]-1)*r[f])}for(var d=function(t){if(i(t))return"buffer";if(n)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),p=u[d];p.length<=h+1;)p.push(function(t,e){var r=s[-1===e?"T":String(e)];return -1===e?r(t):0===e?r(t,u[t][0]):r(t,u[t],a)}(d,p.length-1));var l=p[h+1];return l(t,e,r,o)}},{"is-buffer":237}],260:[function(t,e,r){"use strict";var i=t("double-bits");e.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var r=i.hi(t),n=i.lo(t);return e>t==t>0?4294967295===n?(r+=1,n=0):n+=1:0===n?(n=4294967295,r-=1):n-=1,i.pack(n,r)}},{"double-bits":64}],261:[function(t,e,r){r.vertexNormals=function(t,e,r){for(var i=e.length,n=Array(i),o=void 0===r?1e-6:r,a=0;a<i;++a)n[a]=[0,0,0];for(var a=0;a<t.length;++a)for(var s=t[a],u=0,l=s[s.length-1],h=s[0],f=0;f<s.length;++f){u=l,l=h,h=s[(f+1)%s.length];for(var c=e[u],d=e[l],p=e[h],v=[,,,],g=0,m=[,,,],b=0,y=0;y<3;++y)v[y]=c[y]-d[y],g+=v[y]*v[y],m[y]=p[y]-d[y],b+=m[y]*m[y];if(g*b>o)for(var x=n[l],_=1/Math.sqrt(g*b),y=0;y<3;++y){var w=(y+1)%3,M=(y+2)%3;x[y]+=_*(m[w]*v[M]-m[M]*v[w])}}for(var a=0;a<i;++a){for(var x=n[a],E=0,y=0;y<3;++y)E+=x[y]*x[y];if(E>o)for(var _=1/Math.sqrt(E),y=0;y<3;++y)x[y]*=_;else for(var y=0;y<3;++y)x[y]=0}return n},r.faceNormals=function(t,e,r){for(var i=t.length,n=Array(i),o=void 0===r?1e-6:r,a=0;a<i;++a){for(var s=t[a],u=[,,,],l=0;l<3;++l)u[l]=e[s[l]];for(var h=[,,,],f=[,,,],l=0;l<3;++l)h[l]=u[1][l]-u[0][l],f[l]=u[2][l]-u[0][l];for(var c=[,,,],d=0,l=0;l<3;++l){var p=(l+1)%3,v=(l+2)%3;c[l]=h[p]*f[v]-h[v]*f[p],d+=c[l]*c[l]}d=d>o?1/Math.sqrt(d):0;for(var l=0;l<3;++l)c[l]*=d;n[a]=c}return n}},{}],262:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n,o,a,s,u,l){var h=e+o+l;if(f>0){var f=Math.sqrt(h+1);t[0]=.5*(a-u)/f,t[1]=.5*(s-i)/f,t[2]=.5*(r-o)/f,t[3]=.5*f}else{var c=Math.max(e,o,l),f=Math.sqrt(2*c-h+1);e>=c?(t[0]=.5*f,t[1]=.5*(n+r)/f,t[2]=.5*(s+i)/f,t[3]=.5*(a-u)/f):o>=c?(t[0]=.5*(r+n)/f,t[1]=.5*f,t[2]=.5*(u+a)/f,t[3]=.5*(s-i)/f):(t[0]=.5*(i+s)/f,t[1]=.5*(a+u)/f,t[2]=.5*f,t[3]=.5*(r-n)/f)}return t}},{}],263:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],i=t.radius||1;e=[].slice.call(e,0,3),h(r=[].slice.call(r,0,4),r);var n=new f(r,e,Math.log(i));return n.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&n.lookAt(0,t.eye,t.center,t.up),n};var i=t("filtered-vector"),n=t("gl-mat4/lookAt"),o=t("gl-mat4/fromQuat"),a=t("gl-mat4/invert"),s=t("./lib/quatFromFrame");function u(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function l(t,e,r,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(i,2))}function h(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=l(r,i,n,o);a>1e-6?(t[0]=r/a,t[1]=i/a,t[2]=n/a,t[3]=o/a):(t[0]=t[1]=t[2]=0,t[3]=1)}function f(t,e,r){this.radius=i([r]),this.center=i(e),this.rotation=i(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=f.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;h(e,e);var r=this.computedMatrix;o(r,e);var i=this.computedCenter,n=this.computedEye,a=this.computedUp,s=Math.exp(this.computedRadius[0]);n[0]=i[0]+s*r[2],n[1]=i[1]+s*r[6],n[2]=i[2]+s*r[10],a[0]=r[1],a[1]=r[5],a[2]=r[9];for(var u=0;u<3;++u){for(var l=0,f=0;f<3;++f)l+=r[u+4*f]*n[f];r[12+u]=-l}},c.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var i=0;i<16;++i)e[i]=r[i];return e}return r},c.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},c.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},c.pan=function(t,e,r,i){e=e||0,r=r||0,i=i||0,this.recalcMatrix(t);var n=this.computedMatrix,o=n[1],a=n[5],s=n[9],l=u(o,a,s);o/=l,a/=l,s/=l;var h=n[0],f=n[4],c=n[8],d=h*o+f*a+c*s,p=u(h-=o*d,f-=a*d,c-=s*d);h/=p,f/=p,c/=p;var v=n[2],g=n[6],m=n[10],b=v*o+g*a+m*s,y=v*h+g*f+m*c,x=u(v-=b*o+y*h,g-=b*a+y*f,m-=b*s+y*c);v/=x,g/=x,m/=x;var _=h*e+o*r,w=f*e+a*r,M=c*e+s*r;this.center.move(t,_,w,M);var E=Math.exp(this.computedRadius[0]);E=Math.max(1e-4,E+i),this.radius.set(t,Math.log(E))},c.rotate=function(t,e,r,i){this.recalcMatrix(t),e=e||0,r=r||0;var n=this.computedMatrix,o=n[0],a=n[4],s=n[8],h=n[1],f=n[5],c=n[9],d=n[2],p=n[6],v=n[10],g=e*o+r*h,m=e*a+r*f,b=e*s+r*c,y=-(p*b-v*m),x=-(v*g-d*b),_=-(d*m-p*g),w=Math.sqrt(Math.max(0,1-Math.pow(y,2)-Math.pow(x,2)-Math.pow(_,2))),M=l(y,x,_,w);M>1e-6?(y/=M,x/=M,_/=M,w/=M):(y=x=_=0,w=1);var E=this.computedRotation,A=E[0],T=E[1],R=E[2],k=E[3],S=A*w+k*y+T*_-R*x,O=T*w+k*x+R*y-A*_,C=R*w+k*_+A*x-T*y,L=k*w-A*y-T*x-R*_;if(i){var I=Math.sin(i)/u(y=d,x=p,_=v);y*=I,x*=I,_*=I,S=S*(w=Math.cos(e))+L*y+O*_-C*x,O=O*w+L*x+C*y-S*_,C=C*w+L*_+S*x-O*y,L=L*w-S*y-O*x-C*_}var P=l(S,O,C,L);P>1e-6?(S/=P,O/=P,C/=P,L/=P):(S=O=C=0,L=1),this.rotation.set(t,S,O,C,L)},c.lookAt=function(t,e,r,i){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,i=i||this.computedUp;var o=this.computedMatrix;n(o,e,r,i);var a=this.computedRotation;s(a,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),h(a,a),this.rotation.set(t,a[0],a[1],a[2],a[3]);for(var u=0,l=0;l<3;++l)u+=Math.pow(r[l]-e[l],2);this.radius.set(t,.5*Math.log(Math.max(u,1e-6))),this.center.set(t,r[0],r[1],r[2])},c.translate=function(t,e,r,i){this.center.move(t,e||0,r||0,i||0)},c.setMatrix=function(t,e){var r=this.computedRotation;s(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),h(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=this.computedMatrix;a(i,e);var n=i[15];if(Math.abs(n)>1e-6){var o=i[12]/n,u=i[13]/n,l=i[14]/n;this.recalcMatrix(t);var f=Math.exp(this.computedRadius[0]);this.center.set(t,o-i[2]*f,u-i[6]*f,l-i[10]*f),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},c.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},c.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=Math.max(e=e>0?Math.log(e):1/0,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},c.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var i=t.rotation;i&&this.rotation.set(e,i[0],i[1],i[2],i[3]);var n=t.distance;n&&n>0&&this.radius.set(e,Math.log(n)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(t,e,r){/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */"use strict";var i=t("repeat-string");e.exports=function(t,e,r){return i(r=void 0!==r?r+"":" ",e)+t}},{"repeat-string":277}],265:[function(t,e,r){e.exports=function(t,e){e||(e=[0,""]);var r=parseFloat(t=String(t),10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],266:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=0|e.length,n=t.length,o=[Array(r),Array(r)],a=0;a<r;++a)o[0][a]=[],o[1][a]=[];for(var a=0;a<n;++a){var s=t[a];o[0][s[0]].push(s),o[1][s[1]].push(s)}for(var u=[],a=0;a<r;++a)o[0][a].length+o[1][a].length===0&&u.push([a]);function l(t,e){var r=o[e][t[e]];r.splice(r.indexOf(t),1)}function h(t,r,n){for(var a,s,u,h=0;h<2;++h)if(o[h][r].length>0){a=o[h][r][0],u=h;break}s=a[1^u];for(var f=0;f<2;++f)for(var c=o[f][r],d=0;d<c.length;++d){var p=c[d],v=p[1^f];i(e[t],e[r],e[s],e[v])>0&&(a=p,s=v,u=f)}return n||a&&l(a,u),s}for(var a=0;a<r;++a)for(var f=0;f<2;++f){for(var c=[];o[f][a].length>0;){o[0][a].length;var d=function(t,r){var n=o[r][t][0],a=[t];l(n,r);for(var s=n[1^r];;){for(;s!==t;)a.push(s),s=h(a[a.length-2],s,!1);if(o[0][t].length+o[1][t].length===0)break;var u=a[a.length-1],f=a[1],c=h(u,t,!0);if(0>i(e[u],e[t],e[f],e[c]))break;a.push(t),s=h(u,t)}return a}(a,f);d[1]===d[d.length-1]?c.push.apply(c,d):(c.length>0&&u.push(c),c=d)}c.length>0&&u.push(c)}return u};var i=t("compare-angle")},{"compare-angle":54}],267:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=i(t,e.length),n=Array(e.length),o=Array(e.length),a=[],s=0;s<e.length;++s){var u=r[s].length;o[s]=u,n[s]=!0,u<=1&&a.push(s)}for(;a.length>0;){var l=a.pop();n[l]=!1;for(var h=r[l],s=0;s<h.length;++s){var f=h[s];0==--o[f]&&a.push(f)}}for(var c=Array(e.length),d=[],s=0;s<e.length;++s)if(n[s]){var l=d.length;c[s]=l,d.push(e[s])}else c[s]=-1;for(var p=[],s=0;s<t.length;++s){var v=t[s];n[v[0]]&&n[v[1]]&&p.push([c[v[0]],c[v[1]]])}return[p,d]};var i=t("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(t,e,r){"use strict";e.exports=function(t,e){var r=l(t,e);t=r[0];var f=(e=r[1]).length;t.length;for(var c=i(t,e.length),d=0;d<f;++d)if(c[d].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");for(var p=n(t,e),v=(p=p.filter(function(t){for(var r=t.length,i=[0],n=0;n<r;++n){var o=e[t[n]],u=e[t[(n+1)%r]],l=a(-o[0],o[1]),h=a(-o[0],u[1]),f=a(u[0],o[1]),c=a(u[0],u[1]);i=s(i,s(s(l,h),s(f,c)))}return i[i.length-1]>0})).length,g=Array(v),m=Array(v),d=0;d<v;++d){g[d]=d;var b=Array(v),y=o([p[d].map(function(t){return e[t]})]),x=0;P:for(var _=0;_<v;++_)if(b[_]=0,d!==_){for(var w=p[_],M=w.length,E=0;E<M;++E){var A=y(e[w[E]]);if(0!==A){A<0&&(b[_]=1,x+=1);continue P}}b[_]=1,x+=1}m[d]=[x,d,b]}m.sort(function(t,e){return e[0]-t[0]});for(var d=0;d<v;++d)for(var b=m[d],T=b[1],R=b[2],_=0;_<v;++_)R[_]&&(g[_]=T);for(var k=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=[];return e}(v),d=0;d<v;++d)k[d].push(g[d]),k[g[d]].push(d);for(var S={},O=h(f,!1),d=0;d<v;++d)for(var w=p[d],M=w.length,_=0;_<M;++_){var C=w[_],L=w[(_+1)%M],I=Math.min(C,L)+":"+Math.max(C,L);if(I in S){var P=S[I];k[P].push(d),k[d].push(P),O[C]=O[L]=!0}else S[I]=d}function B(t){for(var e=t.length,r=0;r<e;++r)if(!O[t[r]])return!1;return!0}for(var N=[],F=h(v,-1),d=0;d<v;++d)g[d]!==d||B(p[d])?F[d]=-1:(N.push(d),F[d]=0);for(var r=[];N.length>0;){var z,D=N.pop(),U=k[D];u(U,function(t,e){return t-e});var j=U.length,G=F[D];if(0===G){var w=p[D];z=[w]}for(var d=0;d<j;++d){var V=U[d];if(!(F[V]>=0)&&(F[V]=1^G,N.push(V),0===G)){var w=p[V];B(w)||(w.reverse(),z.push(w))}}0===G&&r.push(z)}return r};var i=t("edges-to-adjacency-list"),n=t("planar-dual"),o=t("point-in-big-polygon"),a=t("two-product"),s=t("robust-sum"),u=t("uniq"),l=t("./lib/trim-leaves");function h(t,e){for(var r=Array(t),i=0;i<t;++i)r[i]=e;return r}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(t,e,r){e.exports=function(t){for(var e,r,o,s,h=t.length,f=[],c=[],d=0;d<h;++d)for(var p=t[d],v=p.length,g=v-1,m=0;m<v;g=m++){var b=p[g],y=p[m];b[0]===y[0]?c.push([b,y]):f.push([b,y])}if(0===f.length)return 0===c.length?l:(e=u(c),function(t){return e(t[0],t[1])?0:1});var x=n(f),_=(r=x.slabs,o=x.coordinates,function(t){var e=a.le(o,t[0]);if(e<0)return 1;var n=r[e];if(!n){if(!(e>0)||o[e]!==t[0])return 1;n=r[e-1]}for(var s=1;n;){var u=n.key,l=i(t,u[0],u[1]);if(u[0][0]<u[1][0]){if(l<0)n=n.left;else{if(!(l>0))return 0;s=-1,n=n.right}}else if(l>0)n=n.left;else{if(!(l<0))return 0;s=1,n=n.right}}return s});return 0===c.length?_:(s=u(c),function(t){return s(t[0],t[1])?0:_(t)})};var i=t("robust-orientation")[3],n=t("slab-decomposition"),o=t("interval-tree-1d"),a=t("binary-search-bounds");function s(){return!0}function u(t){for(var e={},r=0;r<t.length;++r){var i=t[r],n=i[0][0],a=i[0][1],u=i[1][1],l=[Math.min(a,u),Math.max(a,u)];n in e?e[n].push(l):e[n]=[l]}for(var h={},f=Object.keys(e),r=0;r<f.length;++r){var c=e[f[r]];h[f[r]]=o(c)}return function(t,e){var r=h[t];return!!r&&!!r.queryPoint(e,s)}}function l(t){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(t,e,r){"use strict";var i=new Float64Array(4),n=new Float64Array(4),o=new Float64Array(4);e.exports=function(t,e,r,a,s){i.length<a.length&&(i=new Float64Array(a.length),n=new Float64Array(a.length),o=new Float64Array(a.length));for(var u,l,h,f,c,d=0;d<a.length;++d)i[d]=t[d]-a[d],n[d]=e[d]-t[d],o[d]=r[d]-t[d];for(var p=0,v=0,g=0,m=0,b=0,y=0,d=0;d<a.length;++d){var x=n[d],_=o[d],w=i[d];p+=x*x,v+=x*_,g+=_*_,m+=w*x,b+=w*_,y+=w*w}var M=Math.abs(p*g-v*v),E=v*b-g*m,A=v*m-p*b;if(E+A<=M){if(E<0)A<0&&m<0?(A=0,-m>=p?(E=1,u=p+2*m+y):(E=-m/p,u=m*E+y)):(E=0,b>=0?(A=0,u=y):-b>=g?(A=1,u=g+2*b+y):(A=-b/g,u=b*A+y));else if(A<0)A=0,m>=0?(E=0,u=y):-m>=p?(E=1,u=p+2*m+y):(E=-m/p,u=m*E+y);else{var T=1/M;E*=T,A*=T,u=E*(p*E+v*A+2*m)+A*(v*E+g*A+2*b)+y}}else E<0?(l=v+m,(h=g+b)>l?(f=h-l)>=(c=p-2*v+g)?(E=1,A=0,u=p+2*m+y):(A=1-(E=f/c),u=E*(p*E+v*A+2*m)+A*(v*E+g*A+2*b)+y):(E=0,h<=0?(A=1,u=g+2*b+y):b>=0?(A=0,u=y):(A=-b/g,u=b*A+y))):A<0?(l=v+b,(h=p+m)>l?(f=h-l)>=(c=p-2*v+g)?(A=1,E=0,u=g+2*b+y):u=(E=1-(A=f/c))*(p*E+v*A+2*m)+A*(v*E+g*A+2*b)+y:(A=0,h<=0?(E=1,u=p+2*m+y):m>=0?(E=0,u=y):(E=-m/p,u=m*E+y))):(f=g+b-v-m)<=0?(E=0,A=1,u=g+2*b+y):f>=(c=p-2*v+g)?(E=1,A=0,u=p+2*m+y):(A=1-(E=f/c),u=E*(p*E+v*A+2*m)+A*(v*E+g*A+2*b)+y);for(var R=1-E-A,d=0;d<a.length;++d)s[d]=R*t[d]+E*e[d]+A*r[d];return u<0?0:u}},{}],271:[function(t,e,r){e.exports=t("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(t,e,r){"use strict";var i=t("big-rat/add");e.exports=function(t,e){for(var r=t.length,n=Array(r),o=0;o<r;++o)n[o]=i(t[o],e[o]);return n}},{"big-rat/add":15}],273:[function(t,e,r){"use strict";e.exports=function(t){for(var e=Array(t.length),r=0;r<t.length;++r)e[r]=i(t[r]);return e};var i=t("big-rat")},{"big-rat":18}],274:[function(t,e,r){"use strict";var i=t("big-rat"),n=t("big-rat/mul");e.exports=function(t,e){for(var r=i(e),o=t.length,a=Array(o),s=0;s<o;++s)a[s]=n(t[s],r);return a}},{"big-rat":18,"big-rat/mul":27}],275:[function(t,e,r){"use strict";var i=t("big-rat/sub");e.exports=function(t,e){for(var r=t.length,n=Array(r),o=0;o<r;++o)n[o]=i(t[o],e[o]);return n}},{"big-rat/sub":29}],276:[function(t,e,r){"use strict";var i=t("compare-cell"),n=t("compare-oriented-cell"),o=t("cell-orientation");e.exports=function(t){t.sort(n);for(var e=t.length,r=0,a=0;a<e;++a){var s=t[a],u=o(s);if(0!==u){if(r>0){var l=t[r-1];if(0===i(s,l)&&o(l)!==u){r-=1;continue}}t[r++]=s}}return t.length=r,t}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(t,e,r){/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */"use strict";var i,n="";e.exports=function(t,e){if("string"!=typeof t)throw TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(i!==t||void 0===i)i=t,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+=t,n=n.substr(0,r)}},{}],278:[function(t,e,i){(function(t){(function(){e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.length,r=t[t.length-1],i=e,n=e-2;n>=0;--n){var o=r,a=t[n],s=(r=o+a)-o,u=a-s;u&&(t[--i]=r,r=u)}for(var l=0,n=i;n<e;++n){var o=t[n],a=r,s=(r=o+a)-o,u=a-s;u&&(t[l++]=u)}return t[l++]=r,t.length=l,t}},{}],280:[function(t,e,r){"use strict";var i=t("two-product"),n=t("robust-sum"),o=t("robust-scale"),a=t("robust-compress");function s(t,e,r,i){return function(e){return i(t(r(e[0][0],e[1][1]),r(-e[0][1],e[1][0])))}}function u(t,e,r,i){return function(n){return i(t(e(t(r(n[1][1],n[2][2]),r(-n[1][2],n[2][1])),n[0][0]),t(e(t(r(n[1][0],n[2][2]),r(-n[1][2],n[2][0])),-n[0][1]),e(t(r(n[1][0],n[2][1]),r(-n[1][1],n[2][0])),n[0][2]))))}}function l(t,e,r,i){return function(n){return i(t(t(e(t(e(t(r(n[2][2],n[3][3]),r(-n[2][3],n[3][2])),n[1][1]),t(e(t(r(n[2][1],n[3][3]),r(-n[2][3],n[3][1])),-n[1][2]),e(t(r(n[2][1],n[3][2]),r(-n[2][2],n[3][1])),n[1][3]))),n[0][0]),e(t(e(t(r(n[2][2],n[3][3]),r(-n[2][3],n[3][2])),n[1][0]),t(e(t(r(n[2][0],n[3][3]),r(-n[2][3],n[3][0])),-n[1][2]),e(t(r(n[2][0],n[3][2]),r(-n[2][2],n[3][0])),n[1][3]))),-n[0][1])),t(e(t(e(t(r(n[2][1],n[3][3]),r(-n[2][3],n[3][1])),n[1][0]),t(e(t(r(n[2][0],n[3][3]),r(-n[2][3],n[3][0])),-n[1][1]),e(t(r(n[2][0],n[3][1]),r(-n[2][1],n[3][0])),n[1][3]))),n[0][2]),e(t(e(t(r(n[2][1],n[3][2]),r(-n[2][2],n[3][1])),n[1][0]),t(e(t(r(n[2][0],n[3][2]),r(-n[2][2],n[3][0])),-n[1][1]),e(t(r(n[2][0],n[3][1]),r(-n[2][1],n[3][0])),n[1][2]))),-n[0][3]))))}}function h(t,e,r,i){return function(n){return i(t(t(e(t(t(e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][2]),t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),-n[2][3]),e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][4]))),n[1][1]),e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][1]),t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),-n[2][3]),e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),n[2][4]))),-n[1][2])),t(e(t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),n[2][1]),t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),-n[2][2]),e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][4]))),n[1][3]),e(t(e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][1]),t(e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),-n[2][2]),e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][3]))),-n[1][4]))),n[0][0]),e(t(t(e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][2]),t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),-n[2][3]),e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][4]))),n[1][0]),e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][3]),e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),n[2][4]))),-n[1][2])),t(e(t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][2]),e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),n[2][4]))),n[1][3]),e(t(e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][0]),t(e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),-n[2][2]),e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),n[2][3]))),-n[1][4]))),-n[0][1])),t(e(t(t(e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][1]),t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),-n[2][3]),e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),n[2][4]))),n[1][0]),e(t(e(t(r(n[3][3],n[4][4]),r(-n[3][4],n[4][3])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][3]),e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),n[2][4]))),-n[1][1])),t(e(t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][4]))),n[1][3]),e(t(e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][3]))),-n[1][4]))),n[0][2]),t(e(t(t(e(t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),n[2][1]),t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),-n[2][2]),e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][4]))),n[1][0]),e(t(e(t(r(n[3][2],n[4][4]),r(-n[3][4],n[4][2])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][2]),e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),n[2][4]))),-n[1][1])),t(e(t(e(t(r(n[3][1],n[4][4]),r(-n[3][4],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][4]),r(-n[3][4],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][4]))),n[1][2]),e(t(e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][2]))),-n[1][4]))),-n[0][3]),e(t(t(e(t(e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][1]),t(e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),-n[2][2]),e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][3]))),n[1][0]),e(t(e(t(r(n[3][2],n[4][3]),r(-n[3][3],n[4][2])),n[2][0]),t(e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),-n[2][2]),e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),n[2][3]))),-n[1][1])),t(e(t(e(t(r(n[3][1],n[4][3]),r(-n[3][3],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][3]),r(-n[3][3],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][3]))),n[1][2]),e(t(e(t(r(n[3][1],n[4][2]),r(-n[3][2],n[4][1])),n[2][0]),t(e(t(r(n[3][0],n[4][2]),r(-n[3][2],n[4][0])),-n[2][1]),e(t(r(n[3][0],n[4][1]),r(-n[3][1],n[4][0])),n[2][2]))),-n[1][3]))),n[0][4])))))}}function f(t){return(2===t?s:3===t?u:4===t?l:5===t?h:void 0)(n,o,i,a)}var c=[function(){return[0]},function(t){return[t[0][0]]}];function d(t,e,r,i,n,o,a,s){return function(u){switch(u.length){case 0:return t(u);case 1:return e(u);case 2:return r(u);case 3:return i(u);case 4:return n(u);case 5:return o(u)}var l=a[u.length];return l||(l=a[u.length]=s(u.length)),l(u)}}!function(){for(;c.length<6;)c.push(f(c.length));e.exports=d.apply(void 0,c.concat([c,f]));for(var t=0;t<c.length;++t)e.exports[t]=c[t]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(t,e,r){"use strict";var i=t("two-product"),n=t("robust-sum");e.exports=function(t,e){for(var r=i(t[0],e[0]),o=1;o<t.length;++o)r=n(r,i(t[o],e[o]));return r}},{"robust-sum":289,"two-product":306}],282:[function(t,e,r){"use strict";var i=t("two-product"),n=t("robust-sum"),o=t("robust-subtract"),a=t("robust-scale");function s(t){return(3===t?u:4===t?l:5===t?h:f)(n,o,i,a)}function u(t,e,r,i){return function(n,o,a){var s=r(n[0],n[0]),u=i(s,o[0]),l=i(s,a[0]),h=r(o[0],o[0]),f=i(h,n[0]),c=i(h,a[0]),d=r(a[0],a[0]),p=i(d,n[0]),v=t(e(i(d,o[0]),c),e(f,u)),g=e(p,l),m=e(v,g);return m[m.length-1]}}function l(t,e,r,i){return function(n,o,a,s){var u=t(r(n[0],n[0]),r(n[1],n[1])),l=i(u,o[0]),h=i(u,a[0]),f=i(u,s[0]),c=t(r(o[0],o[0]),r(o[1],o[1])),d=i(c,n[0]),p=i(c,a[0]),v=i(c,s[0]),g=t(r(a[0],a[0]),r(a[1],a[1])),m=i(g,n[0]),b=i(g,o[0]),y=i(g,s[0]),x=t(r(s[0],s[0]),r(s[1],s[1])),_=i(x,n[0]),w=i(x,o[0]),M=i(x,a[0]),E=t(t(i(e(M,y),o[1]),t(i(e(w,v),-a[1]),i(e(b,p),s[1]))),t(i(e(w,v),n[1]),t(i(e(_,f),-o[1]),i(e(d,l),s[1])))),A=t(t(i(e(M,y),n[1]),t(i(e(_,f),-a[1]),i(e(m,h),s[1]))),t(i(e(b,p),n[1]),t(i(e(m,h),-o[1]),i(e(d,l),a[1])))),T=e(E,A);return T[T.length-1]}}function h(t,e,r,i){return function(n,o,a,s,u){var l=t(r(n[0],n[0]),t(r(n[1],n[1]),r(n[2],n[2]))),h=i(l,o[0]),f=i(l,a[0]),c=i(l,s[0]),d=i(l,u[0]),p=t(r(o[0],o[0]),t(r(o[1],o[1]),r(o[2],o[2]))),v=i(p,n[0]),g=i(p,a[0]),m=i(p,s[0]),b=i(p,u[0]),y=t(r(a[0],a[0]),t(r(a[1],a[1]),r(a[2],a[2]))),x=i(y,n[0]),_=i(y,o[0]),w=i(y,s[0]),M=i(y,u[0]),E=t(r(s[0],s[0]),t(r(s[1],s[1]),r(s[2],s[2]))),A=i(E,n[0]),T=i(E,o[0]),R=i(E,a[0]),k=i(E,u[0]),S=t(r(u[0],u[0]),t(r(u[1],u[1]),r(u[2],u[2]))),O=i(S,n[0]),C=i(S,o[0]),L=i(S,a[0]),I=i(S,s[0]),P=t(t(t(i(t(i(e(I,k),a[1]),t(i(e(L,M),-s[1]),i(e(R,w),u[1]))),o[2]),t(i(t(i(e(I,k),o[1]),t(i(e(C,b),-s[1]),i(e(T,m),u[1]))),-a[2]),i(t(i(e(L,M),o[1]),t(i(e(C,b),-a[1]),i(e(_,g),u[1]))),s[2]))),t(i(t(i(e(R,w),o[1]),t(i(e(T,m),-a[1]),i(e(_,g),s[1]))),-u[2]),t(i(t(i(e(I,k),o[1]),t(i(e(C,b),-s[1]),i(e(T,m),u[1]))),n[2]),i(t(i(e(I,k),n[1]),t(i(e(O,d),-s[1]),i(e(A,c),u[1]))),-o[2])))),t(t(i(t(i(e(C,b),n[1]),t(i(e(O,d),-o[1]),i(e(v,h),u[1]))),s[2]),t(i(t(i(e(T,m),n[1]),t(i(e(A,c),-o[1]),i(e(v,h),s[1]))),-u[2]),i(t(i(e(R,w),o[1]),t(i(e(T,m),-a[1]),i(e(_,g),s[1]))),n[2]))),t(i(t(i(e(R,w),n[1]),t(i(e(A,c),-a[1]),i(e(x,f),s[1]))),-o[2]),t(i(t(i(e(T,m),n[1]),t(i(e(A,c),-o[1]),i(e(v,h),s[1]))),a[2]),i(t(i(e(_,g),n[1]),t(i(e(x,f),-o[1]),i(e(v,h),a[1]))),-s[2]))))),B=t(t(t(i(t(i(e(I,k),a[1]),t(i(e(L,M),-s[1]),i(e(R,w),u[1]))),n[2]),i(t(i(e(I,k),n[1]),t(i(e(O,d),-s[1]),i(e(A,c),u[1]))),-a[2])),t(i(t(i(e(L,M),n[1]),t(i(e(O,d),-a[1]),i(e(x,f),u[1]))),s[2]),i(t(i(e(R,w),n[1]),t(i(e(A,c),-a[1]),i(e(x,f),s[1]))),-u[2]))),t(t(i(t(i(e(L,M),o[1]),t(i(e(C,b),-a[1]),i(e(_,g),u[1]))),n[2]),i(t(i(e(L,M),n[1]),t(i(e(O,d),-a[1]),i(e(x,f),u[1]))),-o[2])),t(i(t(i(e(C,b),n[1]),t(i(e(O,d),-o[1]),i(e(v,h),u[1]))),a[2]),i(t(i(e(_,g),n[1]),t(i(e(x,f),-o[1]),i(e(v,h),a[1]))),-u[2])))),N=e(P,B);return N[N.length-1]}}function f(t,e,r,i){return function(n,o,a,s,u,l){var h=t(t(r(n[0],n[0]),r(n[1],n[1])),t(r(n[2],n[2]),r(n[3],n[3]))),f=i(h,o[0]),c=i(h,a[0]),d=i(h,s[0]),p=i(h,u[0]),v=i(h,l[0]),g=t(t(r(o[0],o[0]),r(o[1],o[1])),t(r(o[2],o[2]),r(o[3],o[3]))),m=i(g,n[0]),b=i(g,a[0]),y=i(g,s[0]),x=i(g,u[0]),_=i(g,l[0]),w=t(t(r(a[0],a[0]),r(a[1],a[1])),t(r(a[2],a[2]),r(a[3],a[3]))),M=i(w,n[0]),E=i(w,o[0]),A=i(w,s[0]),T=i(w,u[0]),R=i(w,l[0]),k=t(t(r(s[0],s[0]),r(s[1],s[1])),t(r(s[2],s[2]),r(s[3],s[3]))),S=i(k,n[0]),O=i(k,o[0]),C=i(k,a[0]),L=i(k,u[0]),I=i(k,l[0]),P=t(t(r(u[0],u[0]),r(u[1],u[1])),t(r(u[2],u[2]),r(u[3],u[3]))),B=i(P,n[0]),N=i(P,o[0]),F=i(P,a[0]),z=i(P,s[0]),D=i(P,l[0]),U=t(t(r(l[0],l[0]),r(l[1],l[1])),t(r(l[2],l[2]),r(l[3],l[3]))),j=i(U,n[0]),G=i(U,o[0]),V=i(U,a[0]),H=i(U,s[0]),W=i(U,u[0]),X=t(t(t(i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),a[2]),i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),-s[2])),t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),u[2]),i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),-l[2]))),o[3]),t(i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),o[2]),i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),-s[2])),t(i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),u[2]),i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),-l[2]))),-a[3]),i(t(t(i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),o[2]),i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),-a[2])),t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),u[2]),i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),-l[2]))),s[3]))),t(t(i(t(t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),o[2]),i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),-a[2])),t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),s[2]),i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),-l[2]))),-u[3]),i(t(t(i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),o[2]),i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),-a[2])),t(i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),s[2]),i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),-u[2]))),l[3])),t(i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),o[2]),i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),-s[2])),t(i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),u[2]),i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),-l[2]))),n[3]),i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-s[2])),t(i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),u[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-l[2]))),-o[3])))),t(t(t(i(t(t(i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),u[2]),i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),-l[2]))),s[3]),i(t(t(i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),n[2]),i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),s[2]),i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),-l[2]))),-u[3])),t(i(t(t(i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),n[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-o[2])),t(i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),s[2]),i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),-u[2]))),l[3]),i(t(t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),o[2]),i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),-a[2])),t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),s[2]),i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),-l[2]))),n[3]))),t(t(i(t(t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),n[2]),i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),-a[2])),t(i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),s[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-l[2]))),-o[3]),i(t(t(i(t(i(e(H,I),o[1]),t(i(e(G,_),-s[1]),i(e(O,y),l[1]))),n[2]),i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),s[2]),i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),-l[2]))),a[3])),t(i(t(t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),n[2]),i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-l[2]))),-s[3]),i(t(t(i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),n[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-o[2])),t(i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-s[2]))),l[3]))))),Y=t(t(t(i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),a[2]),i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),-s[2])),t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),u[2]),i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),-l[2]))),n[3]),t(i(t(t(i(t(i(e(W,D),s[1]),t(i(e(H,I),-u[1]),i(e(z,L),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-s[2])),t(i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),u[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-l[2]))),-a[3]),i(t(t(i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-a[2])),t(i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),u[2]),i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),-l[2]))),s[3]))),t(t(i(t(t(i(t(i(e(H,I),a[1]),t(i(e(V,R),-s[1]),i(e(C,A),l[1]))),n[2]),i(t(i(e(H,I),n[1]),t(i(e(j,v),-s[1]),i(e(S,d),l[1]))),-a[2])),t(i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),s[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-l[2]))),-u[3]),i(t(t(i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),n[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-a[2])),t(i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),s[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-u[2]))),l[3])),t(i(t(t(i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),o[2]),i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),-a[2])),t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),u[2]),i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),-l[2]))),n[3]),i(t(t(i(t(i(e(W,D),a[1]),t(i(e(V,R),-u[1]),i(e(F,T),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-a[2])),t(i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),u[2]),i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),-l[2]))),-o[3])))),t(t(t(i(t(t(i(t(i(e(W,D),o[1]),t(i(e(G,_),-u[1]),i(e(N,x),l[1]))),n[2]),i(t(i(e(W,D),n[1]),t(i(e(j,v),-u[1]),i(e(B,p),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),u[2]),i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),-l[2]))),a[3]),i(t(t(i(t(i(e(V,R),o[1]),t(i(e(G,_),-a[1]),i(e(E,b),l[1]))),n[2]),i(t(i(e(V,R),n[1]),t(i(e(j,v),-a[1]),i(e(M,c),l[1]))),-o[2])),t(i(t(i(e(G,_),n[1]),t(i(e(j,v),-o[1]),i(e(m,f),l[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-l[2]))),-u[3])),t(i(t(t(i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),n[2]),i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),-o[2])),t(i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-u[2]))),l[3]),i(t(t(i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),o[2]),i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),-a[2])),t(i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),s[2]),i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),-u[2]))),n[3]))),t(t(i(t(t(i(t(i(e(z,L),a[1]),t(i(e(F,T),-s[1]),i(e(C,A),u[1]))),n[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-a[2])),t(i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),s[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-u[2]))),-o[3]),i(t(t(i(t(i(e(z,L),o[1]),t(i(e(N,x),-s[1]),i(e(O,y),u[1]))),n[2]),i(t(i(e(z,L),n[1]),t(i(e(B,p),-s[1]),i(e(S,d),u[1]))),-o[2])),t(i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),s[2]),i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),-u[2]))),a[3])),t(i(t(t(i(t(i(e(F,T),o[1]),t(i(e(N,x),-a[1]),i(e(E,b),u[1]))),n[2]),i(t(i(e(F,T),n[1]),t(i(e(B,p),-a[1]),i(e(M,c),u[1]))),-o[2])),t(i(t(i(e(N,x),n[1]),t(i(e(B,p),-o[1]),i(e(m,f),u[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-u[2]))),-s[3]),i(t(t(i(t(i(e(C,A),o[1]),t(i(e(O,y),-a[1]),i(e(E,b),s[1]))),n[2]),i(t(i(e(C,A),n[1]),t(i(e(S,d),-a[1]),i(e(M,c),s[1]))),-o[2])),t(i(t(i(e(O,y),n[1]),t(i(e(S,d),-o[1]),i(e(m,f),s[1]))),a[2]),i(t(i(e(E,b),n[1]),t(i(e(M,c),-o[1]),i(e(m,f),a[1]))),-s[2]))),u[3]))))),q=e(X,Y);return q[q.length-1]}}var c=[function(){return 0},function(){return 0},function(){return 0}];function d(t){var e=c[t.length];return e||(e=c[t.length]=s(t.length)),e.apply(void 0,t)}function p(t,e,r,i,n,o,a,s){return function(e,r,u,l,h,f){switch(arguments.length){case 0:case 1:return 0;case 2:return i(e,r);case 3:return n(e,r,u);case 4:return o(e,r,u,l);case 5:return a(e,r,u,l,h);case 6:return s(e,r,u,l,h,f)}for(var c=Array(arguments.length),d=0;d<arguments.length;++d)c[d]=arguments[d];return t(c)}}!function(){for(;c.length<=6;)c.push(s(c.length));e.exports=p.apply(void 0,[d].concat(c));for(var t=0;t<=6;++t)e.exports[t]=c[t]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(t,e,r){"use strict";var i=t("robust-determinant");function n(t){return(2===t?o:3===t?a:4===t?s:5===t?u:l)(t<6?i[t]:i)}function o(t){return function(e,r){return[t([[+r[0],+e[0][1]],[+r[1],+e[1][1]]]),t([[+e[0][0],+r[0]],[+e[1][0],+r[1]]]),t(e)]}}function a(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2]],[+r[1],+e[1][1],+e[1][2]],[+r[2],+e[2][1],+e[2][2]]]),t([[+e[0][0],+r[0],+e[0][2]],[+e[1][0],+r[1],+e[1][2]],[+e[2][0],+r[2],+e[2][2]]]),t([[+e[0][0],+e[0][1],+r[0]],[+e[1][0],+e[1][1],+r[1]],[+e[2][0],+e[2][1],+r[2]]]),t(e)]}}function s(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3]],[+r[1],+e[1][1],+e[1][2],+e[1][3]],[+r[2],+e[2][1],+e[2][2],+e[2][3]],[+r[3],+e[3][1],+e[3][2],+e[3][3]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3]],[+e[1][0],+r[1],+e[1][2],+e[1][3]],[+e[2][0],+r[2],+e[2][2],+e[2][3]],[+e[3][0],+r[3],+e[3][2],+e[3][3]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3]],[+e[1][0],+e[1][1],+r[1],+e[1][3]],[+e[2][0],+e[2][1],+r[2],+e[2][3]],[+e[3][0],+e[3][1],+r[3],+e[3][3]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+r[3]]]),t(e)]}}function u(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4]]]),t(e)]}}function l(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+r[5],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+r[5],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+r[5],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+r[5],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+r[5],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+r[4]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+r[5]]]),t(e)]}}var h=[function(){return[[0]]},function(t,e){return[[e[0]],[t[0][0]]]}];function f(t,e,r,i,n,o,a,s){return function(u,l){switch(u.length){case 0:return t(u,l);case 1:return e(u,l);case 2:return r(u,l);case 3:return i(u,l);case 4:return n(u,l);case 5:return o(u,l)}var h=a[u.length];return h||(h=a[u.length]=s(u.length)),h(u,l)}}!function(){for(;h.length<6;)h.push(n(h.length));e.exports=f.apply(void 0,h.concat([h,n]));for(var t=0;t<6;++t)e.exports[t]=h[t]}()},{"robust-determinant":280}],284:[function(t,e,r){"use strict";var i=t("two-product"),n=t("robust-sum"),o=t("robust-scale"),a=t("robust-subtract");function s(t,e,r,i){return function(r,n,o){var a=i(t(t(e(n[1],o[0]),e(-o[1],n[0])),t(e(r[1],n[0]),e(-n[1],r[0]))),t(e(r[1],o[0]),e(-o[1],r[0])));return a[a.length-1]}}function u(t,e,r,i){return function(n,o,a,s){var u=i(t(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),s[2])))),t(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-a[2]),r(t(e(n[1],a[0]),e(-a[1],n[0])),s[2]))),t(r(t(e(o[1],a[0]),e(-a[1],o[0])),n[2]),t(r(t(e(n[1],a[0]),e(-a[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),a[2])))));return u[u.length-1]}}function l(t,e,r,i){return function(n,o,a,s,u){var l=i(t(t(t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(r(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),o[3]),t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),-a[3]),r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),s[3]))),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-u[3]),t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),n[3]),r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-s[2]),r(t(e(n[1],s[0]),e(-s[1],n[0])),u[2]))),-o[3])))),t(t(r(t(r(t(e(o[1],u[0]),e(-u[1],o[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),u[2]))),s[3]),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),s[2]))),-u[3]),r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),n[3]))),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-a[2]),r(t(e(n[1],a[0]),e(-a[1],n[0])),s[2]))),-o[3]),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),s[2]))),a[3]),r(t(r(t(e(o[1],a[0]),e(-a[1],o[0])),n[2]),t(r(t(e(n[1],a[0]),e(-a[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),a[2]))),-s[3]))))),t(t(t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(r(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),n[3]),r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-s[2]),r(t(e(n[1],s[0]),e(-s[1],n[0])),u[2]))),-a[3])),t(r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-a[2]),r(t(e(n[1],a[0]),e(-a[1],n[0])),u[2]))),s[3]),r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),n[2]),t(r(t(e(n[1],s[0]),e(-s[1],n[0])),-a[2]),r(t(e(n[1],a[0]),e(-a[1],n[0])),s[2]))),-u[3]))),t(t(r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),n[3]),r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-a[2]),r(t(e(n[1],a[0]),e(-a[1],n[0])),u[2]))),-o[3])),t(r(t(r(t(e(o[1],u[0]),e(-u[1],o[0])),n[2]),t(r(t(e(n[1],u[0]),e(-u[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),u[2]))),a[3]),r(t(r(t(e(o[1],a[0]),e(-a[1],o[0])),n[2]),t(r(t(e(n[1],a[0]),e(-a[1],n[0])),-o[2]),r(t(e(n[1],o[0]),e(-o[1],n[0])),a[2]))),-u[3])))));return l[l.length-1]}}function h(t){return(3===t?s:4===t?u:l)(n,i,o,a)}var f=h(3),c=h(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var i,n=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),a=n-o;if(n>0){if(o<=0)return a;i=n+o}else{if(!(n<0)||o>=0)return a;i=-(n+o)}var s=33306690738754716e-32*i;return a>=s||a<=-s?a:f(t,e,r)},function(t,e,r,i){var n=t[0]-i[0],o=e[0]-i[0],a=r[0]-i[0],s=t[1]-i[1],u=e[1]-i[1],l=r[1]-i[1],h=t[2]-i[2],f=e[2]-i[2],d=r[2]-i[2],p=o*l,v=a*u,g=a*s,m=n*l,b=n*u,y=o*s,x=h*(p-v)+f*(g-m)+d*(b-y),_=7771561172376103e-31*((Math.abs(p)+Math.abs(v))*Math.abs(h)+(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(b)+Math.abs(y))*Math.abs(d));return x>_||-x>_?x:c(t,e,r,i)}];function p(t){var e=d[t.length];return e||(e=d[t.length]=h(t.length)),e.apply(void 0,t)}function v(t,e,r,i,n,o,a){return function(e,r,s,u,l){switch(arguments.length){case 0:case 1:return 0;case 2:return i(e,r);case 3:return n(e,r,s);case 4:return o(e,r,s,u);case 5:return a(e,r,s,u,l)}for(var h=Array(arguments.length),f=0;f<arguments.length;++f)h[f]=arguments[f];return t(h)}}!function(){for(;d.length<=5;)d.push(h(d.length));e.exports=v.apply(void 0,[p].concat(d));for(var t=0;t<=5;++t)e.exports[t]=d[t]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(t,e,r){"use strict";var i=t("robust-sum"),n=t("robust-scale");e.exports=function(t,e){if(1===t.length)return n(e,t[0]);if(1===e.length)return n(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var o=0;o<t.length;++o)r=i(r,n(e,t[o]));else for(var o=0;o<e.length;++o)r=i(r,n(t,e[o]));return r}},{"robust-scale":286,"robust-sum":289}],286:[function(t,e,r){"use strict";var i=t("two-product"),n=t("two-sum");e.exports=function(t,e){var r=t.length;if(1===r){var o=i(t[0],e);return o[0]?o:[o[1]]}var a=Array(2*r),s=[.1,.1],u=[.1,.1],l=0;i(t[0],e,s),s[0]&&(a[l++]=s[0]);for(var h=1;h<r;++h){i(t[h],e,u),n(s[1],u[0],s),s[0]&&(a[l++]=s[0]);var f=u[1],c=s[1],d=f+c,p=c-(d-f);s[1]=d,p&&(a[l++]=p)}return s[1]&&(a[l++]=s[1]),0===l&&(a[l++]=0),a.length=l,a}},{"two-product":306,"two-sum":307}],287:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var o=i(t,r,n),a=i(e,r,n);if(o>0&&a>0||o<0&&a<0)return!1;var s=i(r,t,e),u=i(n,t,e);return(!(s>0)||!(u>0))&&(!(s<0)||!(u<0))&&(0!==o||0!==a||0!==s||0!==u||function(t,e,r,i){for(var n=0;n<2;++n){var o=t[n],a=e[n],s=Math.min(o,a),u=Math.max(o,a),l=r[n],h=i[n],f=Math.min(l,h);if(Math.max(l,h)<s||u<f)return!1}return!0}(t,e,r,n))};var i=t("robust-orientation")[3]},{"robust-orientation":284}],288:[function(t,e,r){"use strict";e.exports=function(t,e){var r,i,n,o,a,s,u,l,h,f,c,d=0|t.length,p=0|e.length;if(1===d&&1===p)return o=(n=(r=t[0])+(i=-e[0]))-r,(a=r-(n-o)+(i-o))?[a,n]:[n];var v=Array(d+p),g=0,m=0,b=0,y=Math.abs,x=t[0],_=y(x),w=-e[b],M=y(w);_<M?(u=x,(m+=1)<d&&(_=y(x=t[m]))):(u=w,(b+=1)<p&&(M=y(w=-e[b]))),m<d&&_<M||b>=p?(s=x,(m+=1)<d&&(_=y(x=t[m]))):(s=w,(b+=1)<p&&(M=y(w=-e[b])));for(var E=s+u,A=E-s,T=u-A,R=T,k=E;m<d&&b<p;)_<M?(s=x,(m+=1)<d&&(_=y(x=t[m]))):(s=w,(b+=1)<p&&(M=y(w=-e[b]))),A=(E=s+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l;for(;m<d;)A=(E=(s=x)+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l,(m+=1)<d&&(x=t[m]);for(;b<p;)A=(E=(s=w)+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l,(b+=1)<p&&(w=-e[b]);return R&&(v[g++]=R),k&&(v[g++]=k),g||(v[g++]=0),v.length=g,v}},{}],289:[function(t,e,r){"use strict";e.exports=function(t,e){var r,i,n,o,a,s,u,l,h,f,c,d=0|t.length,p=0|e.length;if(1===d&&1===p)return o=(n=(r=t[0])+(i=e[0]))-r,(a=r-(n-o)+(i-o))?[a,n]:[n];var v=Array(d+p),g=0,m=0,b=0,y=Math.abs,x=t[0],_=y(x),w=e[b],M=y(w);_<M?(u=x,(m+=1)<d&&(_=y(x=t[m]))):(u=w,(b+=1)<p&&(M=y(w=e[b]))),m<d&&_<M||b>=p?(s=x,(m+=1)<d&&(_=y(x=t[m]))):(s=w,(b+=1)<p&&(M=y(w=e[b])));for(var E=s+u,A=E-s,T=u-A,R=T,k=E;m<d&&b<p;)_<M?(s=x,(m+=1)<d&&(_=y(x=t[m]))):(s=w,(b+=1)<p&&(M=y(w=e[b]))),A=(E=s+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l;for(;m<d;)A=(E=(s=x)+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l,(m+=1)<d&&(x=t[m]);for(;b<p;)A=(E=(s=w)+(u=R))-s,(T=u-A)&&(v[g++]=T),h=(l=k+E)-k,R=k-(l-h)+(E-h),k=l,(b+=1)<p&&(w=e[b]);return R&&(v[g++]=R),k&&(v[g++]=k),g||(v[g++]=0),v.length=g,v}},{}],290:[function(t,e,r){"use strict";e.exports=function(t){return n(i(t))};var i=t("boundary-cells"),n=t("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(t,e,r){"use strict";e.exports=function(t,e,r,s){if(r=r||0,void 0===s&&(s=function(t){for(var e=t.length,r=0,i=0;i<e;++i)r=0|Math.max(r,t[i].length);return r-1}(t)),0===t.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var u=function(t,e){for(var r=t.length,i=n.mallocUint8(r),o=0;o<r;++o)i[o]=t[o]<e|0;return i}(e,+r),l=function(t,e){for(var r=t.length,a=e*(e+1)/2*r|0,s=n.mallocUint32(2*a),u=0,l=0;l<r;++l)for(var h=t[l],e=h.length,f=0;f<e;++f)for(var c=0;c<f;++c){var d=h[c],p=h[f];s[u++]=0|Math.min(d,p),s[u++]=0|Math.max(d,p)}o(i(s,[u/2|0,2]));for(var v=2,l=2;l<u;l+=2)(s[l-2]!==s[l]||s[l-1]!==s[l+1])&&(s[v++]=s[l],s[v++]=s[l+1]);return i(s,[v/2|0,2])}(t,s),h=function(t,e,r,o){for(var a=t.data,s=t.shape[0],u=n.mallocDouble(s),l=0,h=0;h<s;++h){var f=a[2*h],c=a[2*h+1];if(r[f]!==r[c]){var d=e[f],p=e[c];a[2*l]=f,a[2*l+1]=c,u[l++]=(p-o)/(p-d)}}return t.shape[0]=l,i(u,[l])}(l,e,u,+r),f=function(t,e){var r=n.mallocInt32(2*e),i=t.shape[0],o=t.data;r[0]=0;for(var a=0,s=0;s<i;++s){var u=o[2*s];if(u!==a){for(r[2*a+1]=s;++a<u;)r[2*a]=s,r[2*a+1]=s;r[2*a]=s}}for(r[2*a+1]=i;++a<e;)r[2*a]=r[2*a+1]=i;return r}(l,0|e.length),c=a(s)(t,l.data,f,u),d=function(t){for(var e=0|t.shape[0],r=t.data,i=Array(e),n=0;n<e;++n)i[n]=[r[2*n],r[2*n+1]];return i}(l),p=[].slice.call(h.data,0,h.shape[0]);return n.free(u),n.free(l.data),n.free(h.data),n.free(f),{cells:c,vertexIds:d,vertexWeights:p}};var i=t("ndarray"),n=t("typedarray-pool"),o=t("ndarray-sort"),a=t("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(t,e,r){"use strict";e.exports=function(t){return i[t]()};var i=[function(){return function(t,e,r,i){for(var n=t.length,o=0;o<n;++o)t[o].length;return[]}},function(){function t(t,e,r,i){for(var n=0|Math.min(r,i),o=0|Math.max(r,i),a=t[2*n],s=t[2*n+1];a<s;){var u=a+s>>1,l=e[2*u+1];if(l===o)return u;o<l?s=u:a=u+1}return a}return function(e,r,i,n){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s];if(2===u.length){var l=(n[u[0]]<<0)+(n[u[1]]<<1);if(0===l||3===l)continue;switch(l){case 0:break;case 1:a.push([t(i,r,u[0],u[1])]);break;case 2:a.push([t(i,r,u[1],u[0])])}}}return a}},function(){function t(t,e,r,i){for(var n=0|Math.min(r,i),o=0|Math.max(r,i),a=t[2*n],s=t[2*n+1];a<s;){var u=a+s>>1,l=e[2*u+1];if(l===o)return u;o<l?s=u:a=u+1}return a}return function(e,r,i,n){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s],l=u.length;if(3===l){var h=(n[u[0]]<<0)+(n[u[1]]<<1)+(n[u[2]]<<2);if(0===h||7===h)continue;switch(h){case 0:break;case 1:a.push([t(i,r,u[0],u[2]),t(i,r,u[0],u[1])]);break;case 2:a.push([t(i,r,u[1],u[0]),t(i,r,u[1],u[2])]);break;case 3:a.push([t(i,r,u[0],u[2]),t(i,r,u[1],u[2])]);break;case 4:a.push([t(i,r,u[2],u[1]),t(i,r,u[2],u[0])]);break;case 5:a.push([t(i,r,u[2],u[1]),t(i,r,u[0],u[1])]);break;case 6:a.push([t(i,r,u[1],u[0]),t(i,r,u[2],u[0])])}}else if(2===l){var h=(n[u[0]]<<0)+(n[u[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:break;case 1:a.push([t(i,r,u[0],u[1])]);break;case 2:a.push([t(i,r,u[1],u[0])])}}}return a}},function(){function t(t,e,r,i){for(var n=0|Math.min(r,i),o=0|Math.max(r,i),a=t[2*n],s=t[2*n+1];a<s;){var u=a+s>>1,l=e[2*u+1];if(l===o)return u;o<l?s=u:a=u+1}return a}return function(e,r,i,n){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s],l=u.length;if(4===l){var h=(n[u[0]]<<0)+(n[u[1]]<<1)+(n[u[2]]<<2)+(n[u[3]]<<3);if(0===h||15===h)continue;switch(h){case 0:break;case 1:a.push([t(i,r,u[0],u[1]),t(i,r,u[0],u[2]),t(i,r,u[0],u[3])]);break;case 2:a.push([t(i,r,u[1],u[2]),t(i,r,u[1],u[0]),t(i,r,u[1],u[3])]);break;case 3:a.push([t(i,r,u[1],u[2]),t(i,r,u[0],u[2]),t(i,r,u[0],u[3])],[t(i,r,u[1],u[3]),t(i,r,u[1],u[2]),t(i,r,u[0],u[3])]);break;case 4:a.push([t(i,r,u[2],u[0]),t(i,r,u[2],u[1]),t(i,r,u[2],u[3])]);break;case 5:a.push([t(i,r,u[0],u[1]),t(i,r,u[2],u[1]),t(i,r,u[0],u[3])],[t(i,r,u[2],u[1]),t(i,r,u[2],u[3]),t(i,r,u[0],u[3])]);break;case 6:a.push([t(i,r,u[2],u[0]),t(i,r,u[1],u[0]),t(i,r,u[1],u[3])],[t(i,r,u[2],u[3]),t(i,r,u[2],u[0]),t(i,r,u[1],u[3])]);break;case 7:a.push([t(i,r,u[0],u[3]),t(i,r,u[1],u[3]),t(i,r,u[2],u[3])]);break;case 8:a.push([t(i,r,u[3],u[1]),t(i,r,u[3],u[0]),t(i,r,u[3],u[2])]);break;case 9:a.push([t(i,r,u[3],u[1]),t(i,r,u[0],u[1]),t(i,r,u[0],u[2])],[t(i,r,u[3],u[2]),t(i,r,u[3],u[1]),t(i,r,u[0],u[2])]);break;case 10:a.push([t(i,r,u[1],u[0]),t(i,r,u[3],u[0]),t(i,r,u[1],u[2])],[t(i,r,u[3],u[0]),t(i,r,u[3],u[2]),t(i,r,u[1],u[2])]);break;case 11:a.push([t(i,r,u[1],u[2]),t(i,r,u[0],u[2]),t(i,r,u[3],u[2])]);break;case 12:a.push([t(i,r,u[3],u[0]),t(i,r,u[2],u[0]),t(i,r,u[2],u[1])],[t(i,r,u[3],u[1]),t(i,r,u[3],u[0]),t(i,r,u[2],u[1])]);break;case 13:a.push([t(i,r,u[0],u[1]),t(i,r,u[2],u[1]),t(i,r,u[3],u[1])]);break;case 14:a.push([t(i,r,u[2],u[0]),t(i,r,u[1],u[0]),t(i,r,u[3],u[0])])}}else if(3===l){var h=(n[u[0]]<<0)+(n[u[1]]<<1)+(n[u[2]]<<2);if(0===h||7===h)continue;switch(h){case 0:break;case 1:a.push([t(i,r,u[0],u[2]),t(i,r,u[0],u[1])]);break;case 2:a.push([t(i,r,u[1],u[0]),t(i,r,u[1],u[2])]);break;case 3:a.push([t(i,r,u[0],u[2]),t(i,r,u[1],u[2])]);break;case 4:a.push([t(i,r,u[2],u[1]),t(i,r,u[2],u[0])]);break;case 5:a.push([t(i,r,u[2],u[1]),t(i,r,u[0],u[1])]);break;case 6:a.push([t(i,r,u[1],u[0]),t(i,r,u[2],u[0])])}}else if(2===l){var h=(n[u[0]]<<0)+(n[u[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:break;case 1:a.push([t(i,r,u[0],u[1])]);break;case 2:a.push([t(i,r,u[1],u[0])])}}}return a}}]},{}],293:[function(t,e,r){"use strict";var i=t("bit-twiddle"),n=t("union-find");function o(t,e){var r=t.length,i=t.length-e.length,n=Math.min;if(i)return i;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:var o=t[0]+t[1]-e[0]-e[1];if(o)return o;return n(t[0],t[1])-n(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var u=n(t[0],t[1]),l=n(e[0],e[1]),o=n(u,t[2])-n(l,e[2]);if(o)return o;return n(u+t[2],a)-n(l+e[2],s);default:var h=t.slice(0);h.sort();var f=e.slice(0);f.sort();for(var c=0;c<r;++c)if(i=h[c]-f[c])return i;return 0}}function a(t,e){return o(t[0],e[0])}function s(t,e){if(!e)return t.sort(o),t;for(var r=t.length,i=Array(r),n=0;n<r;++n)i[n]=[t[n],e[n]];i.sort(a);for(var n=0;n<r;++n)t[n]=i[n][0],e[n]=i[n][1];return t}function u(t){if(0===t.length)return[];for(var e=1,r=t.length,i=1;i<r;++i){var n=t[i];if(o(n,t[i-1])){if(i===e){e++;continue}t[e++]=n}}return t.length=e,t}function l(t,e){for(var r=0,i=t.length-1,n=-1;r<=i;){var a=r+i>>1,s=o(t[a],e);s<=0?(0===s&&(n=a),r=a+1):s>0&&(i=a-1)}return n}function h(t,e){for(var r=Array(t.length),n=0,a=r.length;n<a;++n)r[n]=[];for(var s=[],n=0,u=e.length;n<u;++n)for(var h=e[n],f=h.length,c=1,d=1<<f;c<d;++c){s.length=i.popCount(c);for(var p=0,v=0;v<f;++v)c&1<<v&&(s[p++]=h[v]);var g=l(t,s);if(!(g<0))for(;r[g++].push(n),!(g>=t.length)&&0===o(t[g],s););}return r}function f(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,o=0;o<t.length;++o)for(var a=t[o],u=n;u<1<<a.length;u=i.nextCombination(u)){for(var l=Array(e+1),h=0,f=0;f<a.length;++f)u&1<<f&&(l[h++]=a[f]);r.push(l)}return s(r)}r.dimension=function(t){for(var e=0,r=Math.max,i=0,n=t.length;i<n;++i)e=r(e,t[i].length);return e-1},r.countVertices=function(t){for(var e=-1,r=Math.max,i=0,n=t.length;i<n;++i)for(var o=t[i],a=0,s=o.length;a<s;++a)e=r(e,o[a]);return e+1},r.cloneCells=function(t){for(var e=Array(t.length),r=0,i=t.length;r<i;++r)e[r]=t[r].slice(0);return e},r.compareCells=o,r.normalize=s,r.unique=u,r.findCell=l,r.incidence=h,r.dual=function(t,e){if(!e)return h(u(f(t,0)),t,0);for(var r=Array(e),i=0;i<e;++i)r[i]=[];for(var i=0,n=t.length;i<n;++i)for(var o=t[i],a=0,s=o.length;a<s;++a)r[o[a]].push(i);return r},r.explode=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],o=0|n.length,a=1,u=1<<o;a<u;++a){for(var l=[],h=0;h<o;++h)a>>>h&1&&l.push(n[h]);e.push(l)}return s(e)},r.skeleton=f,r.boundary=function(t){for(var e=[],r=0,i=t.length;r<i;++r)for(var n=t[r],o=0,a=n.length;o<a;++o){for(var u=Array(n.length-1),l=0,h=0;l<a;++l)l!==o&&(u[h++]=n[l]);e.push(u)}return s(e)},r.connectedComponents=function(t,e){return e?function(t,e){for(var r=new n(e),i=0;i<t.length;++i)for(var o=t[i],a=0;a<o.length;++a)for(var s=a+1;s<o.length;++s)r.link(o[a],o[s]);for(var u=[],l=r.ranks,i=0;i<l.length;++i)l[i]=-1;for(var i=0;i<t.length;++i){var h=r.find(t[i][0]);l[h]<0?(l[h]=u.length,u.push([t[i].slice(0)])):u[l[h]].push(t[i].slice(0))}return u}(t,e):function(t){for(var e=u(s(f(t,0))),r=new n(e.length),i=0;i<t.length;++i)for(var o=t[i],a=0;a<o.length;++a)for(var h=l(e,[o[a]]),c=a+1;c<o.length;++c)r.link(h,l(e,[o[c]]));for(var d=[],p=r.ranks,i=0;i<p.length;++i)p[i]=-1;for(var i=0;i<t.length;++i){var v=r.find(l(e,[t[i][0]]));p[v]<0?(p[v]=d.length,d.push([t[i].slice(0)])):d[p[v]].push(t[i].slice(0))}return d}(t)}},{"bit-twiddle":32,"union-find":309}],294:[function(t,e,r){arguments[4][32][0].apply(r,arguments)},{dup:32}],295:[function(t,e,r){arguments[4][293][0].apply(r,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(t,e,r){"use strict";function i(t){this.roots=Array(t),this.ranks=Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=i,i.prototype.length=function(){return this.roots.length},i.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},i.prototype.link=function(t,e){var r=this.find(t),i=this.find(e);if(r!==i){var n=this.ranks,o=this.roots,a=n[r],s=n[i];a<s?o[r]=i:s<a?o[i]=r:(o[i]=r,++n[r])}}},{}],297:[function(t,e,r){"use strict";e.exports=function(t,e,r){for(var o=e.length,a=t.length,s=Array(o),u=Array(o),l=Array(o),h=Array(o),f=0;f<o;++f)s[f]=u[f]=-1,l[f]=1/0,h[f]=!1;for(var f=0;f<a;++f){var c=t[f];if(2!==c.length)throw Error("Input must be a graph");var d=c[1],p=c[0];-1!==u[p]?u[p]=-2:u[p]=d,-1!==s[d]?s[d]=-2:s[d]=p}function v(t){if(h[t])return 1/0;var r,n,o=s[t],a=u[t];return o<0||a<0?1/0:Math.abs(i(e[t],r=e[o],n=e[a]))/Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2))}function g(t,e){var r=w[t],i=w[e];w[t]=i,w[e]=r,M[r]=e,M[i]=t}function m(t){return l[w[t]]}function b(t){for(var e=m(t);;){var r=e,i=2*t+1,n=2*(t+1),o=t;if(i<E){var a=m(i);a<r&&(o=i,r=a)}if(n<E&&m(n)<r&&(o=n),o===t)return t;g(t,o),t=o}}function y(t){for(var e=m(t);t>0;){var r,i=1&(r=t)?r-1>>1:(r>>1)-1;if(i>=0&&e<m(i)){g(t,i),t=i;continue}return t}}function x(){if(E>0){var t=w[0];return g(0,E-1),E-=1,b(0),t}return -1}function _(t,e){var r=w[t];return l[r]===e?t:(l[r]=-1/0,y(t),x(),l[r]=e,y((E+=1)-1))}for(var w=[],M=Array(o),f=0;f<o;++f)(l[f]=v(f))<1/0?(M[f]=w.length,w.push(f)):M[f]=-1;for(var E=w.length,f=E>>1;f>=0;--f)b(f);for(;;){var A=x();if(A<0||l[A]>r)break;!function(t){if(!h[t]){h[t]=!0;var e=s[t],r=u[t];s[r]>=0&&(s[r]=e),u[e]>=0&&(u[e]=r),M[e]>=0&&_(M[e],v(e)),M[r]>=0&&_(M[r],v(r))}}(A)}for(var T=[],f=0;f<o;++f)h[f]||(M[f]=T.length,T.push(e[f].slice()));function R(t,e){if(t[e]<0)return e;var r=e,i=e;do{var n=t[i];if(!h[i]||n<0||n===i||(n=t[i=n],!h[i]||n<0||n===i))break;i=n,r=t[r]}while(r!==i);for(var o=e;o!==i;o=t[o])t[o]=i;return i}var k=[];return t.forEach(function(t){var e=R(s,t[0]),r=R(u,t[1]);if(e>=0&&r>=0&&e!==r){var i=M[e],n=M[r];i!==n&&k.push([i,n])}}),n.unique(n.normalize(k)),{positions:T,edges:k}};var i=t("robust-orientation"),n=t("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(t,e,r){"use strict";e.exports=function(t,e){if(e[0][0]<e[1][0])r=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return n(e,t);r=e[1],o=e[0]}if(t[0][0]<t[1][0])a=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,e);a=t[1],s=t[0]}var r,o,a,s,u=i(r,o,s),l=i(r,o,a);if(u<0){if(l<=0)return u}else if(u>0){if(l>=0)return u}else if(l)return l;if(u=i(s,a,o),l=i(s,a,r),u<0){if(l<=0)return u}else if(u>0){if(l>=0)return u}else if(l)return l;return o[0]-s[0]};var i=t("robust-orientation");function n(t,e){if(e[0][0]<e[1][0])r=e[0],n=e[1];else if(e[0][0]>e[1][0])r=e[1],n=e[0];else{var r,n,o,a,s=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]),l=Math.min(e[0][1],e[1][1]),h=Math.max(e[0][1],e[1][1]);return u<l?u-l:s>h?s-h:u-h}t[0][1]<t[1][1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]);var f=i(n,r,o);return f||(f=i(n,r,a))?f:a-n}},{"robust-orientation":284}],299:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.length,r=2*e,i=Array(r),o=0;o<e;++o){var u=t[o],l=u[0][0]<u[1][0];i[2*o]=new f(u[0][0],u,l,o),i[2*o+1]=new f(u[1][0],u,!l,o)}i.sort(function(t,e){var r=t.x-e.x;return r||(r=t.create-e.create)?r:Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])});for(var c=n(a),d=[],p=[],v=[],o=0;o<r;){for(var g=i[o].x,m=[];o<r;){var b=i[o];if(b.x!==g)break;o+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(m.push(new h(b.segment[0][1],b.index,!0,!0)),m.push(new h(b.segment[1][1],b.index,!1,!1))):(m.push(new h(b.segment[1][1],b.index,!0,!1)),m.push(new h(b.segment[0][1],b.index,!1,!0)))):c=b.create?c.insert(b.segment,b.index):c.remove(b.segment)}d.push(c.root),p.push(g),v.push(m)}return new s(d,p,v)};var i=t("binary-search-bounds"),n=t("functional-red-black-tree"),o=t("robust-orientation"),a=t("./lib/order-segments");function s(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function u(t,e){return t.y-e}function l(t,e){for(var r=null;t;){var i,n,a=t.key;a[0][0]<a[1][0]?(i=a[0],n=a[1]):(i=a[1],n=a[0]);var s=o(i,n,e);if(s<0)t=t.left;else if(s>0){if(e[0]!==a[1][0])r=t,t=t.right;else{var u=l(t.right,e);if(u)return u;t=t.left}}else{if(e[0]!==a[1][0])return t;var u=l(t.right,e);if(u)return u;t=t.left}}return r}function h(t,e,r,i){this.y=t,this.index=e,this.start=r,this.closed=i}function f(t,e,r,i){this.x=t,this.segment=e,this.create=r,this.index=i}s.prototype.castUp=function(t){var e=i.le(this.coordinates,t[0]);if(e<0)return -1;this.slabs[e];var r=l(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var s=null;if(r&&(s=r.key),e>0){var h=l(this.slabs[e-1],t);h&&(s?a(h.key,s)>0&&(s=h.key,n=h.value):(n=h.value,s=h.key))}var f=this.horizontal[e];if(f.length>0){var c=i.ge(f,t[1],u);if(c<f.length){var d=f[c];if(t[1]===d.y){if(d.closed)return d.index;for(;c<f.length-1&&f[c+1].y===t[1];)if(c+=1,(d=f[c]).closed)return d.index;if(d.y===t[1]&&!d.start){if((c+=1)>=f.length)return n;d=f[c]}}if(d.start){if(s){var p=o(s[0],s[1],[t[0],d.y]);s[0][0]>s[1][0]&&(p=-p),p>0&&(n=d.index)}else n=d.index}else d.y!==t[1]&&(n=d.index)}}}return n}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(t,e,r){"use strict";var i=t("robust-dot-product"),n=t("robust-sum");function o(t,e){var r=n(i(t,e),[e[e.length-1]]);return r[r.length-1]}function a(t,e,r,i){var n=-e/(i-e);n<0?n=0:n>1&&(n=1);for(var o=1-n,a=t.length,s=Array(a),u=0;u<a;++u)s[u]=n*t[u]+o*r[u];return s}e.exports=function(t,e){for(var r=[],i=[],n=o(t[t.length-1],e),s=t[t.length-1],u=t[0],l=0;l<t.length;++l,s=u){var h=o(u=t[l],e);if(n<0&&h>0||n>0&&h<0){var f=a(s,h,u,n);r.push(f),i.push(f.slice())}h<0?i.push(u.slice()):h>0?r.push(u.slice()):(r.push(u.slice()),i.push(u.slice())),n=h}return{positive:r,negative:i}},e.exports.positive=function(t,e){for(var r=[],i=o(t[t.length-1],e),n=t[t.length-1],s=t[0],u=0;u<t.length;++u,n=s){var l=o(s=t[u],e);(i<0&&l>0||i>0&&l<0)&&r.push(a(n,l,s,i)),l>=0&&r.push(s.slice()),i=l}return r},e.exports.negative=function(t,e){for(var r=[],i=o(t[t.length-1],e),n=t[t.length-1],s=t[0],u=0;u<t.length;++u,n=s){var l=o(s=t[u],e);(i<0&&l>0||i>0&&l<0)&&r.push(a(n,l,s,i)),l<=0&&r.push(s.slice()),i=l}return r}},{"robust-dot-product":281,"robust-sum":289}],301:[function(t,e,r){!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(r){return function(r,i){var n,o,a,s,u,l,h,f,c,d=1,p=r.length,v="";for(o=0;o<p;o++)if("string"==typeof r[o])v+=r[o];else if("object"==typeof r[o]){if((s=r[o]).keys)for(a=0,n=i[d];a<s.keys.length;a++){if(void 0==n)throw Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));n=n[s.keys[a]]}else n=s.param_no?i[s.param_no]:i[d++];if(t.not_type.test(s.type)&&t.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),t.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw TypeError(e("[sprintf] expecting number but found %T",n));switch(t.number.test(s.type)&&(f=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}t.json.test(s.type)?v+=n:(t.number.test(s.type)&&(!f||s.sign)?(c=f?"+":"-",n=n.toString().replace(t.sign,"")):c="",l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",h=s.width-(c+n).length,u=s.width&&h>0?l.repeat(h):"",v+=s.align?c+n+u:"0"===l?c+u+n:u+c+n)}return v}(function(e){if(o[e])return o[e];for(var r,i=e,n=[],a=0;i;){if(null!==(r=t.text.exec(i)))n.push(r[0]);else if(null!==(r=t.modulo.exec(i)))n.push("%");else if(null!==(r=t.placeholder.exec(i))){if(r[2]){a|=1;var s=[],u=r[2],l=[];if(null!==(l=t.key.exec(u)))for(s.push(l[1]);""!==(u=u.substring(l[0].length));)if(null!==(l=t.key_access.exec(u)))s.push(l[1]);else if(null!==(l=t.index_access.exec(u)))s.push(l[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");r[2]=s}else a|=2;if(3===a)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");i=i.substring(r[0].length)}return o[e]=n}(r),arguments)}function n(t,r){return e.apply(null,[t].concat(r||[]))}var o=Object.create(null);void 0!==r&&(r.sprintf=e,r.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=n,"function"==typeof i&&i.amd&&i(function(){return{sprintf:e,vsprintf:n}}))}()},{}],302:[function(t,e,r){"use strict";e.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=n(t,e),i=r.length,o=Array(i),a=Array(i),s=0;s<i;++s)o[s]=[r[s]],a[s]=[s];return{positions:o,cells:a}}(t,e);var r=t.order.join()+"-"+t.dtype,s=a[r],e=+e||0;return s||(s=a[r]=function(t,e){var r=o[t.length+"d"];if(r)return r(i,t,e)}(t.order,t.dtype)),s(t,e)};var i=t("ndarray-extract-contour"),n=t("zero-crossings"),o={"2d":function(t,e,r){var i=t({order:e,scalarArguments:3,getters:"generic"===r?[0]:void 0,phase:function(t,e,r,i){return t>i|0},vertex:function(t,e,r,i,n,o,a,s,u,l,h,f,c){var d=(a<<0)+(s<<1)+(u<<2)+(l<<3)|0;if(0!==d&&15!==d)switch(d){case 0:case 15:h.push([t-.5,e-.5]);break;case 1:h.push([t-.25-.25*(i+r-2*c)/(r-i),e-.25-.25*(n+r-2*c)/(r-n)]);break;case 2:h.push([t-.75-.25*(-i-r+2*c)/(i-r),e-.25-.25*(o+i-2*c)/(i-o)]);break;case 3:h.push([t-.5,e-.5-.5*(n+r+o+i-4*c)/(r-n+i-o)]);break;case 4:h.push([t-.25-.25*(o+n-2*c)/(n-o),e-.75-.25*(-n-r+2*c)/(n-r)]);break;case 5:h.push([t-.5-.5*(i+r+o+n-4*c)/(r-i+n-o),e-.5]);break;case 6:h.push([t-.5-.25*(-i-r+o+n)/(i-r+n-o),e-.5-.25*(-n-r+o+i)/(n-r+i-o)]);break;case 7:h.push([t-.75-.25*(o+n-2*c)/(n-o),e-.75-.25*(o+i-2*c)/(i-o)]);break;case 8:h.push([t-.75-.25*(-o-n+2*c)/(o-n),e-.75-.25*(-o-i+2*c)/(o-i)]);break;case 9:h.push([t-.5-.25*(i+r+-o-n)/(r-i+o-n),e-.5-.25*(n+r+-o-i)/(r-n+o-i)]);break;case 10:h.push([t-.5-.5*(-i-r+-o-n+4*c)/(i-r+o-n),e-.5]);break;case 11:h.push([t-.25-.25*(-o-n+2*c)/(o-n),e-.75-.25*(n+r-2*c)/(r-n)]);break;case 12:h.push([t-.5,e-.5-.5*(-n-r+-o-i+4*c)/(n-r+o-i)]);break;case 13:h.push([t-.75-.25*(i+r-2*c)/(r-i),e-.25-.25*(-o-i+2*c)/(o-i)]);break;case 14:h.push([t-.25-.25*(-i-r+2*c)/(i-r),e-.25-.25*(-n-r+2*c)/(n-r)])}},cell:function(t,e,r,i,n,o,a,s,u){n?s.push([t,e]):s.push([e,t])}});return function(t,e){var r=[],n=[];return i(t,r,n,e),{positions:r,cells:n}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(t,e,r){(function(r){(function(){"use strict";e.exports=function t(e,r,n){var n=n||{},a=o[e];a||(a=o[e]={" ":{data:new Float32Array(0),shape:.2}});var s=a[r];if(!s){if(r.length<=1||!/\d/.test(r))s=a[r]=function(t){for(var e=t.cells,r=t.positions,i=new Float32Array(6*e.length),n=0,o=0,a=0;a<e.length;++a)for(var s=e[a],u=0;u<3;++u){var l=r[s[u]];i[n++]=l[0],i[n++]=l[1]+1.4,o=Math.max(l[0],o)}return{data:i,shape:o}}(i(r,{triangles:!0,font:e,textAlign:n.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var u=r.split(/(\d|\s)/),l=Array(u.length),h=0,f=0,c=0;c<u.length;++c)l[c]=t(e,u[c]),h+=l[c].data.length,f+=l[c].shape,c>0&&(f+=.02);for(var d=new Float32Array(h),p=0,v=-.5*f,c=0;c<l.length;++c){for(var g=l[c].data,m=0;m<g.length;m+=2)d[p++]=g[m]+v,d[p++]=g[m+1];v+=l[c].shape+.02}s=a[r]={data:d,shape:f}}}return s};var i=t("vectorize-text"),n=window||r.global||{},o=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}}).call(this)}).call(this,t("_process"))},{_process:5,"vectorize-text":311}],304:[function(t,e,r){"use strict";var i=t("parse-unit");function n(t,e){var r=i(getComputedStyle(t).getPropertyValue(e));return r[0]*o(r[1],t)}function o(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),(e===window||e===document)&&(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":var r,i,o,a;return r=t,i=e,(o=document.createElement("div")).style["font-size"]="128"+r,i.appendChild(o),a=n(o,"font-size")/128,i.removeChild(o),a;case"em":return n(e,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}e.exports=o},{"parse-unit":265}],305:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],i=t.right||f(r),n=t.radius||1,o=t.theta||0,h=t.phi||0;if(e=[].slice.call(e,0,3),s(r=[].slice.call(r,0,3),r),s(i=[].slice.call(i,0,3),i),"eye"in t){var d=t.eye,p=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];a(i,p,r),1e-6>l(i[0],i[1],i[2])?i=f(r):s(i,i),n=l(p[0],p[1],p[2]);var v=u(r,p)/n,g=u(i,p)/n;h=Math.acos(v),o=Math.acos(g)}return n=Math.log(n),new c(t.zoomMin,t.zoomMax,e,r,i,n,o,h)};var i=t("filtered-vector"),n=t("gl-mat4/invert"),o=t("gl-mat4/rotate"),a=t("gl-vec3/cross"),s=t("gl-vec3/normalize"),u=t("gl-vec3/dot");function l(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function h(t){return Math.min(1,Math.max(-1,t))}function f(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),i=Math.abs(t[2]),n=[0,0,0];e>Math.max(r,i)?n[2]=1:r>Math.max(e,i)?n[0]=1:n[1]=1;for(var o=0,a=0,u=0;u<3;++u)o+=t[u]*t[u],a+=n[u]*t[u];for(var u=0;u<3;++u)n[u]-=a/o*t[u];return s(n,n),n}function c(t,e,r,n,o,a,s,u){this.center=i(r),this.up=i(n),this.right=i(o),this.radius=i([a]),this.angle=i([s,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}var d=c.prototype;d.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=Math.max(e=e>0?Math.log(e):1/0,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},d.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},d.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,i=0,n=0,o=0;o<3;++o)n+=e[o]*r[o],i+=e[o]*e[o];for(var u=Math.sqrt(i),h=0,o=0;o<3;++o)r[o]-=e[o]*n/i,h+=r[o]*r[o],e[o]/=u;for(var f=Math.sqrt(h),o=0;o<3;++o)r[o]/=f;var c=this.computedToward;a(c,e,r),s(c,c);for(var d=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],v=this.computedAngle[1],g=Math.cos(p),m=Math.sin(p),b=Math.cos(v),y=Math.sin(v),x=this.computedCenter,_=g*b,w=m*b,M=-g*y,E=-m*y,A=this.computedEye,T=this.computedMatrix,o=0;o<3;++o){var R=_*r[o]+w*c[o]+y*e[o];T[4*o+1]=M*r[o]+E*c[o]+b*e[o],T[4*o+2]=R,T[4*o+3]=0}var k=T[1],S=T[5],O=T[9],C=T[2],L=T[6],I=T[10],P=S*I-O*L,B=O*C-k*I,N=k*L-S*C,F=l(P,B,N);P/=F,B/=F,N/=F,T[0]=P,T[4]=B,T[8]=N;for(var o=0;o<3;++o)A[o]=x[o]+T[2+4*o]*d;for(var o=0;o<3;++o){for(var h=0,z=0;z<3;++z)h+=T[o+4*z]*A[z];T[12+o]=-h}T[15]=1},d.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var i=0;i<16;++i)e[i]=r[i];return e}return r};var p=[0,0,0];d.rotate=function(t,e,r,i){if(this.angle.move(t,e,r),i){this.recalcMatrix(t);var n=this.computedMatrix;p[0]=n[2],p[1]=n[6],p[2]=n[10];for(var a=this.computedUp,s=this.computedRight,u=this.computedToward,l=0;l<3;++l)n[4*l]=a[l],n[4*l+1]=s[l],n[4*l+2]=u[l];o(n,n,i,p);for(var l=0;l<3;++l)a[l]=n[4*l],s[l]=n[4*l+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,s[0],s[1],s[2])}},d.pan=function(t,e,r,i){e=e||0,r=r||0,i=i||0,this.recalcMatrix(t);var n=this.computedMatrix;this.computedRadius[0];var o=n[1],a=n[5],s=n[9],u=l(o,a,s);o/=u,a/=u,s/=u;var h=n[0],f=n[4],c=n[8],d=h*o+f*a+c*s,p=l(h-=o*d,f-=a*d,c-=s*d),v=(h/=p)*e+o*r,g=(f/=p)*e+a*r,m=(c/=p)*e+s*r;this.center.move(t,v,g,m);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+i),this.radius.set(t,Math.log(b))},d.translate=function(t,e,r,i){this.center.move(t,e||0,r||0,i||0)},d.setMatrix=function(t,e,r,i){var o,a,s=1;"number"==typeof r&&(s=0|r),(s<0||s>3)&&(s=1);var u=(s+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var f=e[s],c=e[s+4],d=e[s+8];if(i){var p=Math.abs(f),v=Math.abs(c),g=Math.abs(d),m=Math.max(p,v,g);p===m?(f=f<0?-1:1,c=d=0):g===m?(d=d<0?-1:1,f=c=0):(c=c<0?-1:1,f=d=0)}else{var b=l(f,c,d);f/=b,c/=b,d/=b}var y=e[u],x=e[u+4],_=e[u+8],w=y*f+x*c+_*d,M=l(y-=f*w,x-=c*w,_-=d*w);y/=M,x/=M;var E=c*(_/=M)-d*x,A=d*y-f*_,T=f*x-c*y,R=l(E,A,T);if(E/=R,A/=R,T/=R,this.center.jump(t,H,W,X),this.radius.idle(t),this.up.jump(t,f,c,d),this.right.jump(t,y,x,_),2===s){var k=e[1],S=e[5],O=e[9],C=k*y+S*x+O*_,L=k*E+S*A+O*T;o=N<0?-Math.PI/2:Math.PI/2,a=Math.atan2(L,C)}else{var I=e[2],P=e[6],B=e[10],N=I*f+P*c+B*d,F=I*y+P*x+B*_,z=I*E+P*A+B*T;o=Math.asin(h(N)),a=Math.atan2(z,F)}this.angle.jump(t,a,o),this.recalcMatrix(t);var D=e[2],U=e[6],j=e[10],G=this.computedMatrix;n(G,e);var V=G[15],H=G[12]/V,W=G[13]/V,X=G[14]/V,Y=Math.exp(this.computedRadius[0]);this.center.jump(t,H-D*Y,W-U*Y,X-j*Y)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},d.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},d.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},d.lookAt=function(t,e,r,i){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var n=(i=i||this.computedUp)[0],o=i[1],a=i[2],s=l(n,o,a);if(!(s<1e-6)){n/=s,o/=s,a/=s;var u=e[0]-r[0],f=e[1]-r[1],c=e[2]-r[2],d=l(u,f,c);if(!(d<1e-6)){u/=d,f/=d,c/=d;var p=this.computedRight,v=p[0],g=p[1],m=p[2],b=n*v+o*g+a*m,y=l(v-=b*n,g-=b*o,m-=b*a);if(!(y<.01&&(y=l(v=o*c-a*f,g=a*u-n*c,m=n*f-o*u))<1e-6)){v/=y,g/=y,m/=y,this.up.set(t,n,o,a),this.right.set(t,v,g,m),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(d));var x=o*m-a*g,_=a*v-n*m,w=n*g-o*v,M=l(x,_,w),E=n*u+o*f+a*c,A=v*u+g*f+m*c,T=(x/=M)*u+(_/=M)*f+(w/=M)*c,R=Math.asin(h(E)),k=Math.atan2(T,A),S=this.angle._state,O=S[S.length-1],C=S[S.length-2],L=Math.abs((O%=2*Math.PI)+2*Math.PI-k),I=Math.abs(O-k),P=Math.abs(O-2*Math.PI-k);L<I&&(O+=2*Math.PI),P<I&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,C),this.angle.set(t,k,R)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=t*e,o=i*t,a=o-(o-t),s=t-a,u=i*e,l=u-(u-e),h=e-l,f=s*h-(n-a*l-s*l-a*h);return r?(r[0]=f,r[1]=n,r):[f,n]};var i=134217729},{}],307:[function(t,e,r){"use strict";e.exports=function(t,e,r){var i=t+e,n=i-t,o=e-n,a=t-(i-n);return r?(r[0]=a+o,r[1]=i,r):[a+o,i]}},{}],308:[function(t,e,i){(function(e){(function(){"use strict";var r=t("bit-twiddle"),n=t("dup"),o=t("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,l=e.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=n([32,0])),l.BIGUINT64||(l.BIGUINT64=n([32,0])),l.BIGINT64||(l.BIGINT64=n([32,0])),l.BUFFER||(l.BUFFER=n([32,0]));var h=l.DATA,f=l.BUFFER;function c(t){if(t){var e=t.length||t.byteLength;h[r.log2(e)].push(t)}}function d(t){var t=r.nextPow2(t),e=h[r.log2(t)];return e.length>0?e.pop():new ArrayBuffer(t)}function p(t){return new Uint8Array(d(t),0,t)}function v(t){return new Uint16Array(d(2*t),0,t)}function g(t){return new Uint32Array(d(4*t),0,t)}function m(t){return new Int8Array(d(t),0,t)}function b(t){return new Int16Array(d(2*t),0,t)}function y(t){return new Int32Array(d(4*t),0,t)}function x(t){return new Float32Array(d(4*t),0,t)}function _(t){return new Float64Array(d(8*t),0,t)}function w(t){return a?new Uint8ClampedArray(d(t),0,t):p(t)}function M(t){return s?new BigUint64Array(d(8*t),0,t):null}function E(t){return u?new BigInt64Array(d(8*t),0,t):null}function A(t){return new DataView(d(t),0,t)}function T(t){t=r.nextPow2(t);var e=f[r.log2(t)];return e.length>0?e.pop():new o(t)}i.free=function(t){if(o.isBuffer(t))f[r.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength;h[0|r.log2(e)].push(t)}},i.freeUint8=i.freeUint16=i.freeUint32=i.freeBigUint64=i.freeInt8=i.freeInt16=i.freeInt32=i.freeBigInt64=i.freeFloat32=i.freeFloat=i.freeFloat64=i.freeDouble=i.freeUint8Clamped=i.freeDataView=function(t){c(t.buffer)},i.freeArrayBuffer=c,i.freeBuffer=function(t){f[r.log2(t.length)].push(t)},i.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return d(t);switch(e){case"uint8":return p(t);case"uint16":return v(t);case"uint32":return g(t);case"int8":return m(t);case"int16":return b(t);case"int32":return y(t);case"float":case"float32":return x(t);case"double":case"float64":return _(t);case"uint8_clamped":return w(t);case"bigint64":return E(t);case"biguint64":return M(t);case"buffer":return T(t);case"data":case"dataview":return A(t)}return null},i.mallocArrayBuffer=d,i.mallocUint8=p,i.mallocUint16=v,i.mallocUint32=g,i.mallocInt8=m,i.mallocInt16=b,i.mallocInt32=y,i.mallocFloat32=i.mallocFloat=x,i.mallocFloat64=i.mallocDouble=_,i.mallocUint8Clamped=w,i.mallocBigUint64=M,i.mallocBigInt64=E,i.mallocDataView=A,i.mallocBuffer=T,i.clearCache=function(){for(var t=0;t<32;++t)l.UINT8[t].length=0,l.UINT16[t].length=0,l.UINT32[t].length=0,l.INT8[t].length=0,l.INT16[t].length=0,l.INT32[t].length=0,l.FLOAT[t].length=0,l.DOUBLE[t].length=0,l.BIGUINT64[t].length=0,l.BIGINT64[t].length=0,l.UINT8C[t].length=0,h[t].length=0,f[t].length=0}}).call(this)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(t,e,r){"use strict";function i(t){this.roots=Array(t),this.ranks=Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=i;var n=i.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var i=r[e];r[e]=t,e=i}return t},n.link=function(t,e){var r=this.find(t),i=this.find(e);if(r!==i){var n=this.ranks,o=this.roots,a=n[r],s=n[i];a<s?o[r]=i:s<a?o[i]=r:(o[i]=r,++n[r])}}},{}],310:[function(t,e,r){"use strict";e.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,i=t.length,n=t[0],o=t[0],a=1;a<i;++a)if(o=n,e(n=t[a],o)){if(a===r){r++;continue}t[r++]=n}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,i=t[0],n=t[0],o=1;o<r;++o,n=i)if(n=i,(i=t[o])!==n){if(o===e){e++;continue}t[e++]=i}return t.length=e,t}(t))}},{}],311:[function(t,e,r){"use strict";e.exports=function(t,e){return("object"!=typeof e||null===e)&&(e={}),i(t,e.canvas||n,e.context||o,e)};var i=t("./lib/vtext"),n=null,o=null;"undefined"!=typeof document&&((n=document.createElement("canvas")).width=8192,n.height=1024,o=n.getContext("2d"))},{"./lib/vtext":312}],312:[function(t,e,r){e.exports=function(t,e,r,i){var o=64,a=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return i&&(i.size&&i.size>0&&(o=i.size),i.lineSpacing&&i.lineSpacing>0&&(a=i.lineSpacing),i.styletags&&i.styletags.breaklines&&(s.breaklines=!!i.styletags.breaklines),i.styletags&&i.styletags.bolds&&(s.bolds=!!i.styletags.bolds),i.styletags&&i.styletags.italics&&(s.italics=!!i.styletags.italics),i.styletags&&i.styletags.subscripts&&(s.subscripts=!!i.styletags.subscripts),i.styletags&&i.styletags.superscripts&&(s.superscripts=!!i.styletags.superscripts)),r.font=[i.fontStyle,i.fontVariant,i.fontWeight,o+"px",i.font].filter(function(t){return t}).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",f(function(t,e,r,i,o,a){r=r.replace(/\n/g,""),r=!0===a.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s,u,h,f,c,d="",p=[];for(u=0;u<r.length;++u)p[u]=d;!0===a.bolds&&(p=l("b","b|",r,p)),!0===a.italics&&(p=l("i","i|",r,p)),!0===a.superscripts&&(p=l("sup","+1",r,p)),!0===a.subscripts&&(p=l("sub","-1",r,p));var v=[],g="";for(u=0;u<r.length;++u)null!==p[u]&&(g+=r[u],v.push(p[u]));var m=g.split("\n"),b=m.length,y=Math.round(o*i),x=2*i,_=0,w=b*y+x;t.height<w&&(t.height=w),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var M=0,E="";function A(){if(""!==E){var t=e.measureText(E).width;e.fillText(E,i+h,x+f),h+=t}}function T(){return""+Math.round(c)+"px "}for(s=0;s<b;++s){var R=m[s]+"\n";for(u=0,h=0,f=s*y,c=i,E="";u<R.length;++u){var k=u+M<v.length?v[u+M]:v[v.length-1];d===k?E+=R[u]:(A(),E=R[u],void 0!==k&&(function(t,r){var i=""+e.font;if(!0===a.subscripts){var n=t.indexOf("-"),o=r.indexOf("-"),s=n>-1?parseInt(t[1+n]):0,u=o>-1?parseInt(r[1+o]):0;s!==u&&(i=i.replace(T(),"?px "),c*=Math.pow(.75,u-s),i=i.replace("?px ",T())),f+=.25*y*(u-s)}if(!0===a.superscripts){var l=t.indexOf("+"),h=r.indexOf("+"),d=l>-1?parseInt(t[1+l]):0,p=h>-1?parseInt(r[1+h]):0;d!==p&&(i=i.replace(T(),"?px "),c*=Math.pow(.75,p-d),i=i.replace("?px ",T())),f-=.25*y*(p-d)}if(!0===a.bolds){var v=t.indexOf("b|")>-1,g=r.indexOf("b|")>-1;!v&&g&&(i=m?i.replace("italic ","italic bold "):"bold "+i),v&&!g&&(i=i.replace("bold ",""))}if(!0===a.italics){var m=t.indexOf("i|")>-1,b=r.indexOf("i|")>-1;!m&&b&&(i="italic "+i),m&&!b&&(i=i.replace("italic ",""))}e.font=i}(d,k),d=k))}A(),M+=R.length;var S=0|Math.round(h+2*i);_<S&&(_=S)}var O=_,C=x+y*b;return n(e.getImageData(0,0,O,C).data,[C,O,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,o,a,s),i,o)},e.exports.processPixels=f;var i=t("surface-nets"),n=t("ndarray"),o=t("simplify-planar-graph"),a=t("clean-pslg"),s=t("cdt2d"),u=t("planar-graph-to-polyline");function l(t,e,r,i){for(var n="<"+t+">",o="</"+t+">",a=n.length,s=o.length,u="+"===e[0]||"-"===e[0],l=0,h=-s;l>-1&&-1!==(l=r.indexOf(n,l))&&-1!==(h=r.indexOf(o,l+a))&&!(h<=l);){for(var f=l;f<h+s;++f)if(f<l+a||f>=h)i[f]=null,r=r.substr(0,f)+" "+r.substr(f+1);else if(null!==i[f]){var c=i[f].indexOf(e[0]);-1===c?i[f]+=e:u&&(i[f]=i[f].substr(0,c+1)+(1+parseInt(i[f][c+1]))+i[f].substr(c+2))}var d=l+a,p=r.substr(d,h-d).indexOf(n);l=-1!==p?p:h+s}return i}function h(t,e,r,n){var l,h=(l=i(t,128),n?o(l.cells,l.positions,.25):{edges:l.cells,positions:l.positions}),f=function(t,e,r){for(var i=e.textAlign||"start",n=e.textBaseline||"alphabetic",o=[1073741824,1073741824],a=[0,0],s=t.length,u=0;u<s;++u)for(var l=t[u],h=0;h<2;++h)o[h]=0|Math.min(o[h],l[h]),a[h]=0|Math.max(a[h],l[h]);var f=0;switch(i){case"center":f=-.5*(o[0]+a[0]);break;case"right":case"end":f=-a[0];break;case"left":case"start":f=-o[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+i+"'")}var c=0;switch(n){case"hanging":case"top":c=-o[1];break;case"middle":c=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":c=-3*r;break;case"bottom":c=-a[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+n+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(a[0]-o[0]):"height"in e&&(d=e.height/(a[1]-o[1])),t.map(function(t){return[d*(t[0]+f),d*(t[1]+c)]})}(h.positions,e,r),c=h.edges,d="ccw"===e.orientation;if(a(f,c),e.polygons||e.polygon||e.polyline){for(var p=u(c,f),v=Array(p.length),g=0;g<p.length;++g){for(var m=p[g],b=Array(m.length),y=0;y<m.length;++y){for(var x=m[y],_=Array(x.length),w=0;w<x.length;++w)_[w]=f[x[w]].slice();d&&_.reverse(),b[y]=_}v[g]=b}return v}return e.triangles||e.triangulate||e.triangle?{cells:s(f,c,{delaunay:!1,exterior:!1,interior:!0}),positions:f}:{edges:c,positions:f}}function f(t,e,r){try{return h(t,e,r,!0)}catch(t){}try{return h(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(t,e,r){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=y);var t,r,i,n=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var a=new o,s=Object.freeze({});if(a.set(s,1),1!==a.get(s))n=!0;else{e.exports=WeakMap;return}}}Object.prototype.hasOwnProperty;var u=Object.getOwnPropertyNames,l=Object.defineProperty,h=Object.isExtensible,f="weakmap:",c=f+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var d=new ArrayBuffer(25),p=new Uint8Array(d);crypto.getRandomValues(p),c=f+"rand:"+Array.prototype.map.call(p,function(t){return(t%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(t){return u(t).filter(x)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(t){return v(t).filter(x)}})}t=Object.freeze,l(Object,"freeze",{value:function(e){return _(e),t(e)}}),r=Object.seal,l(Object,"seal",{value:function(t){return _(t),r(t)}}),i=Object.preventExtensions,l(Object,"preventExtensions",{value:function(t){return _(t),i(t)}});var g=!1,m=0,b=function(){this instanceof b||M();var t=[],e=[],r=m++;return Object.create(b.prototype,{get___:{value:w(function(i,n){var o,a=_(i);return a?r in a?a[r]:n:(o=t.indexOf(i))>=0?e[o]:n})},has___:{value:w(function(e){var i=_(e);return i?r in i:t.indexOf(e)>=0})},set___:{value:w(function(i,n){var o,a=_(i);return a?a[r]=n:(o=t.indexOf(i))>=0?e[o]=n:(e[o=t.length]=n,t[o]=i),this})},delete___:{value:w(function(i){var n,o,a=_(i);return a?r in a&&delete a[r]:!((n=t.indexOf(i))<0)&&(o=t.length-1,t[n]=void 0,e[n]=e[o],t[n]=t[o],t.length=o,e.length=o,!0)})}})};b.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function t(){this instanceof b||M();var t,e=new o,r=void 0,i=!1;return t=n?function(t,i){return e.set(t,i),e.has(t)||(r||(r=new b),r.set(t,i)),this}:function(t,n){if(i)try{e.set(t,n)}catch(e){r||(r=new b),r.set___(t,n)}else e.set(t,n);return this},Object.create(b.prototype,{get___:{value:w(function(t,i){return r?e.has(t)?e.get(t):r.get___(t,i):e.get(t,i)})},has___:{value:w(function(t){return e.has(t)||!!r&&r.has___(t)})},set___:{value:w(t)},delete___:{value:w(function(t){var i=!!e.delete(t);return r&&r.delete___(t)||i})},permitHostObjects___:{value:w(function(t){if(t===y)i=!0;else throw Error("bogus call to permitHostObjects___")})}})}n&&"undefined"!=typeof Proxy&&(Proxy=void 0),t.prototype=b.prototype,e.exports=t,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=b)}function y(t){t.permitHostObjects___&&t.permitHostObjects___(y)}function x(t){return!(t.substr(0,f.length)==f&&"___"===t.substr(t.length-3))}function _(t){if(t!==Object(t))throw TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(h(t)){e={key:t};try{return l(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function w(t){return t.prototype=null,Object.freeze(t)}function M(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(t,e,r){var i=t("./hidden-store.js");e.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:i(e,t)}}},{"./hidden-store.js":315}],315:[function(t,e,r){e.exports=function(t,e){var r={identity:e},i=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?i.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(t,e,r){var i=t("./create-store.js");e.exports=function(){var t=i();return{get:function(e,r){var i=t(e);return i.hasOwnProperty("value")?i.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},{"./create-store.js":314}],317:[function(t,e,r){"use strict";var i,n;e.exports=(i=(function(){return function(t,e,r,i,n,o){var a=t[0],s=r[0],u=[0];i|=0;var l=0;for(l=0;l<a;++l){var h=e[i]-o,f=e[i+s]-o;h>=0!=f>=0&&n.push(u[0]+.5+.5*(h+f)/(h-f)),i+=s,++u[0]}}}).bind(void 0,{funcName:"zeroCrossings"}),n={},function(t,e,r){var o=t.dtype,a=t.order,s=[o,a.join()].join(),u=n[s];return u||(n[s]=u=i([o,a])),u(t.shape.slice(0),t.data,t.stride,0|t.offset,e,r)})},{}],318:[function(t,e,r){"use strict";e.exports=function(t,e){var r=[];return e=+e||0,i(t.hi(t.shape[0]-1),r,e),r};var i=t("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)}}]);